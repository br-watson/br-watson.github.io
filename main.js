function Ue(e,t,n){for(let o of n)e(o.name,o.summary,o.usage,o.showInHelp,o.showInMobileTray,i=>t.get(o.targetCommand)?.execute(i,o.args))}function ee({profile:e,commands:t,registerCommand:n}){n("whoami","About me","whoami",!0,!0,o=>{o.printLine(`${String(e.name)} \u2014 ${String(e.role)} (${String(e.location)})`)}),Ue(n,t,[{name:"bio",summary:"Alias: cat bio.txt",usage:"bio",targetCommand:"cat",args:["bio.txt"],showInHelp:!0,showInMobileTray:!0},{name:"projects",summary:"Alias: cat projects.txt",usage:"projects",targetCommand:"cat",args:["projects.txt"],showInHelp:!0,showInMobileTray:!0},{name:"contact",summary:"Alias: cat contact.txt",usage:"contact",targetCommand:"cat",args:["contact.txt"],showInHelp:!0,showInMobileTray:!0},{name:"cv",summary:"Alias: open cv",usage:"cv",targetCommand:"open",args:["cv"],showInHelp:!0,showInMobileTray:!0},{name:"skills",summary:"List my skills",usage:"skills",targetCommand:"cat",args:["skills.txt"],showInHelp:!0,showInMobileTray:!0},{name:"education",summary:"List my education",usage:"education",targetCommand:"cat",args:["education.txt"],showInHelp:!0,showInMobileTray:!0},{name:"roles",summary:"List my roles and experience",usage:"roles",targetCommand:"cat",args:["roles.txt"],showInHelp:!0,showInMobileTray:!0}])}function D(e,t,n){return Math.max(t,Math.min(n,e))}function U(e){return e.reduce((t,n)=>Math.max(t,n.length),0)}var We="[penguin noises]",qe=["      .--.","     |o_o |","     |:_/ |","    //   \\\\","   (|     |)","  /'\\_   _/`\\","  \\___)=(___/"],Ke=["     _","   ('v')","  //-=-\\\\","  (\\_=_/)","   ^^ ^^"];function ze(e,t){let n=Math.max(1,t),o=[],i=e.split(/\r?\n/);for(let a of i){let s=a.trim().split(/\s+/).filter(Boolean);if(s.length===0){o.push("");continue}let r="";for(let d of s){if(d.length>n){r&&(o.push(r),r="");for(let m=0;m<d.length;m+=n)o.push(d.slice(m,m+n));continue}if(!r){r=d;continue}if(r.length+1+d.length<=n){r=`${r} ${d}`;continue}o.push(r),r=d}r&&o.push(r)}return o.length===0?[""]:o}function Ge(e,t){let n=ze(e,t),o=n.reduce((a,s)=>Math.max(a,s.length),1),i="-".repeat(o+2);return[`.${i}.`,...n.map(a=>`| ${a.padEnd(o," ")} |`),`'${i}'`]}function Ve(e,t,n){let o=n==="big-penguin"?48:n==="lil-penguin"?34:24,i=D(t-4,1,o),a=Ge(e,i);if(n==="no-penguin")return a;let s=["   \\","    \\"],r=n==="big-penguin"?qe:Ke;return[...a,...s,...r]}function Qe(e,t){let n=["big-penguin","lil-penguin","no-penguin"];for(let o of n){let i=Ve(e,t,o);if(U(i)<=t)return i}return null}function te({registerCommand:e}){e("pengsay","Penguin says something","pengsay [text]",!0,!0,(t,n)=>{let o=n.join(" ").trim()||We,i=Math.max(1,t.getColumns()),a=i>=5?Qe(o,i):null;if(!a){t.printLine(`penguin: "${o}"`);return}t.printPre(a.join(`
`),"ok")})}function Ye(e,t){let n=t.toLowerCase();return Array.from(new Set(e)).filter(o=>o.toLowerCase().startsWith(n)).sort()}function W(e,t){return e.argIndex!==0?[]:Ye(t,e.prefix??"")}var Xe=new Set(["file","bio","link","links","projects","education"]);function Je(e,t){let{t:n,s:o}=e.seg,i=t.lines.flatMap((a,s)=>[n(a),...s<t.lines.length-1?[n(`

`)]:[]]);e.printLine([o("accent",`About
`),...i],"muted")}function Ze(e,t){e.printPre(String(t.content),"ok")}function et(e,t,n){let{t:o,l:i,s:a}=e.seg;e.printLine([o(`${t} -> `),i(n.href),o(" (click me! or run "),a("accent",`open ${t}`),o(")")],"muted")}function tt(e,t){let{t:n,l:o,s:i}=e.seg,a=(r,d)=>" ".repeat(Math.max(0,d-r.length)),s=Object.entries(t.items).flatMap(([r,d])=>{let m=r==="email"?d.replace("mailto:",""):r;return[n(`${r}: `.padEnd(10," ")),o(d,m),n(a(m,11)),n(" (or run "),i("accent",`open ${r}`),n(`)
`)]});e.printLine(s,"muted")}function nt(e,t){let{t:n,l:o,s:i}=e.seg,a=t.projects.flatMap(s=>[i("accent",`${s.name}
`),n(`${s.desc}
`),...s.repoLink?[o(s.repoLink),n(`
`)]:[n("")],...s.deployedLink?[o(s.deployedLink),n(`
`)]:[n("")],s.tags&&s.tags.length>0?n(`Tech stack: ${s.tags.join(", ")}
`):n(""),n(`
`)]);e.printLine(a,"muted")}function ot(e,t){let{t:n,l:o,s:i}=e.seg,a=t.education.flatMap(s=>[i("accent",`${s.qualification} - ${s.institution}
`),n(`${s.location} | ${s.startDate} - ${s.endDate} | ${s.grade}
`),s.description?n(`${s.description}
`):n(""),...s.dissertation?[n("Dissertation: "),o(s.dissertation.link,s.dissertation.title),n(`
`)]:[n("")],s.tags&&s.tags.length>0?n(`Tags: ${s.tags.join(", ")}
`):n(""),n(`
`)]);e.printLine(a,"muted")}function it(e,t,n){switch(n.type){case"bio":Je(e,n);break;case"file":Ze(e,n);break;case"link":et(e,t,n);break;case"links":tt(e,n);break;case"projects":nt(e,n);break;case"education":ot(e,n);break;default:e.printLine(`cat: ${t}: Not a file`,"error");break}}function ne(e){e("cat","Print file contents","cat <file>",!0,!0,(t,n)=>{let o=n[0];if(!o){t.printLine("cat: missing file operand","error");return}let i=t.resolveHomeItem(o);if(!i){t.printLine(`cat: ${o}: No such file`,"error");return}it(t,o,i)},(t,n)=>{let o=t.listHome().filter(i=>{let a=t.resolveHomeItem(i);return a?Xe.has(a.type):!1});return W(n,o)})}function B(e){let t=new Map;return e.links.github&&t.set("github",e.links.github),e.links.linkedin&&t.set("linkedin",e.links.linkedin),e.filePaths.cv&&t.set("cv",e.filePaths.cv),e.filePaths.dissertation&&t.set("dissertation",e.filePaths.dissertation),e.email&&t.set("email",`mailto:${e.email}`),t}function oe({registerCommand:e,isMobile:t}){e("ls","List files (only ~ supported)","ls [path]",!0,!0,(n,o)=>{if((o[0]??"~")!=="~"){n.printLine('ls: only "~" is supported in this tiny filesystem',"error");return}n.printPre(n.listHome().join(`
`),"ok")}),ne(e),e("open","Open link","open <alias>",!0,!0,(n,o)=>{let{t:i,l:a}=n.seg,s=o[0],r=(s??"").toLowerCase();if(!r){n.printLine(t?"open: missing target (see the suggestions for valid options)":"open: missing target (press Tab to see valid options)","error");return}let d=B(n.profile);if(d.has(r)){let m=d.get(r);m&&(n.printLine([i("Opening: "),a(m)],"muted"),n.openUrl(m));return}n.printLine(`open: unknown target "${s}"`,"error")},(n,o)=>{let i=B(n.profile);return W(o,i.keys())})}function ie({commands:e,registerCommand:t,isMobile:n}){t("help","Show this help","help",!0,!0,o=>{let{s:i}=o.seg;o.printLine([i("accent","Available commands")],"ok");let a=Array.from(e.values()).filter(r=>r.showInHelp).sort((r,d)=>r.name.localeCompare(d.name)).map(r=>`${r.name.padEnd(12," ")} ${r.summary.padEnd(32," ")} ${r.usage}`),s=[`${"COMMAND".padEnd(12," ")} ${"SUMMARY".padEnd(32," ")} USAGE`,"",...a,"",n?'Tip: use the command buttons below, or tap "Custom" to type commands with autocomplete and history.':"Tips: use \u2191/\u2193 for history and Tab for autocomplete (Shift+Tab to move focus)."];o.printPre(s.join(`
`),"ok")}),t("clear","Clear the screen","clear",!0,!0,o=>o.clear()),t("date","Print local date/time","date",!0,!0,o=>{o.printLine(new Date().toString(),"muted")}),t("echo","Print args","echo <text>",!0,!1,(o,i)=>{o.printLine(i.join(" "))}),t("theme","Switch theme","theme [dark|light|toggle]",!0,!0,(o,i)=>{let a=(i[0]??"").toLowerCase(),s=o.theme.get();if(!a){o.printLine(`theme: current is "${s}"`,"muted"),o.printLine("Try: theme dark | theme light | theme toggle","muted");return}if(a==="toggle"){o.theme.toggle(),o.printLine(`theme: set to "${o.theme.get()}"`,"muted");return}if(a!=="dark"&&a!=="light"){o.printLine('theme: expected "dark" or "light"',"error");return}o.theme.set(a),o.printLine(`theme: set to "${a}"`,"muted")},(o,i)=>{if(i.argIndex!==0)return[];let a=i.prefix.toLowerCase();return["dark","light","toggle"].filter(s=>s.startsWith(a))})}function re({profile:e,isMobile:t=!1}){let n=new Map,o=(i,a,s,r,d,m,l)=>{n.set(i,{name:i,summary:a,usage:s,showInHelp:r,showInMobileTray:d,execute:m,complete:l})};return ie({commands:n,registerCommand:o,isMobile:t}),oe({registerCommand:o,isMobile:t}),ee({profile:e,commands:n,registerCommand:o}),te({registerCommand:o}),{commands:n}}function se(e){return{"~":{type:"dir",children:{"bio.txt":{type:"bio",lines:e.bio},"projects.txt":{type:"projects",projects:e.projects},"contact.txt":{type:"links",items:{...e.links,email:`mailto:${e.email}`}},"skills.txt":{type:"file",content:e.skills.join(", ")},"education.txt":{type:"education",education:e.education},"roles.txt":{type:"file",content:e.roles.map(t=>{let n=t.title??"Untitled Role",o=t.company?` at ${t.company}`:"",i=t.location?` in ${t.location}`:"",a=` (${t.startDate} - ${t.endDate??"Present"})`,s=t.description?`
  ${t.description}`:"";return`- ${n}${o}${i}${a}${s}`}).join(`

`)},"cv.pdf":{type:"link",href:e.filePaths.cv},"dissertation.pdf":{type:"link",href:e.filePaths.dissertation},"todo.md":{type:"file",content:e.todo.map(t=>`- [ ] ${t}`).join(`
`)}}}}}function ae(e){let t=e["~"];if(!t||t.type!=="dir")throw new Error("Invalid filesystem: missing home dir");return t}function le(e){return Object.keys(ae(e).children).sort()}function me(e,t){return ae(e).children[t]}function N(e){let t=[],n="",o=null,i=!1;for(let a=0;a<e.length;a++){let s=e[a];if(i){n+=s,i=!1;continue}if(s==="\\"){i=!0;continue}if(o){if(s===o){o=null;continue}n+=s;continue}if(s==='"'||s==="'"){o=s;continue}if(/\s/.test(s)){n&&(t.push(n),n="");continue}n+=s}return i&&(n+="\\"),n&&t.push(n),{tokens:t,endsWithWhitespace:/\s$/.test(e)}}function ce({commands:e,getContext:t,onListMatches:n}){let o=Array.from(e.entries()).map(([m,l])=>({name:m,showInHelp:l.showInHelp})).sort((m,l)=>m.name.localeCompare(l.name)),i=null;function a(m,l=N(m)){let{tokens:c,endsWithWhitespace:u}=l;if(c.length===0)return null;if(c.length===1&&!u){let R=c[0],I=o.filter(x=>x.showInHelp&&x.name.startsWith(R)).map(x=>x.name);return{kind:"cmd",prefix:R,matches:I,buildValue:x=>x}}let g=c[0],b=e.get(g);if(!b?.complete)return null;let E=c.slice(1),T=u?"":E[E.length-1]??"",C=u?E.length:Math.max(0,E.length-1),_={line:m,tokens:c,args:E,endsWithWhitespace:u,argIndex:C,prefix:T},w=b.complete(t(),_)||[];return{kind:`arg:${g}`,prefix:T,matches:w,buildValue:R=>[...u?c:c.slice(0,-1),rt(R)].join(" ")}}function s(m){let l=a(m);if(!l)return[];let c=new Set,u=[];for(let g of l.matches){let b=l.buildValue(g);c.has(b)||(c.add(b),u.push(b))}return u}function r(m){if(i?.phase==="menu"){let u=i.values.indexOf(m);if(u!==-1){let g=(u+1)%i.values.length;return i.index=g,i.lastValue=i.values[g],i.lastValue}i=null}let l=N(m);if(l.tokens.length===0)return"";let c=a(m,l);return c?d(c.kind,m,c.prefix,c.matches,c.buildValue)??m:m}function d(m,l,c,u,g){if(u.length===0)return i=null,null;if(u.length===1)return i=null,g(u[0]);let b=at(u),E=st(u);if(E.length>c.length){let C=g(E);return i={phase:"armed",kind:m,baseInput:C,prefix:E,matchesKey:b,values:u.map(g),index:-1,lastValue:null},C}if(!(i&&i.kind===m&&i.baseInput===l&&i.prefix===c&&i.matchesKey===b))return i={phase:"armed",kind:m,baseInput:l,prefix:c,matchesKey:b,values:u.map(g),index:-1,lastValue:null},null;if(i?.phase==="armed")return n(u),i.phase="listed",null;if(i?.phase==="listed"){let C=i.values[0];return i.phase="menu",i.index=0,i.lastValue=C,C}return null}return{autocomplete:r,listCompletions:s}}function rt(e){return/\s/.test(e)?`"${e.replace(/"/g,'\\"')}"`:e}function st(e){if(e.length===0)return"";let t=e[0];for(let n=1;n<e.length;n++){let o=e[n],i=0;for(;i<t.length&&i<o.length&&t[i]===o[i];)i++;if(t=t.slice(0,i),t==="")break}return t}function at(e){return e.join("\0")}var M=e=>({type:"text",text:e}),k=(e,t)=>({type:"span",className:e,text:t}),lt=(e,t)=>({type:"link",href:e,text:t});function ue({renderer:e,profile:t,fs:n,commands:o,openUrl:i,theme:a,isMobile:s}){let r={history:[],historyIndex:-1,hasRunCommand:!1,hasBooted:!1},d="status: work-in-progress";function m(){r.hasBooted=!0,l()}function l(){e.clear(),b(),T([M(s?"Tap ":"Type "),k("accent","help"),M(` to see commands and their uses.
`),k("accent","Tips: "),M(s?'use the command buttons below, or tap "Custom" to type commands with autocomplete and history.':"use \u2191/\u2193 for history and Tab for autocomplete (Shift+Tab to move focus).")],"muted"),e.scrollToBottom()}function c(){!r.hasBooted||r.hasRunCommand||l()}function u(p,y){return p.length<=y?p:y<=1?"\u2026":`${p.slice(0,y-1)}\u2026`}function g(p,y){let L=u(p,y),v=Math.max(0,y-L.length),A=Math.floor(v/2),P=v-A;return{leftPad:" ".repeat(A),text:L,rightPad:" ".repeat(P)}}function b(){let p=t.nameAsciiArt??[],y=U(p),L=e.getColumns();if(p.length>0&&y<=L){C(p.join(`
`),"accent"),T(t.role,"muted"),T([k("accent",d)],"muted");return}E()}function E(){let p=String(t.name).trim()||"Portfolio",y=String(t.role).trim()||"Software Engineer",L=e.getColumns(),v=D(L-6,10,54),A=Math.min(20,v),P=Math.max(p.length,y.length,A-4),$=D(P+4,A,v),G=`\u256D${"\u2500".repeat($+2)}\u256E`,Fe=`\u251C${"\u2500".repeat($+2)}\u2524`,je=`\u2570${"\u2500".repeat($+2)}\u256F`,Z=(Ne,Oe=!0)=>{let V=g(Ne,$);return[k("banner-border","\u2502 "),k("banner-border",V.leftPad),k("banner-text",V.text),k("banner-border",V.rightPad),k("banner-border",Oe?` \u2502
`:" \u2502")]},De=[k("banner-border",`${G}
`),...Z(p),k("banner-border",`${Fe}
`),...Z(y),k("banner-border",je)];T(De,"banner",!1),T([k("accent",d)],"muted")}function T(p,y="ok",L=!0){let v=Array.isArray(p)?p:[M(String(p))];e.printLine(v,y,L)}function C(p,y="ok"){e.printPre(String(p),y)}function _(p){T([k("cmd","$"),M(" "),k("cmd",p)],"cmd")}function w(){return le(n)}function R(p){return me(n,p)}function I(){return{profile:t,fs:n,theme:a,openUrl:i,printLine:T,printPre:C,getColumns:e.getColumns,seg:{t:M,s:k,l:lt},listHome:w,resolveHomeItem:R,clear:e.clear}}let x=ce({commands:o,getContext:I,onListMatches:p=>{let y=[];p.forEach((L,v)=>{v&&y.push(M("   ")),y.push(k("accent",L))}),T(y,"muted"),e.scrollToBottom()}});async function z(p){let y=p.trim();if(!y)return;r.hasRunCommand=!0,_(y);let L=N(y),[v,...A]=L.tokens,P=o.get(v);if(!P){T([M("Command not found: "),k("error",v)],"error"),T([M("Try: "),k("accent","help")],"muted");return}try{await P.execute(I(),A)}catch($){let G=$ instanceof Error?$.message:String($);T([k("error","Error:"),M(" "),M(G)],"error")}}function f(p){r.history.push(p),r.historyIndex=r.history.length}function h(){return r.history.length===0?null:(r.historyIndex=Math.max(0,r.historyIndex-1),r.history[r.historyIndex]??"")}function S(){return r.history.length===0?null:(r.historyIndex=Math.min(r.history.length,r.historyIndex+1),r.history[r.historyIndex]??"")}function H(p=6){let y=Math.max(0,Math.floor(p));if(y===0)return[];let L=[],v=new Set;for(let A=r.history.length-1;A>=0;A--){let P=r.history[A]??"";if(!(P.length===0||v.has(P))&&(v.add(P),L.push(P),L.length>=y))break}return L}return{boot:m,run:z,addHistory:f,historyUp:h,historyDown:S,listRecentHistory:H,listCompletions:p=>x.listCompletions(p),autocomplete:p=>x.autocomplete(p),refreshIntroIfPristine:c}}var O={name:"Bradley Watson",nameAsciiArt:["____________  ___ ______   _    _  ___ _____ _____  _____ _   _","| ___ \\ ___ \\/ _ \\|  _  \\ | |  | |/ _ \\_   _/  ___||  _  | \\ | |","| |_/ / |_/ / /_\\ \\ | | | | |  | / /_\\ \\| | \\ `--. | | | |  \\| |","| ___ \\    /|  _  | | | | | |/\\| |  _  || |  `--. \\| | | | . ` |","| |_/ / |\\ \\| | | | |/ /  \\  /\\  / | | || | /\\__/ /\\ \\_/ / |\\  |","\\____/\\_| \\_\\_| |_/___/    \\/  \\/\\_| |_/\\_/ \\____/  \\___/\\_| \\_/"],role:"Software Engineer",location:"Leeds, UK",email:"br@dley.dev",links:{github:"https://github.com/br-watson",linkedin:"https://www.linkedin.com/in/bradleyrwatson"},filePaths:{cv:"./assets/cv.pdf",dissertation:"./assets/diss.pdf"},bio:["Software engineer specializing in backend systems, cloud platforms, CI/CD automation, and end-to-end data pipelines, building reliable, scalable production systems.","Current interests: distributed systems design, event-driven data pipelines, observability, CI/CD, and developer tooling for cloud-native backends.","This site is a small terminal-style portfolio because standard portfolio sites are kinda boring."],projects:[{name:"Terminal Portfolio",desc:"This project! An interactive terminal-style portfolio built with TypeScript, HTML, and CSS.",repoLink:"https://github.com/br-watson/br-watson.github.io",deployedLink:"https://bwatson.uk",tags:["TypeScript","HTML","CSS"]},{name:"Darts Score Tracker",desc:"All the darts trackers my friends and I could find were either too basic or couldn't handle more than 4 players, so I built this simple one to track our games and stats.",repoLink:"https://github.com/br-watson/darts-games",deployedLink:"https://bwatson.uk/darts-games",tags:["TypeScript","React","Next.js","Tailwind CSS"]},{name:"Planning Poker App",desc:"Built a free, no-login planning poker app for my team's sprint refinements after existing tools were paid or lacked custom decks. It supports multiple rooms, custom card sets, and real-time updates.",deployedLink:"https://poker.bwatson.uk/",tags:["TypeScript","React","Tailwind CSS","Firebase"]}],skills:["TypeScript","AWS","TODO..."],education:[{qualification:"Master of Mathematics (MMath)",institution:"Durham University",location:"Durham, UK",startDate:"2018",endDate:"2022",grade:"First Class Honours (1st)",description:"Specialised in mathematical analysis, geometry, and algebra. Dissertation on isometries of Riemannian manifolds.",tags:["Mathematical analysis","Geometry","Algebra","Calculus","Linear algebra","Partial differential equations"],dissertation:{title:"Isometries of Riemannian Manifolds",link:"./assets/diss.pdf"}},{qualification:"A-Levels",institution:"Notre Dame Sixth Form College",location:"Leeds, UK",startDate:"2016",endDate:"2018",grade:"A*AAA",tags:["Mathematics","Further Mathematics","Computer Science","Chemistry"]}],roles:[{title:"Software Engineer",company:"Sky UK",location:"Leeds, UK",startDate:"Sep 2024"},{title:"Associate Software Engineer",company:"Sky UK",location:"Leeds, UK",startDate:"Sep 2023",endDate:"Sep 2024"}],todo:["Finish writing profile (experience, projects, skills etc.)","Change skills to have multiple sections and include levels and experience details","Add more commands","Improve txt files output formatting","Make actual CV","Make sure accessibility is good","Make sure performance is good","Write tests (TDD kinda went out the window for this project)","Cap retained terminal output and command history","Optimize autocomplete: cache command/completion data and avoid full mobile suggestion list rerenders on each input."]};function de(e){return function(n){let o=new Set(["https:","mailto:"]),i;try{if(i=new URL(n,window.location.href),!o.has(i.protocol)&&i.origin!==window.location.origin){e.show("Blocked unsafe URL");return}}catch{e.show("Invalid URL");return}if(i.protocol==="mailto:"){window.location.assign(i.toString());return}window.open(i.toString(),"_blank","noopener,noreferrer")}}function mt(e){requestAnimationFrame(()=>{e.selectionStart=e.selectionEnd=e.value.length})}function Q(e,t){e.value=t,mt(e)}function pe({form:e,input:t,terminal:n,onRunCommand:o}){let i=!1;function a(){i||(i=!0,t.removeAttribute("placeholder"))}function s(){t.focus({preventScroll:!0})}async function r(){let l=t.value.trim();if(t.value="",l.length===0){s();return}await o(l),s()}function d(){e.addEventListener("submit",l=>{l.preventDefault(),r()})}function m(){t.addEventListener("keydown",l=>{if(!(l.altKey||l.ctrlKey||l.metaKey)){if(l.key==="ArrowUp"){l.preventDefault();let c=n.historyUp();if(c===null)return;Q(t,c)}if(l.key==="ArrowDown"){l.preventDefault();let c=n.historyDown();if(c===null)return;Q(t,c)}if(l.key==="Tab"){if(l.shiftKey)return;l.preventDefault(),Q(t,n.autocomplete(t.value))}}})}return d(),m(),{focus:s,markFirstCommandSubmitted:a}}var fe="terminal-theme";function ct(e){return e==="light"||e==="dark"}function ge(e){return e.toLowerCase()==="light"?"light":"dark"}function he(e){return e.toLowerCase()==="light"?"dark":"light"}function ye({themeToggle:e,toast:t,storage:n=window.localStorage,doc:o=document,matchMedia:i=window.matchMedia?.bind(window)}){function a(){let u=n.getItem(fe);return ct(u)?u:null}function s(){return i?.("(prefers-color-scheme: light)")?.matches?"light":"dark"}let r=a()??s(),d=ge(r);function m(u,g={}){let{persist:b=!0,announce:E=!0,force:T=!1}=g,C=ge(u),_=C!==d;if(d=C,(_||T)&&(o.documentElement.dataset.theme=C,e)){let w=he(C);e.setAttribute("aria-pressed",String(C==="light")),e.setAttribute("aria-label",`Switch to ${w.toLowerCase()} theme`),e.textContent=w}b&&n.setItem(fe,C),E&&_&&t.show(`theme: ${C}`)}let l={get:()=>d,set:u=>m(u,{persist:!0,announce:!0}),toggle:()=>m(he(d),{persist:!0,announce:!0})};e&&e.addEventListener("click",()=>l.toggle());function c(){m(r,{persist:!1,announce:!1,force:!0})}return{controller:l,applyInitialTheme:c}}function be(e,t=1500){let n;function o(i){e&&(e.textContent=i,e.classList.add("show"),e.setAttribute("aria-hidden","false"),n&&window.clearTimeout(n),n=window.setTimeout(()=>{e.classList.remove("show"),e.setAttribute("aria-hidden","true")},t))}return{show:o}}function Ce({screen:e}){function t(){let l=document.createElement("span");l.className="line ok",l.style.position="absolute",l.style.visibility="hidden",l.style.whiteSpace="pre",l.textContent="M",e.appendChild(l);let c=l.getBoundingClientRect().width;return e.removeChild(l),c||8}function n(){let l=t();return Math.max(1,Math.floor(e.clientWidth/l))}function o(l){let c=new Set(["https:","mailto:"]);try{let u=new URL(l,window.location.href);return c.has(u.protocol)||u.origin===window.location.origin?u:null}catch{return null}}function i(l){if(l.type==="text")return document.createTextNode(l.text);if(l.type==="span"){let c=document.createElement("span");return c.className=l.className,c.textContent=l.text,c}if(l.type==="link"){let c=o(l.href);if(!c)return document.createTextNode(l.text??l.href);let u=document.createElement("a");return u.href=c.toString(),c.protocol!=="mailto:"&&(u.target="_blank",u.rel="noopener noreferrer"),u.textContent=l.text??l.href,u}return document.createTextNode("")}function a(l){let c=document.createDocumentFragment();for(let u of l)c.appendChild(i(u));return c}function s(l,c="ok",u=!0){let g=document.createElement("div");g.className="block",u&&g.classList.add("wrap-text");let b=document.createElement("div");b.className=`line ${c}`,u&&b.classList.add("wrap-text"),b.appendChild(a(l)),g.appendChild(b),e.appendChild(g)}function r(l,c="ok"){let u=document.createElement("div");u.className="block";let g=document.createElement("div");g.className=`line ${c}`;let b=document.createElement("pre");b.className="pre",b.textContent=l,g.appendChild(b),u.appendChild(g),e.appendChild(u)}function d(){for(;e.firstChild;)e.removeChild(e.firstChild)}function m(){e.scrollTop=e.scrollHeight}return{printLine:s,printPre:r,clear:d,scrollToBottom:m,getColumns:n}}function ut(e){requestAnimationFrame(()=>{e.selectionStart=e.selectionEnd=e.value.length})}function Te(e,t){e.value=t,ut(e)}function Le(e){e.scrollLeft=0,e.scrollTo({left:0,top:0,behavior:"auto"}),requestAnimationFrame(()=>{e.scrollLeft=0})}function dt(e){let t=[],n=new Set;for(let o of e){let i=o.command.trim();if(!i)continue;let a=o.kind??"simple",s=`${a}:${i}`;n.has(s)||(n.add(s),t.push({command:i,kind:a,label:o.label?.trim()||i}))}return t}function ke(e,t,n){let o=document.createElement("button");return o.type="button",o.className=t==="arg"?"mobile-command mobile-command-arg":"mobile-command",o.textContent=e.label,o.setAttribute("aria-label",t==="arg"?`Run ${n??e.command}`:e.kind==="withArgs"?`Choose ${e.command} argument`:`Run ${e.command}`),t==="arg"&&n?(o.dataset.run=n,o):(o.dataset.command=e.command,o.dataset.kind=e.kind,o)}function pt(e){return e.length<2?e:e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1).replace(/\\"/g,'"'):e}function ft(e,t){let n=`${e} `;if(!t.startsWith(n))return t;let o=t.slice(n.length).trim();return pt(o)||t}function gt(e,t){let n=`${e} `,o=t.listCompletions(n),i=[],a=new Set;for(let s of o){let r=s.trim();!r||!r.startsWith(n)||a.has(r)||(a.add(r),i.push(r))}return i}function ht(e,t){let n=document.createElement("button");return n.type="button",n.className="mobile-custom-suggestion",n.dataset.kind=t,n.dataset.value=e,n.textContent=e,n.title=e,n.setAttribute("aria-label",`Insert ${e}`),n}function yt(e,t){let n=e.trim().length===0,o=n?"history":"completion",i=n?t.listRecentHistory(6):t.listCompletions(e);return{type:o,values:i.slice(0,6)}}function bt(e,t,n){if(n==="completion"){let o=/\s$/.test(t)?t:`${t} `;Te(e,o);return}Te(e,t)}function Ee({enabled:e,container:t,list:n,back:o,customTrigger:i,dialog:a,form:s,input:r,suggestions:d,suggestionsHint:m,cancel:l,terminal:c,commands:u,onRunCommand:g}){if(!e){t instanceof HTMLElement&&(t.hidden=!0),a instanceof HTMLElement&&(a.hidden=!0);return}if(!(t instanceof HTMLElement)||!(n instanceof HTMLElement)||!(o instanceof HTMLButtonElement)||!(i instanceof HTMLButtonElement)||!(a instanceof HTMLElement)||!(s instanceof HTMLFormElement)||!(r instanceof HTMLInputElement)||!(d instanceof HTMLElement)||!(m instanceof HTMLElement)||!(l instanceof HTMLButtonElement))return;let b=dt(u),E=!1,T=!1,C=f=>{a.hidden=!f,a.setAttribute("aria-hidden",f?"false":"true"),i.setAttribute("aria-expanded",f?"true":"false")},_=async f=>{let h=f.trim();if(!(h.length===0||E)){E=!0;try{await g(h)}finally{E=!1}}},w=()=>{T=!1,n.replaceChildren(...b.map(f=>ke(f,"root"))),n.setAttribute("aria-label","Quick commands"),Le(n),o.hidden=!0,i.hidden=!1},R=f=>{let h=gt(f,c);if(h.length===0){(async()=>(await _(f),w()))();return}T=!0,n.setAttribute("aria-label",`Choose ${f} argument`);let S=h.map(H=>ke({command:f,kind:"simple",label:ft(f,H)},"arg",H));n.replaceChildren(...S),Le(n),o.hidden=!1,i.hidden=!0},I=()=>{let{type:f,values:h}=yt(r.value,c);d.replaceChildren(...h.map(S=>ht(S,f))),d.hidden=h.length===0,m.hidden=h.length>0},x=()=>{C(!1),r.value="",I(),r.blur(),i.hidden||i.focus({preventScroll:!0})},z=()=>{C(!0),I(),requestAnimationFrame(()=>{r.focus({preventScroll:!0})})};w(),t.hidden=!1,C(!1),I(),n.addEventListener("click",f=>{let h=f.target;if(!(h instanceof Element))return;let S=h.closest("button[data-run]");if(S instanceof HTMLButtonElement){let L=S.dataset.run?.trim();if(!L)return;(async()=>(await _(L),w()))();return}let H=h.closest("button[data-command]");if(!(H instanceof HTMLButtonElement))return;let p=H.dataset.command?.trim();if(!p)return;if(H.dataset.kind==="withArgs"){R(p);return}(async()=>(await _(p),w()))()}),o.addEventListener("click",()=>{w()}),i.addEventListener("click",z),l.addEventListener("click",x),r.addEventListener("input",()=>{I()}),d.addEventListener("pointerdown",f=>{let h=f.target;h instanceof Element&&h.closest("button[data-value]")&&f.preventDefault()}),d.addEventListener("click",f=>{let h=f.target;if(!(h instanceof Element))return;let S=h.closest("button[data-value]");if(!(S instanceof HTMLButtonElement))return;let H=S.dataset.value;if(!H)return;let p=S.dataset.kind;bt(r,H,p),I(),requestAnimationFrame(()=>{r.focus({preventScroll:!0})})}),a.addEventListener("click",f=>{let h=f.target;h instanceof Element&&h.closest("[data-dialog-close]")&&x()}),document.addEventListener("keydown",f=>{if(f.key==="Escape"){if(!a.hidden){f.preventDefault(),x();return}T&&(f.preventDefault(),w())}}),s.addEventListener("submit",f=>{f.preventDefault();let h=r.value.trim();h&&(async()=>(await _(h),x(),w()))()})}function ve({container:e,list:t,profile:n,onRunCommand:o,aliases:i}){if(!(e instanceof HTMLElement)||!(t instanceof HTMLElement))return;let a=B(n),s=i.filter(r=>a.has(r)).map(r=>`open ${r}`);if(t.replaceChildren(),s.length===0){e.hidden=!0;return}for(let r of s){let d=document.createElement("button");d.type="button",d.className="quick-link",d.dataset.command=r,d.setAttribute("aria-label",`Run ${r}`),d.title=r;let m=document.createElement("span");m.className="quick-link-sigil",m.textContent="$";let l=document.createElement("span");l.textContent=r,d.append(m,l),t.appendChild(d)}t.addEventListener("click",async r=>{let d=r.target;if(!(d instanceof Element))return;let m=d.closest("button[data-command]");if(!(m instanceof HTMLButtonElement))return;let l=m.dataset.command?.trim();l&&(r.detail>0&&m.blur(),await o(l))}),e.hidden=!1}function X(e,t,n){if(!e||!t(e))throw new Error(n);return e}var Ct=X(document.getElementById("screen"),e=>e instanceof HTMLElement,"Screen element not found."),Tt=X(document.getElementById("prompt"),e=>e instanceof HTMLFormElement,"Prompt form element not found."),Lt=X(document.getElementById("input"),e=>e instanceof HTMLInputElement,"Prompt input element not found."),kt=document.getElementById("themeToggle"),Et=document.getElementById("toast"),we=document.querySelector(".title"),xe=document.querySelector(".ps1"),vt=document.getElementById("quickLinks"),wt=document.getElementById("quickLinksList"),xt=document.getElementById("mobileCommandTray"),Mt=document.getElementById("mobileCommandList"),Me=document.getElementById("mobileTrayBack"),Se=document.getElementById("mobileCustomTrigger"),St=document.getElementById("mobileCommandDialog"),_e=document.getElementById("mobileCustomForm"),Ie=document.getElementById("mobileCustomInput"),_t=document.getElementById("mobileCustomSuggestions"),It=document.getElementById("mobileCustomSuggestionsHint"),He=document.getElementById("mobileCustomCancel"),j=window.matchMedia("(pointer: coarse)").matches,Pe="brad@portfolio",Ae=["help","contact","bio","projects","roles","education","cv"];function Ht(e){let t=Array.from(e.values()).filter(a=>a.showInMobileTray),n=new Set(Ae),o=[];for(let a of Ae){let s=e.get(a);s&&o.push(s)}return[...o,...t.filter(a=>!n.has(a.name))].map(a=>({command:a.name,kind:typeof a.complete=="function"?"withArgs":"simple"}))}we&&(we.textContent=`${Pe}: ~`);xe&&(xe.textContent=Pe);var Re=be(Et),{controller:At,applyInitialTheme:Pt}=ye({themeToggle:kt,toast:Re}),Rt=de(Re),$e=Ce({screen:Ct}),{commands:Be}=re({profile:O,isMobile:j}),F=ue({renderer:$e,profile:O,fs:se(O),commands:Be,theme:At,openUrl:Rt,isMobile:j}),$t=Ht(Be),K=null,Y=!1;async function J(e){let t=e.trim();if(!(t.length===0||Y)){Y=!0;try{K?.markFirstCommandSubmitted(),F.addHistory(t),await F.run(t),$e.scrollToBottom()}finally{Y=!1}j||K?.focus()}}K=pe({form:Tt,input:Lt,terminal:F,onRunCommand:J});ve({container:vt,list:wt,profile:O,aliases:["cv","github","linkedin","email"],onRunCommand:J});Ee({enabled:j,container:xt,list:Mt,back:Me instanceof HTMLButtonElement?Me:null,customTrigger:Se instanceof HTMLButtonElement?Se:null,dialog:St,form:_e instanceof HTMLFormElement?_e:null,input:Ie instanceof HTMLInputElement?Ie:null,suggestions:_t,suggestionsHint:It,cancel:He instanceof HTMLButtonElement?He:null,terminal:F,commands:$t,onRunCommand:J});Pt();F.boot();j||K?.focus();var q=0;window.addEventListener("resize",()=>{q&&cancelAnimationFrame(q),q=requestAnimationFrame(()=>{F.refreshIntroIfPristine(),q=0})});if(j){let e=0;document.addEventListener("touchend",t=>{if(!t.cancelable||t.touches.length>0)return;let n=performance.now();n-e<=300&&t.preventDefault(),e=n},{passive:!1})}
