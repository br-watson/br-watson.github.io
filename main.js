function jt(t,e,n){for(let o of n)t(o.name,o.summary,o.usage,i=>e.get(o.targetCommand)?.execute(i,o.args))}function Z({profile:t,commands:e,registerCommand:n}){n("whoami","About me","whoami",o=>{o.printLine(`${String(t.name)} \u2014 ${String(t.role)} (${String(t.location)})`)}),jt(n,e,[{name:"bio",summary:"Alias: cat bio.txt",usage:"bio",targetCommand:"cat",args:["bio.txt"]},{name:"projects",summary:"Alias: cat projects.txt",usage:"projects",targetCommand:"cat",args:["projects.txt"]},{name:"socials",summary:"Alias: cat socials.txt",usage:"socials",targetCommand:"cat",args:["socials.txt"]},{name:"cv",summary:"Alias: open cv",usage:"cv",targetCommand:"open",args:["cv"]},{name:"skills",summary:"List my skills",usage:"skills",targetCommand:"cat",args:["skills.txt"]},{name:"education",summary:"List my education",usage:"education",targetCommand:"cat",args:["education.txt"]},{name:"roles",summary:"List my roles and experience",usage:"roles",targetCommand:"cat",args:["roles.txt"]}])}function Ot(t,e){let n=e.toLowerCase();return Array.from(new Set(t)).filter(o=>o.toLowerCase().startsWith(n)).sort()}function W(t,e){return t.argIndex!==0?[]:Ot(e,t.prefix??"")}var Nt=new Set(["file","bio","link","links","projects","education"]);function Ut(t,e){let{t:n,s:o}=t.seg,i=e.lines.flatMap((l,a)=>[n(l),...a<e.lines.length-1?[n(`

`)]:[]]);t.printLine([o("accent",`About
`),...i],"muted")}function Wt(t,e){t.printPre(String(e.content),"ok")}function qt(t,e,n){let{t:o,l:i,s:l}=t.seg;t.printLine([o(`${e} -> `),i(n.href),o(" (click me! or run "),l("accent",`open ${e}`),o(")")],"muted")}function Kt(t,e){let{t:n,l:o,s:i}=t.seg,l=(s,c)=>" ".repeat(Math.max(0,c-s.length)),a=Object.entries(e.items).flatMap(([s,c])=>[n(`${s}: `.padEnd(10," ")),o(c,s),n(l(s,8)),n(" (or run "),i("accent",`open ${s}`),n(`)
`)]);t.printLine(a,"muted")}function zt(t,e){let{t:n,l:o,s:i}=t.seg,l=e.projects.flatMap(a=>[i("accent",`${a.name}
`),n(`${a.desc}
`),...a.repoLink?[o(a.repoLink),n(`
`)]:[n("")],...a.deployedLink?[o(a.deployedLink),n(`
`)]:[n("")],a.tags&&a.tags.length>0?n(`Tech stack: ${a.tags.join(", ")}
`):n(""),n(`
`)]);t.printLine(l,"muted")}function Vt(t,e){let{t:n,l:o,s:i}=t.seg,l=e.education.flatMap(a=>[i("accent",`${a.qualification} - ${a.institution}
`),n(`${a.location} | ${a.startDate} - ${a.endDate} | ${a.grade}
`),a.description?n(`${a.description}
`):n(""),...a.dissertation?[n("Dissertation: "),o(a.dissertation.link,a.dissertation.title),n(`
`)]:[n("")],a.tags&&a.tags.length>0?n(`Tags: ${a.tags.join(", ")}
`):n(""),n(`
`)]);t.printLine(l,"muted")}function Gt(t,e,n){switch(n.type){case"bio":Ut(t,n);break;case"file":Wt(t,n);break;case"link":qt(t,e,n);break;case"links":Kt(t,n);break;case"projects":zt(t,n);break;case"education":Vt(t,n);break;default:t.printLine(`cat: ${e}: Not a file`,"error");break}}function tt(t){t("cat","Print file contents","cat <file>",(e,n)=>{let o=n[0];if(!o){e.printLine("cat: missing file operand","error");return}let i=e.resolveHomeItem(o);if(!i){e.printLine(`cat: ${o}: No such file`,"error");return}Gt(e,o,i)},(e,n)=>{let o=e.listHome().filter(i=>{let l=e.resolveHomeItem(i);return l?Nt.has(l.type):!1});return W(n,o)})}function B(t){let e=new Map;return t.links.github&&e.set("github",t.links.github),t.links.linkedin&&e.set("linkedin",t.links.linkedin),t.filePaths.cv&&e.set("cv",t.filePaths.cv),t.filePaths.dissertation&&e.set("dissertation",t.filePaths.dissertation),t.email&&e.set("email",`mailto:${t.email}`),e}function et({registerCommand:t,isMobile:e}){t("ls","List files (only ~ supported)","ls [path]",(n,o)=>{if((o[0]??"~")!=="~"){n.printLine('ls: only "~" is supported in this tiny filesystem',"error");return}n.printPre(n.listHome().join(`
`),"ok")}),tt(t),t("open","Open link","open <alias>",(n,o)=>{let{t:i,l}=n.seg,a=o[0],s=(a??"").toLowerCase();if(!s){n.printLine(e?"open: missing target (see the suggestions for valid options)":"open: missing target (press Tab to see valid options)","error");return}let c=B(n.profile);if(c.has(s)){let u=c.get(s);u&&(n.printLine([i("Opening: "),l(u)],"muted"),n.openUrl(u));return}n.printLine(`open: unknown target "${a}"`,"error")},(n,o)=>{let i=B(n.profile);return W(o,i.keys())})}function nt({commands:t,registerCommand:e,isMobile:n}){e("help","Show this help","help",o=>{let{s:i}=o.seg;o.printLine([i("accent","Available commands")],"ok");let l=Array.from(t.values()).sort((s,c)=>s.name.localeCompare(c.name)).map(s=>`${s.name.padEnd(12," ")} ${s.summary.padEnd(32," ")} ${s.usage}`),a=[`${"COMMAND".padEnd(12," ")} ${"SUMMARY".padEnd(32," ")} USAGE`,"",...l,"",n?"Tips: use command buttons below, or tap Custom command for autocomplete and history.":"Tips: use \u2191/\u2193 for history and Tab for autocomplete (Shift+Tab to move focus)."];o.printPre(a.join(`
`),"ok")}),e("clear","Clear the screen","clear",o=>o.clear()),e("date","Print local date/time","date",o=>{o.printLine(new Date().toString(),"muted")}),e("echo","Print args","echo <text>",(o,i)=>{o.printLine(i.join(" "))}),e("theme","Switch theme","theme [dark|light|toggle]",(o,i)=>{let l=(i[0]??"").toLowerCase(),a=o.theme.get();if(!l){o.printLine(`theme: current is "${a}"`,"muted"),o.printLine("Try: theme dark | theme light | theme toggle","muted");return}if(l==="toggle"){o.theme.toggle(),o.printLine(`theme: set to "${o.theme.get()}"`,"muted");return}if(l!=="dark"&&l!=="light"){o.printLine('theme: expected "dark" or "light"',"error");return}o.theme.set(l),o.printLine(`theme: set to "${l}"`,"muted")},(o,i)=>{if(i.argIndex!==0)return[];let l=i.prefix.toLowerCase();return["dark","light","toggle"].filter(a=>a.startsWith(l))})}function ot({profile:t,isMobile:e=!1}){let n=new Map,o=(i,l,a,s,c)=>{n.set(i,{name:i,summary:l,usage:a,execute:s,complete:c})};return nt({commands:n,registerCommand:o,isMobile:e}),et({registerCommand:o,isMobile:e}),Z({profile:t,commands:n,registerCommand:o}),{commands:n}}function it(t){return{"~":{type:"dir",children:{"README.txt":{type:"file",content:["Welcome.","","Try: help, ls, cat README.txt, bio, projects, socials, open cv, open github"].join(`
`)},"bio.txt":{type:"bio",lines:t.bio},"projects.txt":{type:"projects",projects:t.projects},"socials.txt":{type:"links",items:t.links},"skills.txt":{type:"file",content:t.skills.join(", ")},"education.txt":{type:"education",education:t.education},"roles.txt":{type:"file",content:t.roles.map(e=>{let n=e.title??"Untitled Role",o=e.company?` at ${e.company}`:"",i=e.location?` in ${e.location}`:"",l=` (${e.startDate} - ${e.endDate??"Present"})`,a=e.description?`
  ${e.description}`:"";return`- ${n}${o}${i}${l}${a}`}).join(`

`)},"cv.pdf":{type:"link",href:t.filePaths.cv},"dissertation.pdf":{type:"link",href:t.filePaths.dissertation},"todo.md":{type:"file",content:t.todo.map(e=>`- [ ] ${e}`).join(`
`)}}}}}function rt(t){let e=t["~"];if(!e||e.type!=="dir")throw new Error("Invalid filesystem: missing home dir");return e}function st(t){return Object.keys(rt(t).children).sort()}function at(t,e){return rt(t).children[e]}function O(t){let e=[],n="",o=null,i=!1;for(let l=0;l<t.length;l++){let a=t[l];if(i){n+=a,i=!1;continue}if(a==="\\"){i=!0;continue}if(o){if(a===o){o=null;continue}n+=a;continue}if(a==='"'||a==="'"){o=a;continue}if(/\s/.test(a)){n&&(e.push(n),n="");continue}n+=a}return i&&(n+="\\"),n&&e.push(n),{tokens:e,endsWithWhitespace:/\s$/.test(t)}}function lt({commands:t,getContext:e,onListMatches:n}){let o=null;function i(c,u=O(c)){let{tokens:r,endsWithWhitespace:m}=u;if(r.length===0)return null;let p=Array.from(t.keys()).sort();if(r.length===1&&!m){let R=r[0],P=p.filter(_=>_.startsWith(R));return{kind:"cmd",prefix:R,matches:P,buildValue:_=>_}}let h=r[0],C=t.get(h);if(!C?.complete)return null;let v=r.slice(1),k=m?"":v[v.length-1]??"",b=m?v.length:Math.max(0,v.length-1),S={line:c,tokens:r,args:v,endsWithWhitespace:m,argIndex:b,prefix:k},x=C.complete(e(),S)||[];return{kind:`arg:${h}`,prefix:k,matches:x,buildValue:R=>[...m?r:r.slice(0,-1),Qt(R)].join(" ")}}function l(c){let u=i(c);if(!u)return[];let r=new Set,m=[];for(let p of u.matches){let h=u.buildValue(p);r.has(h)||(r.add(h),m.push(h))}return m}function a(c){if(o?.phase==="menu"){let m=o.values.indexOf(c);if(m!==-1){let p=(m+1)%o.values.length;return o.index=p,o.lastValue=o.values[p],o.lastValue}o=null}let u=O(c);if(u.tokens.length===0)return"";let r=i(c,u);return r?s(r.kind,c,r.prefix,r.matches,r.buildValue)??c:c}function s(c,u,r,m,p){if(m.length===0)return o=null,null;if(m.length===1)return o=null,p(m[0]);let h=Yt(m),C=Xt(m);if(C.length>r.length){let k=p(C);return o={phase:"armed",kind:c,baseInput:k,prefix:C,matchesKey:h,values:m.map(p),index:-1,lastValue:null},k}if(!(o&&o.kind===c&&o.baseInput===u&&o.prefix===r&&o.matchesKey===h))return o={phase:"armed",kind:c,baseInput:u,prefix:r,matchesKey:h,values:m.map(p),index:-1,lastValue:null},null;if(o?.phase==="armed")return n(m),o.phase="listed",null;if(o?.phase==="listed"){let k=o.values[0];return o.phase="menu",o.index=0,o.lastValue=k,k}return null}return{autocomplete:a,listCompletions:l}}function Qt(t){return/\s/.test(t)?`"${t.replace(/"/g,'\\"')}"`:t}function Xt(t){if(t.length===0)return"";let e=t[0];for(let n=1;n<t.length;n++){let o=t[n],i=0;for(;i<e.length&&i<o.length&&e[i]===o[i];)i++;if(e=e.slice(0,i),e==="")break}return e}function Yt(t){return t.join("\0")}var w=t=>({type:"text",text:t}),L=(t,e)=>({type:"span",className:t,text:e}),Jt=(t,e)=>({type:"link",href:t,text:e});function mt({renderer:t,profile:e,fs:n,commands:o,openUrl:i,theme:l,isMobile:a}){let s={history:[],historyIndex:-1,hasRunCommand:!1,hasBooted:!1};function c(){s.hasBooted=!0,u()}function u(){t.clear(),C(),b([w("Type "),L("accent","help"),w(` to see commands.
`),L("accent","Tips: "),w(a?"use the command buttons below, or tap Custom command for autocomplete and history.":"use \u2191/\u2193 for history and Tab for autocomplete (Shift+Tab to move focus).")],"muted"),t.scrollToBottom()}function r(){!s.hasBooted||s.hasRunCommand||u()}function m(d){return d.reduce((f,T)=>Math.max(f,T.length),0)}function p(d,f){return d.length<=f?d:f<=1?"\u2026":`${d.slice(0,f-1)}\u2026`}function h(d,f){let T=p(d,f),E=Math.max(0,f-T.length),H=Math.floor(E/2),A=E-H;return{leftPad:" ".repeat(H),text:T,rightPad:" ".repeat(A)}}function C(){let d=e.nameAsciiArt??[],f=m(d),T=t.getColumns();if(d.length>0&&f<=T){S(d.join(`
`),"accent"),b(e.role,"muted");return}v()}function v(){let d=String(e.name).trim()||"Portfolio",f=String(e.role).trim()||"Software Engineer",T=t.getColumns(),E=k(T-6,10,54),H=Math.min(20,E),A=Math.max(d.length,f.length,H-4),$=k(A+4,H,E),z=`\u256D${"\u2500".repeat($+2)}\u256E`,Rt=`\u251C${"\u2500".repeat($+2)}\u2524`,$t=`\u2570${"\u2500".repeat($+2)}\u256F`,J=(Bt,Ft=!0)=>{let V=h(Bt,$);return[L("banner-border","\u2502 "),L("banner-border",V.leftPad),L("banner-text",V.text),L("banner-border",V.rightPad),L("banner-border",Ft?` \u2502
`:" \u2502")]},Dt=[L("banner-border",`${z}
`),...J(d),L("banner-border",`${Rt}
`),...J(f),L("banner-border",$t)];b(Dt,"banner",!1)}function k(d,f,T){return Math.max(f,Math.min(T,d))}function b(d,f="ok",T=!0){let E=Array.isArray(d)?d:[w(String(d))];t.printLine(E,f,T)}function S(d,f="ok"){t.printPre(String(d),f)}function x(d){b([L("cmd","$"),w(" "),L("cmd",d)],"cmd")}function R(){return st(n)}function P(d){return at(n,d)}function _(){return{profile:e,fs:n,theme:l,openUrl:i,printLine:b,printPre:S,seg:{t:w,s:L,l:Jt},listHome:R,resolveHomeItem:P,clear:t.clear}}let U=lt({commands:o,getContext:_,onListMatches:d=>{let f=[];d.forEach((T,E)=>{E&&f.push(w("   ")),f.push(L("accent",T))}),b(f,"muted"),t.scrollToBottom()}});async function g(d){let f=d.trim();if(!f)return;s.hasRunCommand=!0,x(f);let T=O(f),[E,...H]=T.tokens,A=o.get(E);if(!A){b([w("Command not found: "),L("error",E)],"error"),b([w("Try: "),L("accent","help")],"muted");return}try{await A.execute(_(),H)}catch($){let z=$ instanceof Error?$.message:String($);b([L("error","Error:"),w(" "),w(z)],"error")}}function y(d){s.history.push(d),s.historyIndex=s.history.length}function M(){return s.history.length===0?null:(s.historyIndex=Math.max(0,s.historyIndex-1),s.history[s.historyIndex]??"")}function I(){return s.history.length===0?null:(s.historyIndex=Math.min(s.history.length,s.historyIndex+1),s.history[s.historyIndex]??"")}function D(d=6){let f=Math.max(0,Math.floor(d));if(f===0)return[];let T=[],E=new Set;for(let H=s.history.length-1;H>=0;H--){let A=s.history[H]??"";if(!(A.length===0||E.has(A))&&(E.add(A),T.push(A),T.length>=f))break}return T}return{boot:c,run:g,addHistory:y,historyUp:M,historyDown:I,listRecentHistory:D,listCompletions:d=>U.listCompletions(d),autocomplete:d=>U.autocomplete(d),refreshIntroIfPristine:r}}var N={name:"Bradley Watson",nameAsciiArt:["____________  ___ ______   _    _  ___ _____ _____  _____ _   _","| ___ \\ ___ \\/ _ \\|  _  \\ | |  | |/ _ \\_   _/  ___||  _  | \\ | |","| |_/ / |_/ / /_\\ \\ | | | | |  | / /_\\ \\| | \\ `--. | | | |  \\| |","| ___ \\    /|  _  | | | | | |/\\| |  _  || |  `--. \\| | | | . ` |","| |_/ / |\\ \\| | | | |/ /  \\  /\\  / | | || | /\\__/ /\\ \\_/ / |\\  |","\\____/\\_| \\_\\_| |_/___/    \\/  \\/\\_| |_/\\_/ \\____/  \\___/\\_| \\_/"],role:"Software Engineer",location:"Leeds, UK",email:"you@example.com",links:{github:"https://github.com/br-watson",linkedin:"https://www.linkedin.com/in/bradleyrwatson"},filePaths:{cv:"./assets/cv.pdf",dissertation:"./assets/diss.pdf"},bio:["Software engineer specializing in backend systems, cloud platforms, CI/CD automation, and end-to-end data pipelines, building reliable, scalable production systems.","Current interests: distributed systems design, event-driven data pipelines, observability, CI/CD, and developer tooling for cloud-native backends.","This site is a small terminal-style portfolio because standard portfolio sites are kinda boring."],projects:[{name:"Terminal Portfolio",desc:"This project! An interactive terminal-style portfolio built with TypeScript, HTML, and CSS.",repoLink:"https://github.com/br-watson/br-watson.github.io",deployedLink:"https://bwatson.uk",tags:["TypeScript","HTML","CSS"]},{name:"Darts Score Tracker",desc:"All the darts trackers my friends and I could find were either too basic or couldn't handle more than 4 players, so I built this simple one to track our games and stats.",repoLink:"https://github.com/br-watson/darts-games",deployedLink:"https://bwatson.uk/darts-games",tags:["TypeScript","React","Next.js","Tailwind CSS"]},{name:"Planning Poker App",desc:"Built a free, no-login planning poker app for my team's sprint refinements after existing tools were paid or lacked custom decks. It supports multiple rooms, custom card sets, and real-time updates.",deployedLink:"https://poker.bwatson.uk/",tags:["TypeScript","React","Tailwind CSS","Firebase"]},{name:"TODO...",desc:"Lorem ipsum dolor sit amet, consectetur adipiscing elit.",repoLink:"https://github.com/",tags:["TODO..."]}],skills:["TypeScript","AWS","TODO..."],education:[{qualification:"Master of Mathematics (MMath)",institution:"Durham University",location:"Durham, UK",startDate:"2018",endDate:"2022",grade:"First Class Honours (1st)",description:"Specialised in mathematical analysis, geometry, and algebra. Dissertation on isometries of Riemannian manifolds.",tags:["Mathematical analysis","Geometry","Algebra","Calculus","Linear algebra","Partial differential equations"],dissertation:{title:"Isometries of Riemannian Manifolds",link:"./assets/diss.pdf"}},{qualification:"A-Levels",institution:"Notre Dame Sixth Form College",location:"Leeds, UK",startDate:"2016",endDate:"2018",grade:"A*AAA",tags:["Mathematics","Further Mathematics","Computer Science","Chemistry"]}],roles:[{title:"Software Engineer",company:"Sky UK",location:"Leeds, UK",startDate:"Sep 2024",description:"TODO..."},{title:"Associate Software Engineer",company:"Sky UK",location:"Leeds, UK",startDate:"Sep 2023",endDate:"Sep 2024",description:"TODO..."}],todo:["Finish writing profile (bio, experience, projects, skills etc.)","Add more commands","Improve txt files output formatting","Make actual CV","Write README","Make sure accessibility is good","Make sure performance is good","Add my actual email","Write tests"]};function ct(t){return function(n){let o=new Set(["https:","mailto:"]);try{let i=new URL(n,window.location.href);if(!o.has(i.protocol)&&i.origin!==window.location.origin){t.show("Blocked unsafe URL");return}}catch{t.show("Invalid URL");return}window.open(String(n),"_blank","noopener,noreferrer")}}function Zt(t){requestAnimationFrame(()=>{t.selectionStart=t.selectionEnd=t.value.length})}function G(t,e){t.value=e,Zt(t)}function dt({form:t,input:e,terminal:n,onRunCommand:o}){let i=!1;function l(){i||(i=!0,e.removeAttribute("placeholder"))}function a(){e.focus({preventScroll:!0})}async function s(){let r=e.value.trim();if(e.value="",r.length===0){a();return}await o(r),a()}function c(){t.addEventListener("submit",r=>{r.preventDefault(),s()})}function u(){e.addEventListener("keydown",r=>{if(!(r.altKey||r.ctrlKey||r.metaKey)){if(r.key==="ArrowUp"){r.preventDefault();let m=n.historyUp();if(m===null)return;G(e,m)}if(r.key==="ArrowDown"){r.preventDefault();let m=n.historyDown();if(m===null)return;G(e,m)}if(r.key==="Tab"){if(r.shiftKey)return;r.preventDefault(),G(e,n.autocomplete(e.value))}}})}return c(),u(),{focus:a,markFirstCommandSubmitted:l}}var ut="terminal-theme";function te(t){return t==="light"||t==="dark"}function pt(t){return t.toLowerCase()==="light"?"light":"dark"}function ft(t){return t.toLowerCase()==="light"?"dark":"light"}function gt({themeToggle:t,toast:e,storage:n=window.localStorage,doc:o=document,matchMedia:i=window.matchMedia?.bind(window)}){function l(){let p=n.getItem(ut);return te(p)?p:null}function a(){return i?.("(prefers-color-scheme: light)")?.matches?"light":"dark"}let s=l()??a(),c=pt(s);function u(p,h={}){let{persist:C=!0,announce:v=!0,force:k=!1}=h,b=pt(p),S=b!==c;if(c=b,(S||k)&&(o.documentElement.dataset.theme=b,t)){let x=ft(b);t.setAttribute("aria-pressed",String(b==="light")),t.setAttribute("aria-label",`Switch to ${x.toLowerCase()} theme`),t.textContent=x}C&&n.setItem(ut,b),v&&S&&e.show(`theme: ${b}`)}let r={get:()=>c,set:p=>u(p,{persist:!0,announce:!0}),toggle:()=>u(ft(c),{persist:!0,announce:!0})};t&&t.addEventListener("click",()=>r.toggle());function m(){u(s,{persist:!1,announce:!1,force:!0})}return{controller:r,applyInitialTheme:m}}function ht(t,e=1500){let n;function o(i){t&&(t.textContent=i,t.classList.add("show"),t.setAttribute("aria-hidden","false"),n&&window.clearTimeout(n),n=window.setTimeout(()=>{t.classList.remove("show"),t.setAttribute("aria-hidden","true")},e))}return{show:o}}function yt({screen:t}){function e(){let r=document.createElement("span");r.className="line ok",r.style.position="absolute",r.style.visibility="hidden",r.style.whiteSpace="pre",r.textContent="M",t.appendChild(r);let m=r.getBoundingClientRect().width;return t.removeChild(r),m||8}function n(){let r=e();return Math.max(1,Math.floor(t.clientWidth/r))}function o(r){let m=new Set(["https:","mailto:"]);try{let p=new URL(r,window.location.href);return m.has(p.protocol)?!0:p.origin===window.location.origin}catch{return!1}}function i(r){if(r.type==="text")return document.createTextNode(r.text);if(r.type==="span"){let m=document.createElement("span");return m.className=r.className,m.textContent=r.text,m}if(r.type==="link"){if(!o(r.href))return document.createTextNode(r.text??r.href);let m=document.createElement("a");return m.href=r.href,m.target="_blank",m.rel="noopener noreferrer",m.textContent=r.text??r.href,m}return document.createTextNode("")}function l(r){let m=document.createDocumentFragment();for(let p of r)m.appendChild(i(p));return m}function a(r,m="ok",p=!0){let h=document.createElement("div");h.className="block",p&&h.classList.add("wrap-text");let C=document.createElement("div");C.className=`line ${m}`,p&&C.classList.add("wrap-text"),C.appendChild(l(r)),h.appendChild(C),t.appendChild(h)}function s(r,m="ok"){let p=document.createElement("div");p.className="block";let h=document.createElement("div");h.className=`line ${m}`;let C=document.createElement("pre");C.className="pre",C.textContent=r,h.appendChild(C),p.appendChild(h),t.appendChild(p)}function c(){for(;t.firstChild;)t.removeChild(t.firstChild)}function u(){t.scrollTop=t.scrollHeight}return{printLine:a,printPre:s,clear:c,scrollToBottom:u,getColumns:n}}function ee(t){requestAnimationFrame(()=>{t.selectionStart=t.selectionEnd=t.value.length})}function bt(t,e){t.value=e,ee(t)}function Ct(t){t.scrollLeft=0,t.scrollTo({left:0,top:0,behavior:"auto"}),requestAnimationFrame(()=>{t.scrollLeft=0})}function ne(t){let e=[],n=new Set;for(let o of t){let i=o.command.trim();if(!i)continue;let l=o.kind??"simple",a=`${l}:${i}`;n.has(a)||(n.add(a),e.push({command:i,kind:l,label:o.label?.trim()||i}))}return e}function Tt(t,e,n){let o=document.createElement("button");return o.type="button",o.className=e==="arg"?"mobile-command mobile-command-arg":"mobile-command",o.textContent=t.label,o.setAttribute("aria-label",e==="arg"?`Run ${n??t.command}`:t.kind==="withArgs"?`Choose ${t.command} argument`:`Run ${t.command}`),e==="arg"&&n?(o.dataset.run=n,o):(o.dataset.command=t.command,o.dataset.kind=t.kind,o)}function oe(t){return t.length<2?t:t.startsWith('"')&&t.endsWith('"')?t.slice(1,-1).replace(/\\"/g,'"'):t}function ie(t,e){let n=`${t} `;if(!e.startsWith(n))return e;let o=e.slice(n.length).trim();return oe(o)||e}function re(t,e){let n=`${t} `,o=e.listCompletions(n),i=[],l=new Set;for(let a of o){let s=a.trim();!s||!s.startsWith(n)||l.has(s)||(l.add(s),i.push(s))}return i}function se(t,e){let n=document.createElement("button");return n.type="button",n.className="mobile-custom-suggestion",n.dataset.kind=e,n.dataset.value=t,n.textContent=t,n.title=t,n.setAttribute("aria-label",`Insert ${t}`),n}function ae(t,e){let n=t.trim().length===0,o=n?"history":"completion",i=n?e.listRecentHistory(6):e.listCompletions(t);return{type:o,values:i.slice(0,6)}}function le(t,e,n){if(n==="completion"){let o=/\s$/.test(e)?e:`${e} `;bt(t,o);return}bt(t,e)}function kt({enabled:t,container:e,list:n,back:o,customTrigger:i,dialog:l,form:a,input:s,suggestions:c,suggestionsHint:u,cancel:r,terminal:m,commands:p,onRunCommand:h}){if(!t){e instanceof HTMLElement&&(e.hidden=!0),l instanceof HTMLElement&&(l.hidden=!0);return}if(!(e instanceof HTMLElement)||!(n instanceof HTMLElement)||!(o instanceof HTMLButtonElement)||!(i instanceof HTMLButtonElement)||!(l instanceof HTMLElement)||!(a instanceof HTMLFormElement)||!(s instanceof HTMLInputElement)||!(c instanceof HTMLElement)||!(u instanceof HTMLElement)||!(r instanceof HTMLButtonElement))return;let C=ne(p),v=!1,k=!1,b=g=>{l.hidden=!g,l.setAttribute("aria-hidden",g?"false":"true"),i.setAttribute("aria-expanded",g?"true":"false")},S=async g=>{let y=g.trim();if(!(y.length===0||v)){v=!0;try{await h(y)}finally{v=!1}}},x=()=>{k=!1,n.replaceChildren(...C.map(g=>Tt(g,"root"))),n.setAttribute("aria-label","Quick commands"),Ct(n),o.hidden=!0,i.hidden=!1},R=g=>{let y=re(g,m);if(y.length===0){(async()=>(await S(g),x()))();return}k=!0,n.setAttribute("aria-label",`Choose ${g} argument`);let M=y.map(I=>Tt({command:g,kind:"simple",label:ie(g,I)},"arg",I));n.replaceChildren(...M),Ct(n),o.hidden=!1,i.hidden=!0},P=()=>{let{type:g,values:y}=ae(s.value,m);c.replaceChildren(...y.map(M=>se(M,g))),c.hidden=y.length===0,u.hidden=y.length>0},_=()=>{b(!1),s.value="",P(),s.blur(),i.hidden||i.focus({preventScroll:!0})},U=()=>{b(!0),P(),requestAnimationFrame(()=>{s.focus({preventScroll:!0})})};x(),e.hidden=!1,b(!1),P(),n.addEventListener("click",g=>{let y=g.target;if(!(y instanceof Element))return;let M=y.closest("button[data-run]");if(M instanceof HTMLButtonElement){let f=M.dataset.run?.trim();if(!f)return;(async()=>(await S(f),x()))();return}let I=y.closest("button[data-command]");if(!(I instanceof HTMLButtonElement))return;let D=I.dataset.command?.trim();if(!D)return;if(I.dataset.kind==="withArgs"){R(D);return}(async()=>(await S(D),x()))()}),o.addEventListener("click",()=>{x()}),i.addEventListener("click",U),r.addEventListener("click",_),s.addEventListener("input",()=>{P()}),c.addEventListener("click",g=>{let y=g.target;if(!(y instanceof Element))return;let M=y.closest("button[data-value]");if(!(M instanceof HTMLButtonElement))return;let I=M.dataset.value;if(!I)return;let D=M.dataset.kind;le(s,I,D),P()}),l.addEventListener("click",g=>{let y=g.target;y instanceof Element&&y.closest("[data-dialog-close]")&&_()}),document.addEventListener("keydown",g=>{if(g.key==="Escape"){if(!l.hidden){g.preventDefault(),_();return}k&&(g.preventDefault(),x())}}),a.addEventListener("submit",g=>{g.preventDefault();let y=s.value.trim();y&&(async()=>(await S(y),_(),x()))()})}function Lt({container:t,list:e,profile:n,onRunCommand:o,aliases:i}){if(!(t instanceof HTMLElement)||!(e instanceof HTMLElement))return;let l=B(n),a=i.filter(s=>l.has(s)).map(s=>`open ${s}`);if(e.replaceChildren(),a.length===0){t.hidden=!0;return}for(let s of a){let c=document.createElement("button");c.type="button",c.className="quick-link",c.dataset.command=s,c.setAttribute("aria-label",`Run ${s}`),c.title=s;let u=document.createElement("span");u.className="quick-link-sigil",u.textContent="$";let r=document.createElement("span");r.textContent=s,c.append(u,r),e.appendChild(c)}e.addEventListener("click",async s=>{let c=s.target;if(!(c instanceof Element))return;let u=c.closest("button[data-command]");if(!(u instanceof HTMLButtonElement))return;let r=u.dataset.command?.trim();r&&(s.detail>0&&u.blur(),await o(r))}),t.hidden=!1}function X(t,e,n){if(!t||!e(t))throw new Error(n);return t}var me=X(document.getElementById("screen"),t=>t instanceof HTMLElement,"Screen element not found."),ce=X(document.getElementById("prompt"),t=>t instanceof HTMLFormElement,"Prompt form element not found."),de=X(document.getElementById("input"),t=>t instanceof HTMLInputElement,"Prompt input element not found."),ue=document.getElementById("themeToggle"),pe=document.getElementById("toast"),Et=document.querySelector(".title"),vt=document.querySelector(".ps1"),fe=document.getElementById("quickLinks"),ge=document.getElementById("quickLinksList"),he=document.getElementById("mobileCommandTray"),ye=document.getElementById("mobileCommandList"),xt=document.getElementById("mobileTrayBack"),St=document.getElementById("mobileCustomTrigger"),be=document.getElementById("mobileCommandDialog"),Mt=document.getElementById("mobileCustomForm"),wt=document.getElementById("mobileCustomInput"),Ce=document.getElementById("mobileCustomSuggestions"),Te=document.getElementById("mobileCustomSuggestionsHint"),_t=document.getElementById("mobileCustomCancel"),j=window.matchMedia("(pointer: coarse)").matches,It="brad@portfolio";function ke(t){return Array.from(t.values()).map(e=>({command:e.name,kind:typeof e.complete=="function"?"withArgs":"simple"}))}Et&&(Et.textContent=`${It}: ~`);vt&&(vt.textContent=It);var Ht=ht(pe),{controller:Le,applyInitialTheme:Ee}=gt({themeToggle:ue,toast:Ht}),ve=ct(Ht),At=yt({screen:me}),{commands:Pt}=ot({profile:N,isMobile:j}),F=mt({renderer:At,profile:N,fs:it(N),commands:Pt,theme:Le,openUrl:ve,isMobile:j}),xe=ke(Pt),K=null,Q=!1;async function Y(t){let e=t.trim();if(!(e.length===0||Q)){Q=!0;try{K?.markFirstCommandSubmitted(),F.addHistory(e),await F.run(e),At.scrollToBottom()}finally{Q=!1}j||K?.focus()}}K=dt({form:ce,input:de,terminal:F,onRunCommand:Y});Lt({container:fe,list:ge,profile:N,aliases:["cv","github","linkedin"],onRunCommand:Y});kt({enabled:j,container:he,list:ye,back:xt instanceof HTMLButtonElement?xt:null,customTrigger:St instanceof HTMLButtonElement?St:null,dialog:be,form:Mt instanceof HTMLFormElement?Mt:null,input:wt instanceof HTMLInputElement?wt:null,suggestions:Ce,suggestionsHint:Te,cancel:_t instanceof HTMLButtonElement?_t:null,terminal:F,commands:xe,onRunCommand:Y});Ee();F.boot();j||K?.focus();var q=0;window.addEventListener("resize",()=>{q&&cancelAnimationFrame(q),q=requestAnimationFrame(()=>{F.refreshIntroIfPristine(),q=0})});if(j){let t=0;document.addEventListener("touchend",e=>{if(!e.cancelable||e.touches.length>0)return;let n=performance.now();n-t<=300&&e.preventDefault(),t=n},{passive:!1})}
