function H(e){let n=new Map;return e.links.github&&n.set("github",e.links.github),e.links.linkedin&&n.set("linkedin",e.links.linkedin),e.filePaths.cv&&n.set("cv",e.filePaths.cv),e.filePaths.dissertation&&n.set("dissertation",e.filePaths.dissertation),e.email&&n.set("email",`mailto:${e.email}`),n}function K({profile:e}){let n=new Map,a=(t,l,c,o,i)=>{n.set(t,{name:t,summary:l,usage:c,execute:o,complete:i})};return a("help","Show this help","help",t=>{let{s:l}=t.seg;t.printLine([l("accent","Available commands")],"ok");let c=Array.from(n.values()).sort((i,d)=>i.name.localeCompare(d.name)).map(i=>`${i.name.padEnd(12," ")} ${i.summary.padEnd(32," ")} ${i.usage}`),o=[`${"COMMAND".padEnd(12," ")} ${"SUMMARY".padEnd(32," ")} USAGE`,"",...c,"","Tips: use \u2191/\u2193 for history, Tab for autocomplete (Shift+Tab to move focus)."];t.printPre(o.join(`
`),"ok")}),a("clear","Clear the screen","clear",t=>t.clear()),a("whoami","About me","whoami",t=>{t.printLine(`${String(e.name)} \u2014 ${String(e.role)} (${String(e.location)})`)}),a("date","Print local date/time","date",t=>{t.printLine(new Date().toString(),"muted")}),a("echo","Print args","echo <text>",(t,l)=>{t.printLine(l.join(" "))}),a("ls","List files (only ~ supported)","ls [path]",(t,l)=>{if((l[0]??"~")!=="~"){t.printLine('ls: only "~" is supported in this tiny filesystem',"error");return}t.printPre(t.listHome().join(`
`),"ok")}),a("cat","Print file contents","cat <file>",(t,l)=>{let{t:c,l:o,s:i}=t.seg,d=l[0];if(!d){t.printLine("cat: missing file operand","error");return}let g=t.resolveHomeItem(d);if(!g){t.printLine(`cat: ${d}: No such file`,"error");return}if(g.type==="file"){t.printPre(String(g.content),"ok");return}if(g.type==="link"){t.printLine([c(`${d} -> `),o(g.href),c(" (click me! or run "),i("accent",`open ${d}`),c(")")],"muted");return}if(g.type==="links"){let s=(f,x)=>" ".repeat(Math.max(0,x-f.length)),h=Object.entries(g.items).flatMap(([f,x])=>[c(`${f}: `.padEnd(10," ")),o(x,f),c(s(f,10)),c(" (or run "),i("accent",`open ${f}`),c(`)
`)]);t.printLine(h,"muted");return}t.printLine(`cat: ${d}: Not a file`,"error")},(t,l)=>{if(l.argIndex!==0)return[];let c=t.listHome().filter(i=>t.resolveHomeItem(i)?.type==="file"||t.resolveHomeItem(i)?.type==="link"||t.resolveHomeItem(i)?.type==="links"),o=(l.prefix??"").toLowerCase();return c.filter(i=>String(i).toLowerCase().startsWith(o)).sort()}),a("open","Open link","open <alias>",(t,l)=>{let{t:c,l:o}=t.seg,i=l[0],d=(i??"").toLowerCase();if(!d){t.printLine("open: missing target (press Tab to see valid options)","error");return}let g=H(t.profile);if(g.has(d)){let s=g.get(d);s&&(t.printLine([c("Opening: "),o(s)],"muted"),t.openUrl(s));return}t.printLine(`open: unknown target "${i}"`,"error")},(t,l)=>{if(l.argIndex!==0)return[];let o=[...H(t.profile).keys()],i=(l.prefix??"").toLowerCase();return Array.from(new Set(o)).filter(d=>String(d).toLowerCase().startsWith(i)).sort()}),a("bio","Alias: cat bio.txt","bio",t=>n.get("cat")?.execute(t,["bio.txt"])),a("projects","Alias: cat projects.txt","projects",t=>n.get("cat")?.execute(t,["projects.txt"])),a("socials","Alias: cat socials.txt","socials",t=>n.get("cat")?.execute(t,["socials.txt"])),a("cv","Alias: open cv","cv",t=>n.get("open")?.execute(t,["cv"])),a("skills","List my skills","skills",t=>n.get("cat")?.execute(t,["skills.txt"])),a("roles","List my roles and experience","roles",t=>n.get("cat")?.execute(t,["roles.txt"])),a("theme","Switch theme","theme [dark|light|toggle]",(t,l)=>{let c=(l[0]??"").toLowerCase(),o=t.theme.get();if(!c){t.printLine(`theme: current is "${o}"`,"muted"),t.printLine("Try: theme dark | theme light | theme toggle","muted");return}if(c==="toggle"){t.theme.toggle(),t.printLine(`theme: set to "${t.theme.get()}"`,"muted");return}if(c!=="dark"&&c!=="light"){t.printLine('theme: expected "dark" or "light"',"error");return}t.theme.set(c),t.printLine(`theme: set to "${c}"`,"muted")},(t,l)=>{if(l.argIndex!==0)return[];let c=["dark","light","toggle"],o=(l.prefix??"").toLowerCase();return Array.from(new Set(c)).filter(i=>String(i).toLowerCase().startsWith(o)).sort()}),{commands:n}}function Q(e){return{"~":{type:"dir",children:{"README.txt":{type:"file",content:["Welcome.","","Try: help, ls, cat README.txt, bio, projects, socials, open cv, open github"].join(`
`)},"bio.txt":{type:"file",content:e.bio.join(`
`)},"projects.txt":{type:"file",content:e.projects.map(n=>`- ${n.name}
  ${n.desc}
  ${n.link}
  tags: ${n.tags.join(", ")}`).join(`

`)},"socials.txt":{type:"links",items:e.links},"skills.txt":{type:"file",content:e.skills.join(", ")},"roles.txt":{type:"file",content:e.roles.map(n=>{let a=n.title??"Untitled Role",t=n.company?` at ${n.company}`:"",l=n.location?` in ${n.location}`:"",c=` (${n.startDate} - ${n.endDate??"Present"})`,o=n.description?`
  ${n.description}`:"";return`- ${a}${t}${l}${c}${o}`}).join(`

`)},"cv.pdf":{type:"link",href:e.filePaths.cv},"dissertation.pdf":{type:"link",href:e.filePaths.dissertation},"todo.md":{type:"file",content:e.todo.map(n=>`- [ ] ${n}`).join(`
`)}}}}}function V(e){let n=e["~"];if(!n||n.type!=="dir")throw new Error("Invalid filesystem: missing home dir");return n}function z(e){return Object.keys(V(e).children).sort()}function Y(e,n){return V(e).children[n]}var L=e=>({type:"text",text:e}),S=(e,n)=>({type:"span",className:e,text:n}),we=(e,n)=>({type:"link",href:e,text:n});function G({renderer:e,profile:n,fs:a,commands:t,openUrl:l,theme:c}){let o={history:[],historyIndex:-1,completion:null,hasRunCommand:!1,hasBooted:!1};function i(){o.hasBooted=!0,d()}function d(){e.clear(),h(),v([L("Type "),S("accent","help"),L(" to see commands.")],"muted"),e.scrollToBottom()}function g(){!o.hasBooted||o.hasRunCommand||d()}function s(r){return r.reduce((u,m)=>Math.max(u,Array.from(m).length),0)}function h(){let r=n.nameAsciiArt??[],u=s(r),m=e.getColumns();if(r.length>0&&u<=m){I(r.join(`
`),"accent"),v(n.role,"muted");return}f()}function f(){let r=String(n.name),u=String(n.role),m=Math.max(r.length,u.length,10),p=x(m+2,30,54),k=`\u250C${"\u2500".repeat(p+2)}\u2510`,b=`\u2514${"\u2500".repeat(p+2)}\u2518`,y=w=>`\u2502  ${w.padEnd(p," ")}\u2502`,_=[k,y(r),y(u),b].join(`
`);I(_,"ok")}function x(r,u,m){return Math.max(u,Math.min(m,r))}function v(r,u="ok"){let m=Array.isArray(r)?r:[L(String(r))];e.printLine(m,u)}function I(r,u="ok"){e.printPre(String(r),u)}function D(r){v([S("cmd","$"),L(" "),S("cmd",r)],"cmd")}function C(){return z(a)}function R(r){return Y(a,r)}function M(){return{profile:n,fs:a,theme:c,openUrl:l,printLine:v,printPre:I,seg:{t:L,s:S,l:we},listHome:C,resolveHomeItem:R,clear:e.clear}}async function pe(r){let u=r.trim();if(!u)return;o.hasRunCommand=!0,D(u);let m=W(u),[p,...k]=m.tokens,b=t.get(p);if(!b){v([L("Command not found: "),S("error",p)],"error"),v([L("Try: "),S("accent","help")],"muted");return}try{await b.execute(M(),k)}catch(y){let _=y instanceof Error?y.message:String(y);v([S("error","Error:"),L(" "),L(_)],"error")}}function W(r){let u=[],m="",p=null,k=!1;for(let b=0;b<r.length;b++){let y=r[b];if(k){m+=y,k=!1;continue}if(y==="\\"){k=!0;continue}if(p){if(y===p){p=null;continue}m+=y;continue}if(y==='"'||y==="'"){p=y;continue}if(/\s/.test(y)){m&&(u.push(m),m="");continue}m+=y}return k&&(m+="\\"),m&&u.push(m),{tokens:u,endsWithWhitespace:/\s$/.test(r),unterminatedQuote:p}}function fe(r){o.history.push(r),o.historyIndex=o.history.length}function ge(){return o.history.length===0?null:(o.historyIndex=Math.max(0,o.historyIndex-1),o.history[o.historyIndex]??"")}function he(){return o.history.length===0?null:(o.historyIndex=Math.min(o.history.length,o.historyIndex+1),o.history[o.historyIndex]??"")}function ye(r){let u=W(r);if(o.completion?.phase==="menu"){let T=o.completion,P=T.values.indexOf(r);if(P!==-1){let E=(P+1)%T.values.length;return T.index=E,T.lastValue=T.values[E],T.lastValue}o.completion=null}let{tokens:m,endsWithWhitespace:p}=u;if(m.length===0)return"";let k=Array.from(t.keys()).sort();if(m.length===1&&!p){let T=m[0],P=k.filter(E=>E.startsWith(T));return q("cmd",r,T,P,E=>E)??r}let b=m[0],y=t.get(b);if(!y?.complete)return r;let _=m.slice(1),w=p?"":_[_.length-1]??"",O=p?_.length:Math.max(0,_.length-1),N={line:r,tokens:m,args:_,endsWithWhitespace:p,argIndex:O,prefix:w},ve=y.complete(M(),N)||[];return q(`arg:${b}`,r,w,ve,T=>[...p?m:m.slice(0,-1),ke(T)].join(" "))??r}function ke(r){return/\s/.test(r)?`"${r.replace(/"/g,'\\"')}"`:r}function xe(r){if(r.length===0)return"";let u=r[0];for(let m=1;m<r.length;m++){let p=r[m],k=0;for(;k<u.length&&k<p.length&&u[k]===p[k];)k++;if(u=u.slice(0,k),u==="")break}return u}function be(r){return r.join("\0")}function q(r,u,m,p,k){if(p.length===0)return o.completion=null,null;if(p.length===1)return o.completion=null,k(p[0]);let b=be(p),y=xe(p);if(y.length>m.length){let w=k(y);return o.completion={phase:"armed",kind:r,baseInput:w,prefix:y,matchesKey:b,values:p.map(k),index:-1,lastValue:null},w}if(!(o.completion&&o.completion.kind===r&&o.completion.baseInput===u&&o.completion.prefix===m&&o.completion.matchesKey===b))return o.completion={phase:"armed",kind:r,baseInput:u,prefix:m,matchesKey:b,values:p.map(k),index:-1,lastValue:null},null;if(o.completion?.phase==="armed"){let w=[];return p.forEach((O,N)=>{N&&w.push(L("   ")),w.push(S("accent",O))}),v(w,"muted"),e.scrollToBottom(),o.completion.phase="listed",null}if(o.completion?.phase==="listed"){let w=o.completion?.values[0];return o.completion.phase="menu",o.completion.index=0,o.completion.lastValue=w,w}return null}return{boot:i,run:pe,addHistory:fe,historyUp:ge,historyDown:he,autocomplete:ye,refreshIntroIfPristine:g}}var $={name:"Bradley Watson",nameAsciiArt:["____________  ___ ______   _    _  ___ _____ _____  _____ _   _","| ___ \\ ___ \\/ _ \\|  _  \\ | |  | |/ _ \\_   _/  ___||  _  | \\ | |","| |_/ / |_/ / /_\\ \\ | | | | |  | / /_\\ \\| | \\ `--. | | | |  \\| |","| ___ \\    /|  _  | | | | | |/\\| |  _  || |  `--. \\| | | | . ` |","| |_/ / |\\ \\| | | | |/ /  \\  /\\  / | | || | /\\__/ /\\ \\_/ / |\\  |","\\____/\\_| \\_\\_| |_/___/    \\/  \\/\\_| |_/\\_/ \\____/  \\___/\\_| \\_/"],role:"Software Engineer",location:"Leeds, UK",email:"you@example.com",links:{github:"https://github.com/br-watson",linkedin:"https://www.linkedin.com/in/bradleyrwatson"},filePaths:{cv:"./assets/cv.pdf",dissertation:"./assets/diss.pdf"},bio:["I build backend systems, pipelines, and cloud infrastructure.","Current interests: TODO...","This site is a small fake shell because normal portfolios are kinda boring."],projects:[{name:"Terminal Portfolio",desc:"This project! A terminal-based portfolio website, built with TypeScript and HTML.",link:"https://github.com/br-watson/br-watson.github.io",tags:["TypeScript","HTML","CSS"]},{name:"TODO...",desc:"Lorem ipsum dolor sit amet, consectetur adipiscing elit.",link:"",tags:["TODO..."]}],skills:["TypeScript","AWS","TODO..."],roles:[{title:"Software Engineer",company:"Sky UK",location:"Leeds, UK",startDate:"Sep 2024",description:"TODO..."},{title:"Associate Software Engineer",company:"Sky UK",location:"Leeds, UK",startDate:"Sep 2023",endDate:"Sep 2024",description:"TODO..."}],todo:["Finish writing profile (bio, experience, projects, skills etc.)","Make projects links clickable","Allow projects to have multiple links (or a git link and a deployment link)","Add more commands","Improve txt files output formatting","Make actual CV","Add education section","Add way for mobile to access command history and autocomplete","Make banner nicer on mobile","Write README","Make sure accessibility is good","Make sure performance is good","Add my actual email","Write tests"]};function J(e){return function(a){let t=new Set(["https:","mailto:"]);try{let l=new URL(a,window.location.href);if(!t.has(l.protocol)&&l.origin!==window.location.origin){e.show("Blocked unsafe URL");return}}catch{e.show("Invalid URL");return}window.open(String(a),"_blank","noopener,noreferrer")}}function X({form:e,input:n,terminal:a,renderer:t}){function l(){n.focus({preventScroll:!0})}function c(){requestAnimationFrame(()=>{n.selectionStart=n.selectionEnd=n.value.length})}return e.addEventListener("submit",async o=>{o.preventDefault();let i=n.value;n.value="",i.trim()&&(a.addHistory(i),await a.run(i)),t.scrollToBottom(),l()}),n.addEventListener("keydown",o=>{if(!(o.altKey||o.ctrlKey||o.metaKey)){if(o.key==="ArrowUp"){o.preventDefault();let i=a.historyUp();if(i===null)return;n.value=i,c()}if(o.key==="ArrowDown"){o.preventDefault();let i=a.historyDown();if(i===null)return;n.value=i,c()}if(o.key==="Tab"){if(o.shiftKey)return;o.preventDefault(),n.value=a.autocomplete(n.value),c()}}}),{focus:l}}var Z="terminal-theme";function Te(e){return e==="light"||e==="dark"}function ee(e){return e.toLowerCase()==="light"?"light":"dark"}function te(e){return e.toLowerCase()==="light"?"dark":"light"}function ne({themeToggle:e,toast:n,storage:a=window.localStorage,doc:t=document,matchMedia:l=window.matchMedia?.bind(window)}){function c(){let f=a.getItem(Z);return Te(f)?f:null}function o(){return l?.("(prefers-color-scheme: light)")?.matches?"light":"dark"}let i=c()??o(),d=ee(i);function g(f,x={}){let{persist:v=!0,announce:I=!0,force:D=!1}=x,C=ee(f),R=C!==d;if(d=C,(R||D)&&(t.documentElement.dataset.theme=C,e)){let M=te(C);e.setAttribute("aria-pressed",String(C==="light")),e.setAttribute("aria-label",`Switch to ${M.toLowerCase()} theme`),e.textContent=M}v&&a.setItem(Z,C),I&&R&&n.show(`theme: ${C}`)}let s={get:()=>d,set:f=>g(f,{persist:!0,announce:!0}),toggle:()=>g(te(d),{persist:!0,announce:!0})};e&&e.addEventListener("click",()=>s.toggle());function h(){g(i,{persist:!1,announce:!1,force:!0})}return{controller:s,applyInitialTheme:h}}function oe(e,n=1500){let a;function t(l){e&&(e.textContent=l,e.classList.add("show"),e.setAttribute("aria-hidden","false"),a&&window.clearTimeout(a),a=window.setTimeout(()=>{e.classList.remove("show"),e.setAttribute("aria-hidden","true")},n))}return{show:t}}function ie({screen:e}){function n(){let s=document.createElement("span");s.className="line ok",s.style.position="absolute",s.style.visibility="hidden",s.style.whiteSpace="pre",s.textContent="M",e.appendChild(s);let h=s.getBoundingClientRect().width;return e.removeChild(s),h||8}function a(){let s=n();return Math.max(1,Math.floor(e.clientWidth/s))}function t(s){let h=new Set(["https:","mailto:"]);try{let f=new URL(s,window.location.href);return h.has(f.protocol)?!0:f.origin===window.location.origin}catch{return!1}}function l(s){if(s.type==="text")return document.createTextNode(s.text);if(s.type==="span"){let h=document.createElement("span");return h.className=s.className,h.textContent=s.text,h}if(s.type==="link"){if(!t(s.href))return document.createTextNode(s.text??s.href);let h=document.createElement("a");return h.href=s.href,h.target="_blank",h.rel="noopener noreferrer",h.textContent=s.text??s.href,h}return document.createTextNode("")}function c(s){let h=document.createDocumentFragment();for(let f of s)h.appendChild(l(f));return h}function o(s,h="ok"){let f=document.createElement("div");f.className="block";let x=document.createElement("div");x.className=`line ${h}`,x.appendChild(c(s)),f.appendChild(x),e.appendChild(f)}function i(s,h="ok"){let f=document.createElement("div");f.className="block";let x=document.createElement("div");x.className=`line ${h}`;let v=document.createElement("pre");v.className="pre",v.textContent=s,x.appendChild(v),f.appendChild(x),e.appendChild(f)}function d(){for(;e.firstChild;)e.removeChild(e.firstChild)}function g(){e.scrollTop=e.scrollHeight}return{printLine:o,printPre:i,clear:d,scrollToBottom:g,getColumns:a}}function re({container:e,list:n,profile:a,onRunCommand:t,aliases:l}){if(!(e instanceof HTMLElement)||!(n instanceof HTMLElement))return;let c=H(a),o=l.filter(i=>c.has(i)).map(i=>`open ${i}`);if(n.replaceChildren(),o.length===0){e.hidden=!0;return}for(let i of o){let d=document.createElement("button");d.type="button",d.className="quick-link",d.dataset.command=i,d.setAttribute("aria-label",`Run ${i}`),d.title=i;let g=document.createElement("span");g.className="quick-link-sigil",g.textContent="$";let s=document.createElement("span");s.textContent=i,d.append(g,s),n.appendChild(d)}n.addEventListener("click",async i=>{let d=i.target;if(!(d instanceof Element))return;let g=d.closest("button[data-command]");if(!(g instanceof HTMLButtonElement))return;let s=g.dataset.command?.trim();s&&(i.detail>0&&g.blur(),await t(s))}),e.hidden=!1}var ce=document.getElementById("screen"),_e=document.getElementById("prompt"),F=document.getElementById("input"),Le=document.getElementById("themeToggle"),Ce=document.getElementById("toast"),se=document.querySelector(".title"),ae=document.querySelector(".ps1"),Se=document.getElementById("quickLinks"),Ee=document.getElementById("quickLinksList"),B=window.matchMedia("(pointer: coarse)").matches,me="brad@portfolio";se&&(se.textContent=`${me}: ~`);ae&&(ae.textContent=me);var de=oe(Ce),{controller:Ie,applyInitialTheme:Me}=ne({themeToggle:Le,toast:de}),Pe=J(de);if(!ce)throw new Error("Screen element not found.");var U=ie({screen:ce}),{commands:$e}=K({profile:$}),A=G({renderer:U,profile:$,fs:Q($),commands:$e,theme:Ie,openUrl:Pe}),ue=X({form:_e,input:F,terminal:A,renderer:U});re({container:Se,list:Ee,profile:$,aliases:["cv","github","linkedin"],onRunCommand:async e=>{B&&document.activeElement===F&&F.blur(),A.addHistory(e),await A.run(e),U.scrollToBottom(),B||ue.focus()}});Me();A.boot();B||ue.focus();var j=0;window.addEventListener("resize",()=>{j&&cancelAnimationFrame(j),j=requestAnimationFrame(()=>{A.refreshIntroIfPristine(),j=0})});var le=0;document.addEventListener("touchend",e=>{let n=performance.now();e.touches.length>0||(n-le<=300&&e.preventDefault(),le=n)},{passive:!1});
//# sourceMappingURL=main.js.map
