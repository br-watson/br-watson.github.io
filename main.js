function We(e,t,n){for(let o of n)e({name:o.name,summary:o.summary,usage:o.usage,showInHelp:o.showInHelp,showInMobileTray:o.showInMobileTray,argMode:"none",execute:i=>t.get(o.targetCommand)?.execute(i,o.args)})}function ne({profile:e,commands:t,registerCommand:n}){n({name:"whoami",summary:"About me",usage:"whoami",showInHelp:!0,showInMobileTray:!0,argMode:"none",execute:o=>{o.printLine(`${String(e.name)} \u2014 ${String(e.role)} (${String(e.location)})`)}}),We(n,t,[{name:"bio",summary:"Alias: cat bio.txt",usage:"bio",targetCommand:"cat",args:["bio.txt"],showInHelp:!0,showInMobileTray:!0},{name:"projects",summary:"Alias: cat projects.txt",usage:"projects",targetCommand:"cat",args:["projects.txt"],showInHelp:!0,showInMobileTray:!0},{name:"contact",summary:"Alias: cat contact.txt",usage:"contact",targetCommand:"cat",args:["contact.txt"],showInHelp:!0,showInMobileTray:!0},{name:"cv",summary:"Alias: open cv",usage:"cv",targetCommand:"open",args:["cv"],showInHelp:!0,showInMobileTray:!0},{name:"skills",summary:"List my skills",usage:"skills",targetCommand:"cat",args:["skills.txt"],showInHelp:!0,showInMobileTray:!0},{name:"education",summary:"List my education",usage:"education",targetCommand:"cat",args:["education.txt"],showInHelp:!0,showInMobileTray:!0},{name:"roles",summary:"List my roles and experience",usage:"roles",targetCommand:"cat",args:["roles.txt"],showInHelp:!0,showInMobileTray:!0}])}function N(e,t,n){return Math.max(t,Math.min(n,e))}function U(e){return e.reduce((t,n)=>Math.max(t,n.length),0)}var qe="[penguin noises]",Ke=["      .--.","     |o_o |","     |:_/ |","    //   \\\\","   (|     |)","  /'\\_   _/`\\","  \\___)=(___/"],Ve=["     _","   ('v')","  //-=-\\\\","  (\\_=_/)","   ^^ ^^"];function ze(e,t){let n=Math.max(1,t),o=[],i=e.split(/\r?\n/);for(let l of i){let s=l.trim().split(/\s+/).filter(Boolean);if(s.length===0){o.push("");continue}let r="";for(let c of s){if(c.length>n){r&&(o.push(r),r="");for(let f=0;f<c.length;f+=n)o.push(c.slice(f,f+n));continue}if(!r){r=c;continue}if(r.length+1+c.length<=n){r=`${r} ${c}`;continue}o.push(r),r=c}r&&o.push(r)}return o.length===0?[""]:o}function Ge(e,t){let n=ze(e,t),o=n.reduce((l,s)=>Math.max(l,s.length),1),i="-".repeat(o+2);return[`.${i}.`,...n.map(l=>`| ${l.padEnd(o," ")} |`),`'${i}'`]}function Qe(e,t,n){let o=n==="big-penguin"?48:n==="lil-penguin"?34:24,i=N(t-4,1,o),l=Ge(e,i);if(n==="no-penguin")return l;let s=["   \\","    \\"],r=n==="big-penguin"?Ke:Ve;return[...l,...s,...r]}function Ye(e,t){let n=["big-penguin","lil-penguin","no-penguin"];for(let o of n){let i=Qe(e,t,o);if(U(i)<=t)return i}return null}function oe({registerCommand:e}){e({name:"pengsay",summary:"Penguin says something",usage:"pengsay [text]",showInHelp:!0,showInMobileTray:!0,argMode:"optional",execute:(t,n)=>{let o=n.join(" ").trim()||qe,i=Math.max(1,t.getColumns()),l=i>=5?Ye(o,i):null;if(!l){t.printLine(`penguin: "${o}"`);return}t.printPre(l.join(`
`),"ok")}})}function Xe(e,t){let n=t.toLowerCase();return Array.from(new Set(e)).filter(o=>o.toLowerCase().startsWith(n)).sort()}function W(e,t){return e.argIndex!==0?[]:Xe(t,e.prefix??"")}var Je=new Set(["file","bio","link","links","projects","education"]);function Ze(e,t){let{t:n,s:o}=e.seg,i=t.lines.flatMap((l,s)=>[n(l),...s<t.lines.length-1?[n(`

`)]:[]]);e.printLine([o("accent",`About
`),...i],"muted")}function et(e,t){e.printPre(String(t.content),"ok")}function tt(e,t,n){let{t:o,l:i,s:l}=e.seg;e.printLine([o(`${t} -> `),i(n.href),o(" (click me! or run "),l("accent",`open ${t.includes(".")?t.slice(0,t.lastIndexOf(".")):t}`),o(")")],"muted")}function nt(e,t){let{t:n,l:o,s:i}=e.seg,l=(r,c)=>" ".repeat(Math.max(0,c-r.length)),s=Object.entries(t.items).flatMap(([r,c])=>{let f=r==="email"?c.replace("mailto:",""):r;return[n(`${r}: `.padEnd(10," ")),o(c,f),n(l(f,11)),n(" (or run "),i("accent",`open ${r}`),n(`)
`)]});e.printLine(s,"muted")}function ot(e,t){let{t:n,l:o,s:i}=e.seg,l=t.projects.flatMap(s=>[i("accent",`${s.name}
`),n(`${s.desc}
`),...s.repoLink?[o(s.repoLink),n(`
`)]:[n("")],...s.deployedLink?[o(s.deployedLink),n(`
`)]:[n("")],s.tags&&s.tags.length>0?n(`Tech stack: ${s.tags.join(", ")}
`):n(""),n(`
`)]);e.printLine(l,"muted")}function it(e,t){let{t:n,l:o,s:i}=e.seg,l=t.education.flatMap(s=>[i("accent",`${s.qualification} - ${s.institution}
`),n(`${s.location} | ${s.startDate} - ${s.endDate} | ${s.grade}
`),s.description?n(`${s.description}
`):n(""),...s.dissertation?[n("Dissertation: "),o(s.dissertation.link,s.dissertation.title),n(`
`)]:[n("")],s.tags&&s.tags.length>0?n(`Tags: ${s.tags.join(", ")}
`):n(""),n(`
`)]);e.printLine(l,"muted")}function rt(e,t,n){switch(n.type){case"bio":Ze(e,n);break;case"file":et(e,n);break;case"link":tt(e,t,n);break;case"links":nt(e,n);break;case"projects":ot(e,n);break;case"education":it(e,n);break;default:e.printLine(`cat: ${t}: Not a file`,"error");break}}function ie(e){e({name:"cat",summary:"Print file contents",usage:"cat <file>",showInHelp:!0,showInMobileTray:!0,argMode:"required",execute:(t,n)=>{let o=n[0];if(!o){t.printLine("cat: missing file operand","error");return}let i=t.resolveHomeItem(o);if(!i){t.printLine(`cat: ${o}: No such file`,"error");return}rt(t,o,i)},complete:(t,n)=>{let o=t.listHome().filter(i=>{let l=t.resolveHomeItem(i);return l?Je.has(l.type):!1});return W(n,o)}})}function F(e){let t=new Map;return e.links.github&&t.set("github",e.links.github),e.links.linkedin&&t.set("linkedin",e.links.linkedin),e.filePaths.cv&&t.set("cv",e.filePaths.cv),e.filePaths.dissertation&&t.set("dissertation",e.filePaths.dissertation),e.email&&t.set("email",`mailto:${e.email}`),t}function re({registerCommand:e,isMobile:t}){e({name:"ls",summary:"List files (only ~ supported)",usage:"ls [path]",showInHelp:!0,showInMobileTray:!0,argMode:"optional",execute:(n,o)=>{if((o[0]??"~")!=="~"){n.printLine('ls: only "~" is supported in this tiny filesystem',"error");return}n.printPre(n.listHome().join(`
`),"ok")}}),ie(e),e({name:"open",summary:"Open link",usage:"open <alias>",showInHelp:!0,showInMobileTray:!0,argMode:"required",execute:(n,o)=>{let{t:i,l}=n.seg,s=o[0],r=(s??"").toLowerCase();if(!r){n.printLine(t?"open: missing target (see the suggestions for valid options)":"open: missing target (press Tab to see valid options)","error");return}let c=F(n.profile);if(c.has(r)){let f=c.get(r);f&&(n.printLine([i("Opening: "),l(f)],"muted"),n.openUrl(f));return}n.printLine(`open: unknown target "${s}"`,"error")},complete:(n,o)=>{let i=F(n.profile);return W(o,i.keys())}})}function se({commands:e,registerCommand:t,isMobile:n}){t({name:"help",summary:"Show this help",usage:"help",showInHelp:!0,showInMobileTray:!0,argMode:"none",execute:o=>{let{s:i}=o.seg;o.printLine([i("accent","Available commands")],"ok");let l=Array.from(e.values()).filter(r=>r.showInHelp).sort((r,c)=>r.name.localeCompare(c.name)).map(r=>`${r.name.padEnd(12," ")} ${r.summary.padEnd(32," ")} ${r.usage}`),s=[`${"COMMAND".padEnd(12," ")} ${"SUMMARY".padEnd(32," ")} USAGE`,"",...l,"",n?'Tip: use the command buttons below, or tap "Custom" to type commands with autocomplete and history.':"Tips: use \u2191/\u2193 for history and Tab for autocomplete (Shift+Tab to move focus)."];o.printPre(s.join(`
`),"ok")}}),t({name:"clear",summary:"Clear the screen",usage:"clear",showInHelp:!0,showInMobileTray:!0,argMode:"none",execute:o=>o.clear()}),t({name:"date",summary:"Print local date/time",usage:"date",showInHelp:!0,showInMobileTray:!0,argMode:"none",execute:o=>{o.printLine(new Date().toString(),"muted")}}),t({name:"echo",summary:"Print args",usage:"echo <text>",showInHelp:!0,showInMobileTray:!1,argMode:"optional",execute:(o,i)=>{o.printLine(i.join(" "))}}),t({name:"theme",summary:"Switch theme",usage:"theme [dark|light|toggle]",showInHelp:!0,showInMobileTray:!0,argMode:"optional",execute:(o,i)=>{let l=(i[0]??"").toLowerCase(),s=o.theme.get();if(!l){o.printLine(`theme: current is "${s}"`,"muted"),o.printLine("Try: theme dark | theme light | theme toggle","muted");return}if(l==="toggle"){o.theme.toggle(),o.printLine(`theme: set to "${o.theme.get()}"`,"muted");return}if(l!=="dark"&&l!=="light"){o.printLine('theme: expected "dark" or "light"',"error");return}o.theme.set(l),o.printLine(`theme: set to "${l}"`,"muted")},complete:(o,i)=>{if(i.argIndex!==0)return[];let l=i.prefix.toLowerCase();return["dark","light","toggle"].filter(s=>s.startsWith(l))}})}function ae({profile:e,isMobile:t=!1}){let n=new Map,o=i=>{n.set(i.name,i)};return se({commands:n,registerCommand:o,isMobile:t}),re({registerCommand:o,isMobile:t}),ne({profile:e,commands:n,registerCommand:o}),oe({registerCommand:o}),{commands:n}}function le(e){return{"~":{type:"dir",children:{"bio.txt":{type:"bio",lines:e.bio},"projects.txt":{type:"projects",projects:e.projects},"contact.txt":{type:"links",items:{...e.links,email:`mailto:${e.email}`}},"skills.txt":{type:"file",content:e.skills.join(", ")},"education.txt":{type:"education",education:e.education},"roles.txt":{type:"file",content:e.roles.map(t=>{let n=t.title??"Untitled Role",o=t.company?` at ${t.company}`:"",i=t.location?` in ${t.location}`:"",l=` (${t.startDate} - ${t.endDate??"Present"})`,s=t.description?`
  ${t.description}`:"";return`- ${n}${o}${i}${l}${s}`}).join(`

`)},"cv.pdf":{type:"link",href:e.filePaths.cv},"dissertation.pdf":{type:"link",href:e.filePaths.dissertation},"todo.md":{type:"file",content:e.todo.map(t=>`- [ ] ${t}`).join(`
`)}}}}}function me(e){let t=e["~"];if(!t||t.type!=="dir")throw new Error("Invalid filesystem: missing home dir");return t}function ce(e){return Object.keys(me(e).children).sort()}function ue(e,t){return me(e).children[t]}function $(e){let t=[],n="",o=null,i=!1;for(let l=0;l<e.length;l++){let s=e[l];if(i){n+=s,i=!1;continue}if(s==="\\"){i=!0;continue}if(o){if(s===o){o=null;continue}n+=s;continue}if(s==='"'||s==="'"){o=s;continue}if(/\s/.test(s)){n&&(t.push(n),n="");continue}n+=s}return i&&(n+="\\"),n&&t.push(n),{tokens:t,endsWithWhitespace:/\s$/.test(e)}}function de({commands:e,getContext:t,onListMatches:n}){let o=Array.from(e.entries()).map(([a,u])=>({name:a,showInHelp:u.showInHelp})).sort((a,u)=>a.name.localeCompare(u.name)),i=null;function l(a){let u=e.get(a);return!u||u.argMode==="none"?a:`${a} `}function s(a,u=$(a)){let{tokens:m,endsWithWhitespace:g}=u;if(m.length===0)return null;if(m.length===1&&!g){let x=m[0],R=o.filter(v=>v.showInHelp&&v.name.startsWith(x)).map(v=>v.name);return{kind:"cmd",prefix:x,matches:R,buildValue:v=>v,buildAutocompleteValue:l}}let b=m[0],E=e.get(b);if(!E?.complete)return null;let C=m.slice(1),L=g?"":C[C.length-1]??"",_=g?C.length:Math.max(0,C.length-1),w={line:a,tokens:m,args:C,endsWithWhitespace:g,argIndex:_,prefix:L},A=E.complete(t(),w)||[];return{kind:`arg:${b}`,prefix:L,matches:A,buildValue:x=>[...g?m:m.slice(0,-1),st(x)].join(" ")}}function r(a){let u=s(a);if(!u)return[];let m=new Set,g=[];for(let b of u.matches){let E=u.buildValue(b);m.has(E)||(m.add(E),g.push(E))}return g}function c(a){if(i?.phase==="menu"){let g=i.values.indexOf(a);if(g!==-1){let b=(g+1)%i.values.length;return i.index=b,i.lastValue=i.values[b],i.lastValue}i=null}let u=$(a);if(u.tokens.length===0)return"";let m=s(a,u);return m?f(m.kind,a,m.prefix,m.matches,m.buildValue,m.buildAutocompleteValue??m.buildValue)??a:a}function f(a,u,m,g,b,E){if(g.length===0)return i=null,null;if(g.length===1)return i=null,E(g[0]);let C=lt(g),L=at(g);if(L.length>m.length){let w=b(L);return i={phase:"armed",kind:a,baseInput:w,prefix:L,matchesKey:C,values:g.map(b),index:-1,lastValue:null},w}if(!(i&&i.kind===a&&i.baseInput===u&&i.prefix===m&&i.matchesKey===C))return i={phase:"armed",kind:a,baseInput:u,prefix:m,matchesKey:C,values:g.map(b),index:-1,lastValue:null},null;if(i?.phase==="armed")return n(g),i.phase="listed",null;if(i?.phase==="listed"){let w=i.values[0];return i.phase="menu",i.index=0,i.lastValue=w,w}return null}return{autocomplete:c,listCompletions:r}}function st(e){return/\s/.test(e)?`"${e.replace(/"/g,'\\"')}"`:e}function at(e){if(e.length===0)return"";let t=e[0];for(let n=1;n<e.length;n++){let o=e[n],i=0;for(;i<t.length&&i<o.length&&t[i]===o[i];)i++;if(t=t.slice(0,i),t==="")break}return t}function lt(e){return e.join("\0")}var S=e=>({type:"text",text:e}),k=(e,t)=>({type:"span",className:e,text:t}),mt=(e,t)=>({type:"link",href:e,text:t});function pe({renderer:e,profile:t,fs:n,commands:o,openUrl:i,theme:l,isMobile:s}){let r={history:[],historyIndex:-1,hasRunCommand:!1,hasBooted:!1},c="status: work-in-progress";function f(){r.hasBooted=!0,a()}function a(){e.clear(),b(),C([S(s?"Tap ":"Type "),k("accent","help"),S(` to see commands and their uses.
`),k("accent","Tips: "),S(s?'use the command buttons below, or tap "Custom" to type commands with autocomplete and history.':"use \u2191/\u2193 for history and Tab for autocomplete (Shift+Tab to move focus).")],"muted"),e.scrollToBottom()}function u(){!r.hasBooted||r.hasRunCommand||a()}function m(d,p){return d.length<=p?d:p<=1?"\u2026":`${d.slice(0,p-1)}\u2026`}function g(d,p){let T=m(d,p),M=Math.max(0,p-T.length),I=Math.floor(M/2),H=M-I;return{leftPad:" ".repeat(I),text:T,rightPad:" ".repeat(H)}}function b(){let d=t.nameAsciiArt??[],p=U(d),T=e.getColumns();if(d.length>0&&p<=T){L(d.join(`
`),"accent"),C(t.role,"muted"),C([k("accent",c)],"muted");return}E()}function E(){let d=String(t.name).trim()||"Portfolio",p=String(t.role).trim()||"Software Engineer",T=e.getColumns(),M=N(T-6,10,54),I=Math.min(20,M),H=Math.max(d.length,p.length,I-4),P=N(H+4,I,M),z=`\u256D${"\u2500".repeat(P+2)}\u256E`,je=`\u251C${"\u2500".repeat(P+2)}\u2524`,De=`\u2570${"\u2500".repeat(P+2)}\u256F`,te=(Oe,Ue=!0)=>{let G=g(Oe,P);return[k("banner-border","\u2502 "),k("banner-border",G.leftPad),k("banner-text",G.text),k("banner-border",G.rightPad),k("banner-border",Ue?` \u2502
`:" \u2502")]},Ne=[k("banner-border",`${z}
`),...te(d),k("banner-border",`${je}
`),...te(p),k("banner-border",De)];C(Ne,"banner",!1),C([k("accent",c)],"muted")}function C(d,p="ok",T=!0){let M=Array.isArray(d)?d:[S(String(d))];e.printLine(M,p,T)}function L(d,p="ok"){e.printPre(String(d),p)}function _(d){C([k("cmd","$"),S(" "),k("cmd",d)],"cmd")}function w(){return ce(n)}function A(d){return ue(n,d)}function x(){return{profile:t,fs:n,theme:l,openUrl:i,printLine:C,printPre:L,getColumns:e.getColumns,seg:{t:S,s:k,l:mt},listHome:w,resolveHomeItem:A,clear:e.clear}}let R=de({commands:o,getContext:x,onListMatches:d=>{let p=[];d.forEach((T,M)=>{M&&p.push(S("   ")),p.push(k("accent",T))}),C(p,"muted"),e.scrollToBottom()}});async function v(d){let p=d.trim();if(!p)return;r.hasRunCommand=!0,_(p);let T=$(p),[M,...I]=T.tokens,H=o.get(M);if(!H){C([S("Command not found: "),k("error",M)],"error"),C([S("Try: "),k("accent","help")],"muted");return}try{await H.execute(x(),I)}catch(P){let z=P instanceof Error?P.message:String(P);C([k("error","Error:"),S(" "),S(z)],"error")}}function B(d){r.history.push(d),r.historyIndex=r.history.length}function V(){return r.history.length===0?null:(r.historyIndex=Math.max(0,r.historyIndex-1),r.history[r.historyIndex]??"")}function h(){return r.history.length===0?null:(r.historyIndex=Math.min(r.history.length,r.historyIndex+1),r.history[r.historyIndex]??"")}function y(d=6){let p=Math.max(0,Math.floor(d));if(p===0)return[];let T=[],M=new Set;for(let I=r.history.length-1;I>=0;I--){let H=r.history[I]??"";if(!(H.length===0||M.has(H))&&(M.add(H),T.push(H),T.length>=p))break}return T}return{boot:f,run:v,addHistory:B,historyUp:V,historyDown:h,listRecentHistory:y,listCompletions:d=>R.listCompletions(d),autocomplete:d=>R.autocomplete(d),refreshIntroIfPristine:u}}var O={name:"Bradley Watson",nameAsciiArt:["____________  ___ ______   _    _  ___ _____ _____  _____ _   _","| ___ \\ ___ \\/ _ \\|  _  \\ | |  | |/ _ \\_   _/  ___||  _  | \\ | |","| |_/ / |_/ / /_\\ \\ | | | | |  | / /_\\ \\| | \\ `--. | | | |  \\| |","| ___ \\    /|  _  | | | | | |/\\| |  _  || |  `--. \\| | | | . ` |","| |_/ / |\\ \\| | | | |/ /  \\  /\\  / | | || | /\\__/ /\\ \\_/ / |\\  |","\\____/\\_| \\_\\_| |_/___/    \\/  \\/\\_| |_/\\_/ \\____/  \\___/\\_| \\_/"],role:"Software Engineer",location:"Leeds, UK",email:"br@dley.dev",links:{github:"https://github.com/br-watson",linkedin:"https://www.linkedin.com/in/bradleyrwatson"},filePaths:{cv:"./assets/cv.pdf",dissertation:"./assets/diss.pdf"},bio:["Software engineer specializing in backend systems, cloud platforms, CI/CD automation, and end-to-end data pipelines, building reliable, scalable production systems.","Current interests: distributed systems design, event-driven data pipelines, observability, CI/CD, and developer tooling for cloud-native backends.","This site is a small terminal-style portfolio because standard portfolio sites are kinda boring."],projects:[{name:"Terminal Portfolio",desc:"This project! An interactive terminal-style portfolio built with TypeScript, HTML, and CSS.",repoLink:"https://github.com/br-watson/br-watson.github.io",deployedLink:"https://bwatson.uk",tags:["TypeScript","HTML","CSS"]},{name:"Darts Score Tracker",desc:"All the darts trackers my friends and I could find were either too basic or couldn't handle more than 4 players, so I built this simple one to track our games and stats.",repoLink:"https://github.com/br-watson/darts-games",deployedLink:"https://bwatson.uk/darts-games",tags:["TypeScript","React","Next.js","Tailwind CSS"]},{name:"Planning Poker App",desc:"Built a free, no-login planning poker app for my team's sprint refinements after existing tools were paid or lacked custom decks. It supports multiple rooms, custom card sets, and real-time updates.",deployedLink:"https://poker.bwatson.uk/",tags:["TypeScript","React","Tailwind CSS","Firebase"]}],skills:["TypeScript","AWS","TODO..."],education:[{qualification:"Master of Mathematics (MMath)",institution:"Durham University",location:"Durham, UK",startDate:"2018",endDate:"2022",grade:"First Class Honours (1st)",description:"Specialised in mathematical analysis, geometry, and algebra. Dissertation on isometries of Riemannian manifolds.",tags:["Mathematical analysis","Geometry","Algebra","Calculus","Linear algebra","Partial differential equations"],dissertation:{title:"Isometries of Riemannian Manifolds",link:"./assets/diss.pdf"}},{qualification:"A-Levels",institution:"Notre Dame Sixth Form College",location:"Leeds, UK",startDate:"2016",endDate:"2018",grade:"A*AAA",tags:["Mathematics","Further Mathematics","Computer Science","Chemistry"]}],roles:[{title:"Software Engineer",company:"Sky UK",location:"Leeds, UK",startDate:"Sep 2024"},{title:"Associate Software Engineer",company:"Sky UK",location:"Leeds, UK",startDate:"Sep 2023",endDate:"Sep 2024"}],todo:["Finish writing profile (experience, projects, skills etc.)","Change skills to have multiple sections and include levels and experience details","Add more commands","Improve txt files output formatting","Make actual CV","Make sure accessibility is good","Make sure performance is good","Write tests (TDD kinda went out the window for this project)","Cap retained terminal output and command history","Optimize autocomplete: cache command/completion data and avoid full mobile suggestion list rerenders on each input."]};function ge(e){return function(n){let o=new Set(["https:","mailto:"]),i;try{if(i=new URL(n,window.location.href),!o.has(i.protocol)&&i.origin!==window.location.origin){e.show("Blocked unsafe URL");return}}catch{e.show("Invalid URL");return}if(i.protocol==="mailto:"){window.location.assign(i.toString());return}window.open(i.toString(),"_blank","noopener,noreferrer")}}function ct(e){requestAnimationFrame(()=>{e.selectionStart=e.selectionEnd=e.value.length})}function Q(e,t){e.value=t,ct(e)}function fe({form:e,input:t,terminal:n,onRunCommand:o}){let i=!1;function l(){i||(i=!0,t.removeAttribute("placeholder"))}function s(){t.focus({preventScroll:!0})}async function r(){let a=t.value.trim();if(t.value="",a.length===0){s();return}await o(a),s()}function c(){e.addEventListener("submit",a=>{a.preventDefault(),r()})}function f(){t.addEventListener("keydown",a=>{if(!(a.altKey||a.ctrlKey||a.metaKey)){if(a.key==="ArrowUp"){a.preventDefault();let u=n.historyUp();if(u===null)return;Q(t,u)}if(a.key==="ArrowDown"){a.preventDefault();let u=n.historyDown();if(u===null)return;Q(t,u)}if(a.key==="Tab"){if(a.shiftKey)return;a.preventDefault(),Q(t,n.autocomplete(t.value))}}})}return c(),f(),{focus:s,markFirstCommandSubmitted:l}}var he="terminal-theme";function ut(e){return e==="light"||e==="dark"}function ye(e){return e.toLowerCase()==="light"?"light":"dark"}function be(e){return e.toLowerCase()==="light"?"dark":"light"}function Ce({themeToggle:e,toast:t,storage:n=window.localStorage,doc:o=document,matchMedia:i=window.matchMedia?.bind(window)}){function l(){let m=n.getItem(he);return ut(m)?m:null}function s(){return i?.("(prefers-color-scheme: light)")?.matches?"light":"dark"}let r=l()??s(),c=ye(r);function f(m,g={}){let{persist:b=!0,announce:E=!0,force:C=!1}=g,L=ye(m),_=L!==c;if(c=L,(_||C)&&(o.documentElement.dataset.theme=L,e)){let w=be(L);e.setAttribute("aria-pressed",String(L==="light")),e.setAttribute("aria-label",`Switch to ${w.toLowerCase()} theme`),e.textContent=w}b&&n.setItem(he,L),E&&_&&t.show(`theme: ${L}`)}let a={get:()=>c,set:m=>f(m,{persist:!0,announce:!0}),toggle:()=>f(be(c),{persist:!0,announce:!0})};e&&e.addEventListener("click",()=>a.toggle());function u(){f(r,{persist:!1,announce:!1,force:!0})}return{controller:a,applyInitialTheme:u}}function Te(e,t=1500){let n;function o(i){e&&(e.textContent=i,e.classList.add("show"),e.setAttribute("aria-hidden","false"),n&&window.clearTimeout(n),n=window.setTimeout(()=>{e.classList.remove("show"),e.setAttribute("aria-hidden","true")},t))}return{show:o}}function Le({screen:e}){function t(){let a=document.createElement("span");a.className="line ok",a.style.position="absolute",a.style.visibility="hidden",a.style.whiteSpace="pre",a.textContent="M",e.appendChild(a);let u=a.getBoundingClientRect().width;return e.removeChild(a),u||8}function n(){let a=t();return Math.max(1,Math.floor(e.clientWidth/a))}function o(a){let u=new Set(["https:","mailto:"]);try{let m=new URL(a,window.location.href);return u.has(m.protocol)||m.origin===window.location.origin?m:null}catch{return null}}function i(a){if(a.type==="text")return document.createTextNode(a.text);if(a.type==="span"){let u=document.createElement("span");return u.className=a.className,u.textContent=a.text,u}if(a.type==="link"){let u=o(a.href);if(!u)return document.createTextNode(a.text??a.href);let m=document.createElement("a");return m.href=u.toString(),u.protocol!=="mailto:"&&(m.target="_blank",m.rel="noopener noreferrer"),m.textContent=a.text??a.href,m}return document.createTextNode("")}function l(a){let u=document.createDocumentFragment();for(let m of a)u.appendChild(i(m));return u}function s(a,u="ok",m=!0){let g=document.createElement("div");g.className="block",m&&g.classList.add("wrap-text");let b=document.createElement("div");b.className=`line ${u}`,m&&b.classList.add("wrap-text"),b.appendChild(l(a)),g.appendChild(b),e.appendChild(g)}function r(a,u="ok"){let m=document.createElement("div");m.className="block";let g=document.createElement("div");g.className=`line ${u}`;let b=document.createElement("pre");b.className="pre",b.textContent=a,g.appendChild(b),m.appendChild(g),e.appendChild(m)}function c(){for(;e.firstChild;)e.removeChild(e.firstChild)}function f(){e.scrollTop=e.scrollHeight}return{printLine:s,printPre:r,clear:c,scrollToBottom:f,getColumns:n}}var ke=6;function dt(e){requestAnimationFrame(()=>{e.selectionStart=e.selectionEnd=e.value.length})}function Y(e,t){e.value=t,dt(e)}function we(e){e.scrollLeft=0,e.scrollTo({left:0,top:0,behavior:"auto"}),requestAnimationFrame(()=>{e.scrollLeft=0})}function pt(e){let t=[],n=new Set;for(let o of e){let i=o.command.trim();if(!i)continue;let l=o.kind??"simple",s=`${l}:${i}`;n.has(s)||(n.add(s),t.push({command:i,kind:l,label:o.label?.trim()||i}))}return t}function Me(e,t,n){let o=document.createElement("button");return o.type="button",o.className=t==="arg"?"mobile-command mobile-command-arg":"mobile-command",o.textContent=e.label,o.setAttribute("aria-label",t==="arg"?`Run ${n??e.command}`:e.kind==="withArgs"?`Choose ${e.command} argument`:`Run ${e.command}`),t==="arg"&&n?(o.dataset.run=n,o):(o.dataset.command=e.command,o.dataset.kind=e.kind,o)}function gt(e){return e.length<2?e:e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1).replace(/\\"/g,'"'):e}function ft(e,t){let n=`${e} `;if(!t.startsWith(n))return t;let o=t.slice(n.length).trim();return gt(o)||t}function ht(e,t){let n=`${e} `,o=t.listCompletions(n),i=[],l=new Set;for(let s of o){let r=s.trim();!r||!r.startsWith(n)||l.has(r)||(l.add(r),i.push(r))}return i}function yt(e,t){let n=document.createElement("button");return n.type="button",n.className="mobile-custom-suggestion",n.dataset.kind=t,n.dataset.value=e,n.textContent=e,n.title=e,n.setAttribute("aria-label",`Insert ${e}`),n}function bt(e,t){let n=e.trim().length===0,o=n?"history":"completion",i=n?t.listRecentHistory(ke):t.listCompletions(e);return{type:o,values:i.slice(0,ke)}}function Ct(e,t,n,o){if(n==="completion"){let i=e.value,l=$(i);if(l.tokens.length===1&&!l.endsWithWhitespace){let c=t.trim();Y(e,o.has(c)?`${c} `:c);return}let r=/\s$/.test(t)?t:`${t} `;Y(e,r);return}Y(e,t)}function xe({enabled:e,container:t,list:n,back:o,customTrigger:i,dialog:l,form:s,input:r,suggestions:c,suggestionsHint:f,cancel:a,terminal:u,commands:m,commandsWithArgs:g,onRunCommand:b}){if(!e){t instanceof HTMLElement&&(t.hidden=!0),l instanceof HTMLElement&&(l.hidden=!0);return}if(!(t instanceof HTMLElement)||!(n instanceof HTMLElement)||!(o instanceof HTMLButtonElement)||!(i instanceof HTMLButtonElement)||!(l instanceof HTMLElement)||!(s instanceof HTMLFormElement)||!(r instanceof HTMLInputElement)||!(c instanceof HTMLElement)||!(f instanceof HTMLElement)||!(a instanceof HTMLButtonElement))return;let E=pt(m),C=new Set(g.map(h=>h.trim())),L=!1,_=!1,w=h=>{l.hidden=!h,l.setAttribute("aria-hidden",h?"false":"true"),i.setAttribute("aria-expanded",h?"true":"false")},A=async h=>{let y=h.trim();if(!(y.length===0||L)){L=!0;try{await b(y)}finally{L=!1}}},x=()=>{_=!1,n.replaceChildren(...E.map(h=>Me(h,"root"))),n.setAttribute("aria-label","Quick commands"),we(n),o.hidden=!0,i.hidden=!1},R=h=>{let y=ht(h,u);if(y.length===0){(async()=>(await A(h),x()))();return}_=!0,n.setAttribute("aria-label",`Choose ${h} argument`);let d=y.map(p=>Me({command:h,kind:"simple",label:ft(h,p)},"arg",p));n.replaceChildren(...d),we(n),o.hidden=!1,i.hidden=!0},v=()=>{let{type:h,values:y}=bt(r.value,u);c.replaceChildren(...y.map(d=>yt(d,h))),c.hidden=y.length===0,f.hidden=y.length>0},B=()=>{w(!1),r.value="",v(),r.blur(),i.hidden||i.focus({preventScroll:!0})},V=()=>{w(!0),v(),requestAnimationFrame(()=>{r.focus({preventScroll:!0})})};x(),t.hidden=!1,w(!1),v(),n.addEventListener("click",h=>{let y=h.target;if(!(y instanceof Element))return;let d=y.closest("button[data-run]");if(d instanceof HTMLButtonElement){let I=d.dataset.run?.trim();if(!I)return;(async()=>(await A(I),x()))();return}let p=y.closest("button[data-command]");if(!(p instanceof HTMLButtonElement))return;let T=p.dataset.command?.trim();if(!T)return;if(p.dataset.kind==="withArgs"){R(T);return}(async()=>(await A(T),x()))()}),o.addEventListener("click",()=>{x()}),i.addEventListener("click",V),a.addEventListener("click",B),r.addEventListener("input",()=>{v()}),c.addEventListener("pointerdown",h=>{let y=h.target;y instanceof Element&&y.closest("button[data-value]")&&h.preventDefault()}),c.addEventListener("click",h=>{let y=h.target;if(!(y instanceof Element))return;let d=y.closest("button[data-value]");if(!(d instanceof HTMLButtonElement))return;let p=d.dataset.value;if(!p)return;let T=d.dataset.kind;Ct(r,p,T,C),v(),requestAnimationFrame(()=>{r.focus({preventScroll:!0})})}),l.addEventListener("click",h=>{let y=h.target;y instanceof Element&&y.closest("[data-dialog-close]")&&B()}),document.addEventListener("keydown",h=>{if(h.key==="Escape"){if(!l.hidden){h.preventDefault(),B();return}_&&(h.preventDefault(),x())}}),s.addEventListener("submit",h=>{h.preventDefault();let y=r.value.trim();y&&(async()=>(await A(y),B(),x()))()})}function Ee({container:e,list:t,profile:n,onRunCommand:o,aliases:i}){if(!(e instanceof HTMLElement)||!(t instanceof HTMLElement))return;let l=F(n),s=i.filter(r=>l.has(r)).map(r=>`open ${r}`);if(t.replaceChildren(),s.length===0){e.hidden=!0;return}for(let r of s){let c=document.createElement("button");c.type="button",c.className="quick-link",c.dataset.command=r,c.setAttribute("aria-label",`Run ${r}`),c.title=r;let f=document.createElement("span");f.className="quick-link-sigil",f.textContent="$";let a=document.createElement("span");a.textContent=r,c.append(f,a),t.appendChild(c)}t.addEventListener("click",async r=>{let c=r.target;if(!(c instanceof Element))return;let f=c.closest("button[data-command]");if(!(f instanceof HTMLButtonElement))return;let a=f.dataset.command?.trim();a&&(r.detail>0&&f.blur(),await o(a))}),e.hidden=!1}function J(e,t,n){if(!e||!t(e))throw new Error(n);return e}var Tt=J(document.getElementById("screen"),e=>e instanceof HTMLElement,"Screen element not found."),Lt=J(document.getElementById("prompt"),e=>e instanceof HTMLFormElement,"Prompt form element not found."),kt=J(document.getElementById("input"),e=>e instanceof HTMLInputElement,"Prompt input element not found."),wt=document.getElementById("themeToggle"),Mt=document.getElementById("toast"),ve=document.querySelector(".title"),Ie=document.querySelector(".ps1"),xt=document.getElementById("quickLinks"),Et=document.getElementById("quickLinksList"),vt=document.getElementById("mobileCommandTray"),It=document.getElementById("mobileCommandList"),Se=document.getElementById("mobileTrayBack"),_e=document.getElementById("mobileCustomTrigger"),St=document.getElementById("mobileCommandDialog"),He=document.getElementById("mobileCustomForm"),Ae=document.getElementById("mobileCustomInput"),_t=document.getElementById("mobileCustomSuggestions"),Ht=document.getElementById("mobileCustomSuggestionsHint"),Pe=document.getElementById("mobileCustomCancel"),D=window.matchMedia("(pointer: coarse)").matches,$e="brad@portfolio",Re=["help","contact","bio","projects","roles","education","cv"];function At(e){let t=Array.from(e.values()).filter(l=>l.showInMobileTray),n=new Set(Re),o=[];for(let l of Re){let s=e.get(l);s&&o.push(s)}return[...o,...t.filter(l=>!n.has(l.name))].map(l=>({command:l.name,kind:typeof l.complete=="function"?"withArgs":"simple"}))}function Pt(e){return Array.from(e.values()).filter(t=>t.argMode!=="none").map(t=>t.name)}ve&&(ve.textContent=`${$e}: ~`);Ie&&(Ie.textContent=$e);var Be=Te(Mt),{controller:Rt,applyInitialTheme:$t}=Ce({themeToggle:wt,toast:Be}),Bt=ge(Be),Fe=Le({screen:Tt}),{commands:Z}=ae({profile:O,isMobile:D}),j=pe({renderer:Fe,profile:O,fs:le(O),commands:Z,theme:Rt,openUrl:Bt,isMobile:D}),Ft=At(Z),jt=Pt(Z),K=null,X=!1;async function ee(e){let t=e.trim();if(!(t.length===0||X)){X=!0;try{K?.markFirstCommandSubmitted(),j.addHistory(t),await j.run(t),Fe.scrollToBottom()}finally{X=!1}D||K?.focus()}}K=fe({form:Lt,input:kt,terminal:j,onRunCommand:ee});Ee({container:xt,list:Et,profile:O,aliases:["cv","github","linkedin","email"],onRunCommand:ee});xe({enabled:D,container:vt,list:It,back:Se instanceof HTMLButtonElement?Se:null,customTrigger:_e instanceof HTMLButtonElement?_e:null,dialog:St,form:He instanceof HTMLFormElement?He:null,input:Ae instanceof HTMLInputElement?Ae:null,suggestions:_t,suggestionsHint:Ht,cancel:Pe instanceof HTMLButtonElement?Pe:null,terminal:j,commands:Ft,commandsWithArgs:jt,onRunCommand:ee});$t();j.boot();D||K?.focus();var q=0;window.addEventListener("resize",()=>{q&&cancelAnimationFrame(q),q=requestAnimationFrame(()=>{j.refreshIntroIfPristine(),q=0})});if(D){let e=0;document.addEventListener("touchend",t=>{if(!t.cancelable||t.touches.length>0)return;let n=performance.now();n-e<=300&&t.preventDefault(),e=n},{passive:!1})}
