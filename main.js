function je(e,t,n){for(let o of n)e(o.name,o.summary,o.usage,i=>t.get(o.targetCommand)?.execute(i,o.args))}function ee({profile:e,commands:t,registerCommand:n}){n("whoami","About me","whoami",o=>{o.printLine(`${String(e.name)} \u2014 ${String(e.role)} (${String(e.location)})`)}),je(n,t,[{name:"bio",summary:"Alias: cat bio.txt",usage:"bio",targetCommand:"cat",args:["bio.txt"]},{name:"projects",summary:"Alias: cat projects.txt",usage:"projects",targetCommand:"cat",args:["projects.txt"]},{name:"socials",summary:"Alias: cat socials.txt",usage:"socials",targetCommand:"cat",args:["socials.txt"]},{name:"cv",summary:"Alias: open cv",usage:"cv",targetCommand:"open",args:["cv"]},{name:"skills",summary:"List my skills",usage:"skills",targetCommand:"cat",args:["skills.txt"]},{name:"education",summary:"List my education",usage:"education",targetCommand:"cat",args:["education.txt"]},{name:"roles",summary:"List my roles and experience",usage:"roles",targetCommand:"cat",args:["roles.txt"]}])}function Fe(e,t){let n=t.toLowerCase();return Array.from(new Set(e)).filter(o=>o.toLowerCase().startsWith(n)).sort()}function W(e,t){return e.argIndex!==0?[]:Fe(t,e.prefix??"")}var Ne=new Set(["file","bio","link","links","projects","education"]);function Ue(e,t){let{t:n,s:o}=e.seg,i=t.lines.flatMap((l,s)=>[n(l),...s<t.lines.length-1?[n(`

`)]:[]]);e.printLine([o("accent",`About
`),...i],"muted")}function We(e,t){e.printPre(String(t.content),"ok")}function qe(e,t,n){let{t:o,l:i,s:l}=e.seg;e.printLine([o(`${t} -> `),i(n.href),o(" (click me! or run "),l("accent",`open ${t}`),o(")")],"muted")}function Ke(e,t){let{t:n,l:o,s:i}=e.seg,l=(r,m)=>" ".repeat(Math.max(0,m-r.length)),s=Object.entries(t.items).flatMap(([r,m])=>[n(`${r}: `.padEnd(10," ")),o(m,r),n(l(r,8)),n(" (or run "),i("accent",`open ${r}`),n(`)
`)]);e.printLine(s,"muted")}function Ge(e,t){let{t:n,l:o,s:i}=e.seg,l=t.projects.flatMap(s=>[i("accent",`${s.name}
`),n(`${s.desc}
`),...s.repoLink?[o(s.repoLink),n(`
`)]:[n("")],...s.deployedLink?[o(s.deployedLink),n(`
`)]:[n("")],s.tags&&s.tags.length>0?n(`Tech stack: ${s.tags.join(", ")}
`):n(""),n(`
`)]);e.printLine(l,"muted")}function ze(e,t){let{t:n,l:o,s:i}=e.seg,l=t.education.flatMap(s=>[i("accent",`${s.qualification} - ${s.institution}
`),n(`${s.location} | ${s.startDate} - ${s.endDate} | ${s.grade}
`),s.description?n(`${s.description}
`):n(""),...s.dissertation?[n("Dissertation: "),o(s.dissertation.link,s.dissertation.title),n(`
`)]:[n("")],s.tags&&s.tags.length>0?n(`Tags: ${s.tags.join(", ")}
`):n(""),n(`
`)]);e.printLine(l,"muted")}function Ve(e,t,n){switch(n.type){case"bio":Ue(e,n);break;case"file":We(e,n);break;case"link":qe(e,t,n);break;case"links":Ke(e,n);break;case"projects":Ge(e,n);break;case"education":ze(e,n);break;default:e.printLine(`cat: ${t}: Not a file`,"error");break}}function te(e){e("cat","Print file contents","cat <file>",(t,n)=>{let o=n[0];if(!o){t.printLine("cat: missing file operand","error");return}let i=t.resolveHomeItem(o);if(!i){t.printLine(`cat: ${o}: No such file`,"error");return}Ve(t,o,i)},(t,n)=>{let o=t.listHome().filter(i=>{let l=t.resolveHomeItem(i);return l?Ne.has(l.type):!1});return W(n,o)})}function O(e){let t=new Map;return e.links.github&&t.set("github",e.links.github),e.links.linkedin&&t.set("linkedin",e.links.linkedin),e.filePaths.cv&&t.set("cv",e.filePaths.cv),e.filePaths.dissertation&&t.set("dissertation",e.filePaths.dissertation),e.email&&t.set("email",`mailto:${e.email}`),t}function ne({registerCommand:e,isMobile:t}){e("ls","List files (only ~ supported)","ls [path]",(n,o)=>{if((o[0]??"~")!=="~"){n.printLine('ls: only "~" is supported in this tiny filesystem',"error");return}n.printPre(n.listHome().join(`
`),"ok")}),te(e),e("open","Open link","open <alias>",(n,o)=>{let{t:i,l}=n.seg,s=o[0],r=(s??"").toLowerCase();if(!r){n.printLine(t?"open: missing target (see the suggestions for valid options)":"open: missing target (press Tab to see valid options)","error");return}let m=O(n.profile);if(m.has(r)){let u=m.get(r);u&&(n.printLine([i("Opening: "),l(u)],"muted"),n.openUrl(u));return}n.printLine(`open: unknown target "${s}"`,"error")},(n,o)=>{let i=O(n.profile);return W(o,i.keys())})}function oe({commands:e,registerCommand:t,isMobile:n}){t("help","Show this help","help",o=>{let{s:i}=o.seg;o.printLine([i("accent","Available commands")],"ok");let l=Array.from(e.values()).sort((r,m)=>r.name.localeCompare(m.name)).map(r=>`${r.name.padEnd(12," ")} ${r.summary.padEnd(32," ")} ${r.usage}`),s=[`${"COMMAND".padEnd(12," ")} ${"SUMMARY".padEnd(32," ")} USAGE`,"",...l,"",n?"Tips: use command buttons below, or tap Custom command for autocomplete and history.":"Tips: use \u2191/\u2193 for history and Tab for autocomplete (Shift+Tab to move focus)."];o.printPre(s.join(`
`),"ok")}),t("clear","Clear the screen","clear",o=>o.clear()),t("date","Print local date/time","date",o=>{o.printLine(new Date().toString(),"muted")}),t("echo","Print args","echo <text>",(o,i)=>{o.printLine(i.join(" "))}),t("theme","Switch theme","theme [dark|light|toggle]",(o,i)=>{let l=(i[0]??"").toLowerCase(),s=o.theme.get();if(!l){o.printLine(`theme: current is "${s}"`,"muted"),o.printLine("Try: theme dark | theme light | theme toggle","muted");return}if(l==="toggle"){o.theme.toggle(),o.printLine(`theme: set to "${o.theme.get()}"`,"muted");return}if(l!=="dark"&&l!=="light"){o.printLine('theme: expected "dark" or "light"',"error");return}o.theme.set(l),o.printLine(`theme: set to "${l}"`,"muted")},(o,i)=>{if(i.argIndex!==0)return[];let l=i.prefix.toLowerCase();return["dark","light","toggle"].filter(s=>s.startsWith(l))})}function ie({profile:e,isMobile:t=!1}){let n=new Map,o=(i,l,s,r,m)=>{n.set(i,{name:i,summary:l,usage:s,execute:r,complete:m})};return oe({commands:n,registerCommand:o,isMobile:t}),ne({registerCommand:o,isMobile:t}),ee({profile:e,commands:n,registerCommand:o}),{commands:n}}function re(e){return{"~":{type:"dir",children:{"README.txt":{type:"file",content:["Welcome.","","Try: help, ls, cat README.txt, bio, projects, socials, open cv, open github"].join(`
`)},"bio.txt":{type:"bio",lines:e.bio},"projects.txt":{type:"projects",projects:e.projects},"socials.txt":{type:"links",items:e.links},"skills.txt":{type:"file",content:e.skills.join(", ")},"education.txt":{type:"education",education:e.education},"roles.txt":{type:"file",content:e.roles.map(t=>{let n=t.title??"Untitled Role",o=t.company?` at ${t.company}`:"",i=t.location?` in ${t.location}`:"",l=` (${t.startDate} - ${t.endDate??"Present"})`,s=t.description?`
  ${t.description}`:"";return`- ${n}${o}${i}${l}${s}`}).join(`

`)},"cv.pdf":{type:"link",href:e.filePaths.cv},"dissertation.pdf":{type:"link",href:e.filePaths.dissertation},"todo.md":{type:"file",content:e.todo.map(t=>`- [ ] ${t}`).join(`
`)}}}}}function se(e){let t=e["~"];if(!t||t.type!=="dir")throw new Error("Invalid filesystem: missing home dir");return t}function ae(e){return Object.keys(se(e).children).sort()}function le(e,t){return se(e).children[t]}function F(e){let t=[],n="",o=null,i=!1;for(let l=0;l<e.length;l++){let s=e[l];if(i){n+=s,i=!1;continue}if(s==="\\"){i=!0;continue}if(o){if(s===o){o=null;continue}n+=s;continue}if(s==='"'||s==="'"){o=s;continue}if(/\s/.test(s)){n&&(t.push(n),n="");continue}n+=s}return i&&(n+="\\"),n&&t.push(n),{tokens:t,endsWithWhitespace:/\s$/.test(e)}}function me({commands:e,getContext:t,onListMatches:n}){let o=null;function i(m,u=F(m)){let{tokens:a,endsWithWhitespace:c}=u;if(a.length===0)return null;let p=Array.from(e.keys()).sort();if(a.length===1&&!c){let L=a[0],w=p.filter(R=>R.startsWith(L));return{kind:"cmd",prefix:L,matches:w,buildValue:R=>R}}let f=a[0],C=e.get(f);if(!C?.complete)return null;let v=a.slice(1),M=c?"":v[v.length-1]??"",y=c?v.length:Math.max(0,v.length-1),g={line:m,tokens:a,args:v,endsWithWhitespace:c,argIndex:y,prefix:M},T=C.complete(t(),g)||[];return{kind:`arg:${f}`,prefix:M,matches:T,buildValue:L=>[...c?a:a.slice(0,-1),Xe(L)].join(" ")}}function l(m){let u=i(m);if(!u)return[];let a=new Set,c=[];for(let p of u.matches){let f=u.buildValue(p);a.has(f)||(a.add(f),c.push(f))}return c}function s(m){if(o?.phase==="menu"){let c=o.values.indexOf(m);if(c!==-1){let p=(c+1)%o.values.length;return o.index=p,o.lastValue=o.values[p],o.lastValue}o=null}let u=F(m);if(u.tokens.length===0)return"";let a=i(m,u);return a?r(a.kind,m,a.prefix,a.matches,a.buildValue)??m:m}function r(m,u,a,c,p){if(c.length===0)return o=null,null;if(c.length===1)return o=null,p(c[0]);let f=Ye(c),C=Qe(c);if(C.length>a.length){let M=p(C);return o={phase:"armed",kind:m,baseInput:M,prefix:C,matchesKey:f,values:c.map(p),index:-1,lastValue:null},M}if(!(o&&o.kind===m&&o.baseInput===u&&o.prefix===a&&o.matchesKey===f))return o={phase:"armed",kind:m,baseInput:u,prefix:a,matchesKey:f,values:c.map(p),index:-1,lastValue:null},null;if(o?.phase==="armed")return n(c),o.phase="listed",null;if(o?.phase==="listed"){let M=o.values[0];return o.phase="menu",o.index=0,o.lastValue=M,M}return null}return{autocomplete:s,listCompletions:l}}function Xe(e){return/\s/.test(e)?`"${e.replace(/"/g,'\\"')}"`:e}function Qe(e){if(e.length===0)return"";let t=e[0];for(let n=1;n<e.length;n++){let o=e[n],i=0;for(;i<t.length&&i<o.length&&t[i]===o[i];)i++;if(t=t.slice(0,i),t==="")break}return t}function Ye(e){return e.join("\0")}var H=e=>({type:"text",text:e}),S=(e,t)=>({type:"span",className:e,text:t}),Je=(e,t)=>({type:"link",href:e,text:t});function ce({renderer:e,profile:t,fs:n,commands:o,openUrl:i,theme:l,isMobile:s}){let r={history:[],historyIndex:-1,hasRunCommand:!1,hasBooted:!1};function m(){r.hasBooted=!0,u()}function u(){e.clear(),C(),y([H("Type "),S("accent","help"),H(` to see commands.
`),S("accent","Tips: "),H(s?"use the command buttons below, or tap Custom command for autocomplete and history.":"use \u2191/\u2193 for history and Tab for autocomplete (Shift+Tab to move focus).")],"muted"),e.scrollToBottom()}function a(){!r.hasBooted||r.hasRunCommand||u()}function c(d){return d.reduce((h,k)=>Math.max(h,k.length),0)}function p(d,h){return d.length<=h?d:h<=1?"\u2026":`${d.slice(0,h-1)}\u2026`}function f(d,h){let k=p(d,h),x=Math.max(0,h-k.length),A=Math.floor(x/2),P=x-A;return{leftPad:" ".repeat(A),text:k,rightPad:" ".repeat(P)}}function C(){let d=t.nameAsciiArt??[],h=c(d),k=e.getColumns();if(d.length>0&&h<=k){g(d.join(`
`),"accent"),y(t.role,"muted");return}v()}function v(){let d=String(t.name).trim()||"Portfolio",h=String(t.role).trim()||"Software Engineer",k=e.getColumns(),x=M(k-6,10,54),A=Math.min(20,x),P=Math.max(d.length,h.length,A-4),$=M(P+4,A,x),G=`\u256D${"\u2500".repeat($+2)}\u256E`,Re=`\u251C${"\u2500".repeat($+2)}\u2524`,$e=`\u2570${"\u2500".repeat($+2)}\u256F`,Z=(Oe,De=!0)=>{let z=f(Oe,$);return[S("banner-border","\u2502 "),S("banner-border",z.leftPad),S("banner-text",z.text),S("banner-border",z.rightPad),S("banner-border",De?` \u2502
`:" \u2502")]},Be=[S("banner-border",`${G}
`),...Z(d),S("banner-border",`${Re}
`),...Z(h),S("banner-border",$e)];y(Be,"banner",!1)}function M(d,h,k){return Math.max(h,Math.min(k,d))}function y(d,h="ok",k=!0){let x=Array.isArray(d)?d:[H(String(d))];e.printLine(x,h,k)}function g(d,h="ok"){e.printPre(String(d),h)}function T(d){y([S("cmd","$"),H(" "),S("cmd",d)],"cmd")}function L(){return ae(n)}function w(d){return le(n,d)}function R(){return{profile:t,fs:n,theme:l,openUrl:i,printLine:y,printPre:g,seg:{t:H,s:S,l:Je},listHome:L,resolveHomeItem:w,clear:e.clear}}let b=me({commands:o,getContext:R,onListMatches:d=>{let h=[];d.forEach((k,x)=>{x&&h.push(H("   ")),h.push(S("accent",k))}),y(h,"muted"),e.scrollToBottom()}});async function E(d){let h=d.trim();if(!h)return;r.hasRunCommand=!0,T(h);let k=F(h),[x,...A]=k.tokens,P=o.get(x);if(!P){y([H("Command not found: "),S("error",x)],"error"),y([H("Try: "),S("accent","help")],"muted");return}try{await P.execute(R(),A)}catch($){let G=$ instanceof Error?$.message:String($);y([S("error","Error:"),H(" "),H(G)],"error")}}function _(d){r.history.push(d),r.historyIndex=r.history.length}function I(){return r.history.length===0?null:(r.historyIndex=Math.max(0,r.historyIndex-1),r.history[r.historyIndex]??"")}function B(){return r.history.length===0?null:(r.historyIndex=Math.min(r.history.length,r.historyIndex+1),r.history[r.historyIndex]??"")}function J(d=6){let h=Math.max(0,Math.floor(d));if(h===0)return[];let k=[],x=new Set;for(let A=r.history.length-1;A>=0;A--){let P=r.history[A]??"";if(!(P.length===0||x.has(P))&&(x.add(P),k.push(P),k.length>=h))break}return k}return{boot:m,run:E,addHistory:_,historyUp:I,historyDown:B,listRecentHistory:J,listCompletions:d=>b.listCompletions(d),autocomplete:d=>b.autocomplete(d),refreshIntroIfPristine:a}}var N={name:"Bradley Watson",nameAsciiArt:["____________  ___ ______   _    _  ___ _____ _____  _____ _   _","| ___ \\ ___ \\/ _ \\|  _  \\ | |  | |/ _ \\_   _/  ___||  _  | \\ | |","| |_/ / |_/ / /_\\ \\ | | | | |  | / /_\\ \\| | \\ `--. | | | |  \\| |","| ___ \\    /|  _  | | | | | |/\\| |  _  || |  `--. \\| | | | . ` |","| |_/ / |\\ \\| | | | |/ /  \\  /\\  / | | || | /\\__/ /\\ \\_/ / |\\  |","\\____/\\_| \\_\\_| |_/___/    \\/  \\/\\_| |_/\\_/ \\____/  \\___/\\_| \\_/"],role:"Software Engineer",location:"Leeds, UK",email:"you@example.com",links:{github:"https://github.com/br-watson",linkedin:"https://www.linkedin.com/in/bradleyrwatson"},filePaths:{cv:"./assets/cv.pdf",dissertation:"./assets/diss.pdf"},bio:["Software engineer specializing in backend systems, cloud platforms, CI/CD automation, and end-to-end data pipelines, building reliable, scalable production systems.","Current interests: distributed systems design, event-driven data pipelines, observability, CI/CD, and developer tooling for cloud-native backends.","This site is a small terminal-style portfolio because standard portfolio sites are kinda boring."],projects:[{name:"Terminal Portfolio",desc:"This project! An interactive terminal-style portfolio built with TypeScript, HTML, and CSS.",repoLink:"https://github.com/br-watson/br-watson.github.io",deployedLink:"https://bwatson.uk",tags:["TypeScript","HTML","CSS"]},{name:"Darts Score Tracker",desc:"All the darts trackers my friends and I could find were either too basic or couldn't handle more than 4 players, so I built this simple one to track our games and stats.",repoLink:"https://github.com/br-watson/darts-games",deployedLink:"https://bwatson.uk/darts-games",tags:["TypeScript","React","Next.js","Tailwind CSS"]},{name:"Planning Poker App",desc:"Built a free, no-login planning poker app for my team's sprint refinements after existing tools were paid or lacked custom decks. It supports multiple rooms, custom card sets, and real-time updates.",deployedLink:"https://poker.bwatson.uk/",tags:["TypeScript","React","Tailwind CSS","Firebase"]},{name:"TODO...",desc:"Lorem ipsum dolor sit amet, consectetur adipiscing elit.",repoLink:"https://github.com/",tags:["TODO..."]}],skills:["TypeScript","AWS","TODO..."],education:[{qualification:"Master of Mathematics (MMath)",institution:"Durham University",location:"Durham, UK",startDate:"2018",endDate:"2022",grade:"First Class Honours (1st)",description:"Specialised in mathematical analysis, geometry, and algebra. Dissertation on isometries of Riemannian manifolds.",tags:["Mathematical analysis","Geometry","Algebra","Calculus","Linear algebra","Partial differential equations"],dissertation:{title:"Isometries of Riemannian Manifolds",link:"./assets/diss.pdf"}},{qualification:"A-Levels",institution:"Notre Dame Sixth Form College",location:"Leeds, UK",startDate:"2016",endDate:"2018",grade:"A*AAA",tags:["Mathematics","Further Mathematics","Computer Science","Chemistry"]}],roles:[{title:"Software Engineer",company:"Sky UK",location:"Leeds, UK",startDate:"Sep 2024",description:"TODO..."},{title:"Associate Software Engineer",company:"Sky UK",location:"Leeds, UK",startDate:"Sep 2023",endDate:"Sep 2024",description:"TODO..."}],todo:["Finish writing profile (bio, experience, projects, skills etc.)","Add more commands","Improve txt files output formatting","Make actual CV","Write README","Make sure accessibility is good","Make sure performance is good","Add my actual email","Write tests"]};function ue(e){return function(n){let o=new Set(["https:","mailto:"]);try{let i=new URL(n,window.location.href);if(!o.has(i.protocol)&&i.origin!==window.location.origin){e.show("Blocked unsafe URL");return}}catch{e.show("Invalid URL");return}window.open(String(n),"_blank","noopener,noreferrer")}}function Ze({enableMobileAssist:e,mobileAssist:t,mobileSuggestionsHint:n,mobileSuggestions:o,mobileEnter:i}){return!e||!(t instanceof HTMLElement)||!(n instanceof HTMLElement)||!(o instanceof HTMLElement)||!(i instanceof HTMLButtonElement)?null:{container:t,hint:n,suggestions:o,enter:i}}function et(e){requestAnimationFrame(()=>{e.selectionStart=e.selectionEnd=e.value.length})}function U(e,t){e.value=t,et(e)}function tt(e,t){let n=document.createElement("button");return n.type="button",n.className="mobile-suggestion",n.dataset.kind=t,n.dataset.value=e,n.setAttribute("aria-label",`Insert ${e}`),n.title=e,n.textContent=e,n}function nt(e,t){let n=e.trim().length===0,o=n?"history":"completion",i=n?t.listRecentHistory(6):t.listCompletions(e);return{type:o,values:i.slice(0,6)}}function ot(e,t,n){if(n==="completion"){let o=/\s$/.test(t)?t:`${t} `;U(e,o);return}U(e,t)}function de({form:e,input:t,terminal:n,renderer:o,mobileAssist:i,mobileSuggestionsHint:l,mobileSuggestions:s,mobileEnter:r,enableMobileAssist:m=!1}){let u=Ze({enableMobileAssist:m,mobileAssist:i,mobileSuggestionsHint:l,mobileSuggestions:s,mobileEnter:r}),a=!1;function c(){a||(a=!0,t.removeAttribute("placeholder"))}function p(){t.focus({preventScroll:!0})}function f(){if(!u)return;let{type:g,values:T}=nt(t.value,n);u.suggestions.replaceChildren(...T.map(L=>tt(L,g))),u.suggestions.hidden=T.length===0,u.hint.hidden=T.length>0}async function C({blurAfterRun:g=!1}={}){let T=t.value;if(t.value="",T.trim().length>0&&(c(),n.addHistory(T),await n.run(T)),o.scrollToBottom(),f(),g){t.blur();return}p()}function v(){e.addEventListener("submit",g=>{g.preventDefault(),C()})}function M(){t.addEventListener("input",()=>{f()}),t.addEventListener("keydown",g=>{if(g.altKey||g.ctrlKey||g.metaKey)return;let T=!1;if(g.key==="ArrowUp"){g.preventDefault();let L=n.historyUp();if(L===null)return;U(t,L),T=!0}if(g.key==="ArrowDown"){g.preventDefault();let L=n.historyDown();if(L===null)return;U(t,L),T=!0}if(g.key==="Tab"){if(g.shiftKey)return;g.preventDefault(),U(t,n.autocomplete(t.value)),T=!0}T&&f()})}function y(){u&&(u.container.hidden=!1,u.suggestions.addEventListener("click",g=>{let T=g.target;if(!(T instanceof Element))return;let L=T.closest("button[data-value]");if(!(L instanceof HTMLButtonElement))return;let w=L.dataset.value;if(!w)return;let R=L.dataset.kind;ot(t,w,R),f()}),u.enter.addEventListener("click",()=>{C({blurAfterRun:!0})}))}return v(),M(),y(),!u&&i instanceof HTMLElement&&(i.hidden=!0),f(),{focus:p,refreshMobileAssist:f,markFirstCommandSubmitted:c}}var pe="terminal-theme";function it(e){return e==="light"||e==="dark"}function fe(e){return e.toLowerCase()==="light"?"light":"dark"}function ge(e){return e.toLowerCase()==="light"?"dark":"light"}function he({themeToggle:e,toast:t,storage:n=window.localStorage,doc:o=document,matchMedia:i=window.matchMedia?.bind(window)}){function l(){let p=n.getItem(pe);return it(p)?p:null}function s(){return i?.("(prefers-color-scheme: light)")?.matches?"light":"dark"}let r=l()??s(),m=fe(r);function u(p,f={}){let{persist:C=!0,announce:v=!0,force:M=!1}=f,y=fe(p),g=y!==m;if(m=y,(g||M)&&(o.documentElement.dataset.theme=y,e)){let T=ge(y);e.setAttribute("aria-pressed",String(y==="light")),e.setAttribute("aria-label",`Switch to ${T.toLowerCase()} theme`),e.textContent=T}C&&n.setItem(pe,y),v&&g&&t.show(`theme: ${y}`)}let a={get:()=>m,set:p=>u(p,{persist:!0,announce:!0}),toggle:()=>u(ge(m),{persist:!0,announce:!0})};e&&e.addEventListener("click",()=>a.toggle());function c(){u(r,{persist:!1,announce:!1,force:!0})}return{controller:a,applyInitialTheme:c}}function ye(e,t=1500){let n;function o(i){e&&(e.textContent=i,e.classList.add("show"),e.setAttribute("aria-hidden","false"),n&&window.clearTimeout(n),n=window.setTimeout(()=>{e.classList.remove("show"),e.setAttribute("aria-hidden","true")},t))}return{show:o}}function be({screen:e}){function t(){let a=document.createElement("span");a.className="line ok",a.style.position="absolute",a.style.visibility="hidden",a.style.whiteSpace="pre",a.textContent="M",e.appendChild(a);let c=a.getBoundingClientRect().width;return e.removeChild(a),c||8}function n(){let a=t();return Math.max(1,Math.floor(e.clientWidth/a))}function o(a){let c=new Set(["https:","mailto:"]);try{let p=new URL(a,window.location.href);return c.has(p.protocol)?!0:p.origin===window.location.origin}catch{return!1}}function i(a){if(a.type==="text")return document.createTextNode(a.text);if(a.type==="span"){let c=document.createElement("span");return c.className=a.className,c.textContent=a.text,c}if(a.type==="link"){if(!o(a.href))return document.createTextNode(a.text??a.href);let c=document.createElement("a");return c.href=a.href,c.target="_blank",c.rel="noopener noreferrer",c.textContent=a.text??a.href,c}return document.createTextNode("")}function l(a){let c=document.createDocumentFragment();for(let p of a)c.appendChild(i(p));return c}function s(a,c="ok",p=!0){let f=document.createElement("div");f.className="block",p&&f.classList.add("wrap-text");let C=document.createElement("div");C.className=`line ${c}`,p&&C.classList.add("wrap-text"),C.appendChild(l(a)),f.appendChild(C),e.appendChild(f)}function r(a,c="ok"){let p=document.createElement("div");p.className="block";let f=document.createElement("div");f.className=`line ${c}`;let C=document.createElement("pre");C.className="pre",C.textContent=a,f.appendChild(C),p.appendChild(f),e.appendChild(p)}function m(){for(;e.firstChild;)e.removeChild(e.firstChild)}function u(){e.scrollTop=e.scrollHeight}return{printLine:s,printPre:r,clear:m,scrollToBottom:u,getColumns:n}}function rt(e){requestAnimationFrame(()=>{e.selectionStart=e.selectionEnd=e.value.length})}function Ce(e,t){e.value=t,rt(e)}function V(e){e.scrollLeft=0,e.scrollTo({left:0,top:0,behavior:"auto"}),requestAnimationFrame(()=>{e.scrollLeft=0})}function st(e){let t=[],n=new Set;for(let o of e){let i=o.command.trim();if(!i)continue;let l=o.kind??"simple",s=`${l}:${i}`;n.has(s)||(n.add(s),t.push({command:i,kind:l,label:o.label?.trim()||i}))}return t}function Te(e,t,n){let o=document.createElement("button");return o.type="button",o.className=t==="arg"?"mobile-command mobile-command-arg":"mobile-command",o.textContent=e.label,o.setAttribute("aria-label",t==="arg"?`Run ${n??e.command}`:e.kind==="withArgs"?`Choose ${e.command} argument`:`Run ${e.command}`),t==="arg"&&n?(o.dataset.run=n,o):(o.dataset.command=e.command,o.dataset.kind=e.kind,o)}function at(e){return e.length<2?e:e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1).replace(/\\"/g,'"'):e}function lt(e,t){let n=`${e} `;if(!t.startsWith(n))return t;let o=t.slice(n.length).trim();return at(o)||t}function mt(e,t){let n=`${e} `,o=t.listCompletions(n),i=[],l=new Set;for(let s of o){let r=s.trim();!r||!r.startsWith(n)||l.has(r)||(l.add(r),i.push(r))}return i}function ct(e,t){let n=document.createElement("button");return n.type="button",n.className="mobile-custom-suggestion",n.dataset.kind=t,n.dataset.value=e,n.textContent=e,n.title=e,n.setAttribute("aria-label",`Insert ${e}`),n}function ut(e,t){let n=e.trim().length===0,o=n?"history":"completion",i=n?t.listRecentHistory(6):t.listCompletions(e);return{type:o,values:i.slice(0,6)}}function dt(e,t,n){if(n==="completion"){let o=/\s$/.test(t)?t:`${t} `;Ce(e,o);return}Ce(e,t)}function Le({enabled:e,container:t,list:n,back:o,customTrigger:i,dialog:l,form:s,input:r,suggestions:m,suggestionsHint:u,cancel:a,terminal:c,commands:p,onRunCommand:f}){if(!e){t instanceof HTMLElement&&(t.hidden=!0),l instanceof HTMLElement&&(l.hidden=!0);return}if(!(t instanceof HTMLElement)||!(n instanceof HTMLElement)||!(o instanceof HTMLButtonElement)||!(i instanceof HTMLButtonElement)||!(l instanceof HTMLElement)||!(s instanceof HTMLFormElement)||!(r instanceof HTMLInputElement)||!(a instanceof HTMLButtonElement))return;let C=st(p),v=!1,M=!1,y=async b=>{let E=b.trim();if(!(E.length===0||v)){v=!0;try{await f(E)}finally{v=!1}}},g=()=>{M=!1,n.replaceChildren(...C.map(b=>Te(b,"root"))),V(n),o.hidden=!0,i.hidden=!1},T=b=>{let E=mt(b,c);if(E.length===0){(async()=>(await y(b),g()))();return}M=!0;let _=E.map(I=>Te({command:b,kind:"simple",label:lt(b,I)},"arg",I));n.replaceChildren(..._),V(n),o.hidden=!1,i.hidden=!0},L=()=>{if(!(m instanceof HTMLElement)||!(u instanceof HTMLElement))return;let{type:b,values:E}=ut(r.value,c);m.replaceChildren(...E.map(_=>ct(_,b))),m.hidden=E.length===0,u.hidden=E.length>0},w=()=>{l.hidden=!0,r.value="",L(),r.blur(),i.hidden||i.focus({preventScroll:!0})},R=()=>{l.hidden=!1,L(),requestAnimationFrame(()=>{r.focus({preventScroll:!0})})};g(),t.hidden=!1,l.hidden=!0,L(),n.addEventListener("click",b=>{let E=b.target;if(!(E instanceof Element))return;let _=E.closest("button[data-run]");if(_ instanceof HTMLButtonElement){let d=_.dataset.run?.trim();if(!d)return;(async()=>(await y(d),g()))();return}let I=E.closest("button[data-command]");if(!(I instanceof HTMLButtonElement))return;let B=I.dataset.command?.trim();if(!B)return;if(I.dataset.kind==="withArgs"){T(B);return}(async()=>(await y(B),V(n)))()}),o.addEventListener("click",()=>{g()}),i.addEventListener("click",R),a.addEventListener("click",w),r.addEventListener("input",()=>{L()}),m?.addEventListener("click",b=>{let E=b.target;if(!(E instanceof Element))return;let _=E.closest("button[data-value]");if(!(_ instanceof HTMLButtonElement))return;let I=_.dataset.value;if(!I)return;let B=_.dataset.kind;dt(r,I,B),L()}),l.addEventListener("click",b=>{let E=b.target;E instanceof Element&&E.closest("[data-dialog-close]")&&w()}),document.addEventListener("keydown",b=>{if(b.key==="Escape"){if(!l.hidden){b.preventDefault(),w();return}M&&(b.preventDefault(),g())}}),s.addEventListener("submit",b=>{b.preventDefault();let E=r.value.trim();E&&(async()=>(await y(E),w()))()})}function Ee({container:e,list:t,profile:n,onRunCommand:o,aliases:i}){if(!(e instanceof HTMLElement)||!(t instanceof HTMLElement))return;let l=O(n),s=i.filter(r=>l.has(r)).map(r=>`open ${r}`);if(t.replaceChildren(),s.length===0){e.hidden=!0;return}for(let r of s){let m=document.createElement("button");m.type="button",m.className="quick-link",m.dataset.command=r,m.setAttribute("aria-label",`Run ${r}`),m.title=r;let u=document.createElement("span");u.className="quick-link-sigil",u.textContent="$";let a=document.createElement("span");a.textContent=r,m.append(u,a),t.appendChild(m)}t.addEventListener("click",async r=>{let m=r.target;if(!(m instanceof Element))return;let u=m.closest("button[data-command]");if(!(u instanceof HTMLButtonElement))return;let a=u.dataset.command?.trim();a&&(r.detail>0&&u.blur(),await o(a))}),e.hidden=!1}function Q(e,t,n){if(!e||!t(e))throw new Error(n);return e}var pt=Q(document.getElementById("screen"),e=>e instanceof HTMLElement,"Screen element not found."),ft=Q(document.getElementById("prompt"),e=>e instanceof HTMLFormElement,"Prompt form element not found."),X=Q(document.getElementById("input"),e=>e instanceof HTMLInputElement,"Prompt input element not found."),gt=document.getElementById("themeToggle"),ht=document.getElementById("toast"),ke=document.querySelector(".title"),Me=document.querySelector(".ps1"),yt=document.getElementById("quickLinks"),bt=document.getElementById("quickLinksList"),Ct=document.getElementById("mobileCommandTray"),Tt=document.getElementById("mobileCommandList"),Se=document.getElementById("mobileTrayBack"),ve=document.getElementById("mobileCustomTrigger"),Lt=document.getElementById("mobileCommandDialog"),xe=document.getElementById("mobileCustomForm"),we=document.getElementById("mobileCustomInput"),Et=document.getElementById("mobileCustomSuggestions"),kt=document.getElementById("mobileCustomSuggestionsHint"),_e=document.getElementById("mobileCustomCancel"),D=window.matchMedia("(pointer: coarse)").matches,Ie="brad@portfolio",Mt=[{command:"help"},{command:"projects"},{command:"skills"},{command:"roles"},{command:"socials"},{command:"bio"},{command:"cat",kind:"withArgs"},{command:"open",kind:"withArgs"},{command:"cv"},{command:"theme"},{command:"clear"}];ke&&(ke.textContent=`${Ie}: ~`);Me&&(Me.textContent=Ie);var Ae=ye(ht),{controller:St,applyInitialTheme:vt}=he({themeToggle:gt,toast:Ae}),xt=ue(Ae),Y=be({screen:pt}),{commands:wt}=ie({profile:N,isMobile:D}),j=ce({renderer:Y,profile:N,fs:re(N),commands:wt,theme:St,openUrl:xt,isMobile:D}),K=de({form:ft,input:X,terminal:j,renderer:Y,enableMobileAssist:!1});async function Pe(e){let t=e.trim();t.length!==0&&(D&&document.activeElement===X&&X.blur(),K.markFirstCommandSubmitted(),j.addHistory(t),await j.run(t),Y.scrollToBottom(),K.refreshMobileAssist(),D||K.focus())}Ee({container:yt,list:bt,profile:N,aliases:["cv","github","linkedin"],onRunCommand:Pe});Le({enabled:D,container:Ct,list:Tt,back:Se instanceof HTMLButtonElement?Se:null,customTrigger:ve instanceof HTMLButtonElement?ve:null,dialog:Lt,form:xe instanceof HTMLFormElement?xe:null,input:we instanceof HTMLInputElement?we:null,suggestions:Et,suggestionsHint:kt,cancel:_e instanceof HTMLButtonElement?_e:null,terminal:j,commands:Mt,onRunCommand:Pe});vt();j.boot();D||K.focus();var q=0;window.addEventListener("resize",()=>{q&&cancelAnimationFrame(q),q=requestAnimationFrame(()=>{j.refreshIntroIfPristine(),q=0})});var He=0;document.addEventListener("touchend",e=>{let t=performance.now();e.touches.length>0||(t-He<=300&&e.preventDefault(),He=t)},{passive:!1});
