function Nt(t,e,n){for(let o of n)t(o.name,o.summary,o.usage,i=>e.get(o.targetCommand)?.execute(i,o.args))}function Z({profile:t,commands:e,registerCommand:n}){n("whoami","About me","whoami",o=>{o.printLine(`${String(t.name)} \u2014 ${String(t.role)} (${String(t.location)})`)}),Nt(n,e,[{name:"bio",summary:"Alias: cat bio.txt",usage:"bio",targetCommand:"cat",args:["bio.txt"]},{name:"projects",summary:"Alias: cat projects.txt",usage:"projects",targetCommand:"cat",args:["projects.txt"]},{name:"contact",summary:"Alias: cat contact.txt",usage:"contact",targetCommand:"cat",args:["contact.txt"]},{name:"cv",summary:"Alias: open cv",usage:"cv",targetCommand:"open",args:["cv"]},{name:"skills",summary:"List my skills",usage:"skills",targetCommand:"cat",args:["skills.txt"]},{name:"education",summary:"List my education",usage:"education",targetCommand:"cat",args:["education.txt"]},{name:"roles",summary:"List my roles and experience",usage:"roles",targetCommand:"cat",args:["roles.txt"]}])}function Ot(t,e){let n=e.toLowerCase();return Array.from(new Set(t)).filter(o=>o.toLowerCase().startsWith(n)).sort()}function q(t,e){return t.argIndex!==0?[]:Ot(e,t.prefix??"")}var Ut=new Set(["file","bio","link","links","projects","education"]);function qt(t,e){let{t:n,s:o}=t.seg,i=e.lines.flatMap((l,r)=>[n(l),...r<e.lines.length-1?[n(`

`)]:[]]);t.printLine([o("accent",`About
`),...i],"muted")}function Wt(t,e){t.printPre(String(e.content),"ok")}function Kt(t,e,n){let{t:o,l:i,s:l}=t.seg;t.printLine([o(`${e} -> `),i(n.href),o(" (click me! or run "),l("accent",`open ${e}`),o(")")],"muted")}function zt(t,e){let{t:n,l:o,s:i}=t.seg,l=(s,u)=>" ".repeat(Math.max(0,u-s.length)),r=Object.entries(e.items).flatMap(([s,u])=>{let d=s==="email"?u.replace("mailto:",""):s;return[n(`${s}: `.padEnd(10," ")),o(u,d),n(l(d,11)),n(" (or run "),i("accent",`open ${s}`),n(`)
`)]});t.printLine(r,"muted")}function Vt(t,e){let{t:n,l:o,s:i}=t.seg,l=e.projects.flatMap(r=>[i("accent",`${r.name}
`),n(`${r.desc}
`),...r.repoLink?[o(r.repoLink),n(`
`)]:[n("")],...r.deployedLink?[o(r.deployedLink),n(`
`)]:[n("")],r.tags&&r.tags.length>0?n(`Tech stack: ${r.tags.join(", ")}
`):n(""),n(`
`)]);t.printLine(l,"muted")}function Gt(t,e){let{t:n,l:o,s:i}=t.seg,l=e.education.flatMap(r=>[i("accent",`${r.qualification} - ${r.institution}
`),n(`${r.location} | ${r.startDate} - ${r.endDate} | ${r.grade}
`),r.description?n(`${r.description}
`):n(""),...r.dissertation?[n("Dissertation: "),o(r.dissertation.link,r.dissertation.title),n(`
`)]:[n("")],r.tags&&r.tags.length>0?n(`Tags: ${r.tags.join(", ")}
`):n(""),n(`
`)]);t.printLine(l,"muted")}function Qt(t,e,n){switch(n.type){case"bio":qt(t,n);break;case"file":Wt(t,n);break;case"link":Kt(t,e,n);break;case"links":zt(t,n);break;case"projects":Vt(t,n);break;case"education":Gt(t,n);break;default:t.printLine(`cat: ${e}: Not a file`,"error");break}}function tt(t){t("cat","Print file contents","cat <file>",(e,n)=>{let o=n[0];if(!o){e.printLine("cat: missing file operand","error");return}let i=e.resolveHomeItem(o);if(!i){e.printLine(`cat: ${o}: No such file`,"error");return}Qt(e,o,i)},(e,n)=>{let o=e.listHome().filter(i=>{let l=e.resolveHomeItem(i);return l?Ut.has(l.type):!1});return q(n,o)})}function F(t){let e=new Map;return t.links.github&&e.set("github",t.links.github),t.links.linkedin&&e.set("linkedin",t.links.linkedin),t.filePaths.cv&&e.set("cv",t.filePaths.cv),t.filePaths.dissertation&&e.set("dissertation",t.filePaths.dissertation),t.email&&e.set("email",`mailto:${t.email}`),e}function et({registerCommand:t,isMobile:e}){t("ls","List files (only ~ supported)","ls [path]",(n,o)=>{if((o[0]??"~")!=="~"){n.printLine('ls: only "~" is supported in this tiny filesystem',"error");return}n.printPre(n.listHome().join(`
`),"ok")}),tt(t),t("open","Open link","open <alias>",(n,o)=>{let{t:i,l}=n.seg,r=o[0],s=(r??"").toLowerCase();if(!s){n.printLine(e?"open: missing target (see the suggestions for valid options)":"open: missing target (press Tab to see valid options)","error");return}let u=F(n.profile);if(u.has(s)){let d=u.get(s);d&&(n.printLine([i("Opening: "),l(d)],"muted"),n.openUrl(d));return}n.printLine(`open: unknown target "${r}"`,"error")},(n,o)=>{let i=F(n.profile);return q(o,i.keys())})}function nt({commands:t,registerCommand:e,isMobile:n}){e("help","Show this help","help",o=>{let{s:i}=o.seg;o.printLine([i("accent","Available commands")],"ok");let l=Array.from(t.values()).sort((s,u)=>s.name.localeCompare(u.name)).map(s=>`${s.name.padEnd(12," ")} ${s.summary.padEnd(32," ")} ${s.usage}`),r=[`${"COMMAND".padEnd(12," ")} ${"SUMMARY".padEnd(32," ")} USAGE`,"",...l,"",n?'Tip: use the command buttons below, or tap "Custom" to type commands with autocomplete and history.':"Tips: use \u2191/\u2193 for history and Tab for autocomplete (Shift+Tab to move focus)."];o.printPre(r.join(`
`),"ok")}),e("clear","Clear the screen","clear",o=>o.clear()),e("date","Print local date/time","date",o=>{o.printLine(new Date().toString(),"muted")}),e("echo","Print args","echo <text>",(o,i)=>{o.printLine(i.join(" "))}),e("theme","Switch theme","theme [dark|light|toggle]",(o,i)=>{let l=(i[0]??"").toLowerCase(),r=o.theme.get();if(!l){o.printLine(`theme: current is "${r}"`,"muted"),o.printLine("Try: theme dark | theme light | theme toggle","muted");return}if(l==="toggle"){o.theme.toggle(),o.printLine(`theme: set to "${o.theme.get()}"`,"muted");return}if(l!=="dark"&&l!=="light"){o.printLine('theme: expected "dark" or "light"',"error");return}o.theme.set(l),o.printLine(`theme: set to "${l}"`,"muted")},(o,i)=>{if(i.argIndex!==0)return[];let l=i.prefix.toLowerCase();return["dark","light","toggle"].filter(r=>r.startsWith(l))})}function ot({profile:t,isMobile:e=!1}){let n=new Map,o=(i,l,r,s,u)=>{n.set(i,{name:i,summary:l,usage:r,execute:s,complete:u})};return nt({commands:n,registerCommand:o,isMobile:e}),et({registerCommand:o,isMobile:e}),Z({profile:t,commands:n,registerCommand:o}),{commands:n}}function it(t){return{"~":{type:"dir",children:{"bio.txt":{type:"bio",lines:t.bio},"projects.txt":{type:"projects",projects:t.projects},"contact.txt":{type:"links",items:{...t.links,email:`mailto:${t.email}`}},"skills.txt":{type:"file",content:t.skills.join(", ")},"education.txt":{type:"education",education:t.education},"roles.txt":{type:"file",content:t.roles.map(e=>{let n=e.title??"Untitled Role",o=e.company?` at ${e.company}`:"",i=e.location?` in ${e.location}`:"",l=` (${e.startDate} - ${e.endDate??"Present"})`,r=e.description?`
  ${e.description}`:"";return`- ${n}${o}${i}${l}${r}`}).join(`

`)},"cv.pdf":{type:"link",href:t.filePaths.cv},"dissertation.pdf":{type:"link",href:t.filePaths.dissertation},"todo.md":{type:"file",content:t.todo.map(e=>`- [ ] ${e}`).join(`
`)}}}}}function rt(t){let e=t["~"];if(!e||e.type!=="dir")throw new Error("Invalid filesystem: missing home dir");return e}function st(t){return Object.keys(rt(t).children).sort()}function at(t,e){return rt(t).children[e]}function N(t){let e=[],n="",o=null,i=!1;for(let l=0;l<t.length;l++){let r=t[l];if(i){n+=r,i=!1;continue}if(r==="\\"){i=!0;continue}if(o){if(r===o){o=null;continue}n+=r;continue}if(r==='"'||r==="'"){o=r;continue}if(/\s/.test(r)){n&&(e.push(n),n="");continue}n+=r}return i&&(n+="\\"),n&&e.push(n),{tokens:e,endsWithWhitespace:/\s$/.test(t)}}function lt({commands:t,getContext:e,onListMatches:n}){let o=Array.from(t.keys()).sort(),i=null;function l(d,a=N(d)){let{tokens:m,endsWithWhitespace:c}=a;if(m.length===0)return null;if(m.length===1&&!c){let R=m[0],P=o.filter(_=>_.startsWith(R));return{kind:"cmd",prefix:R,matches:P,buildValue:_=>_}}let y=m[0],b=t.get(y);if(!b?.complete)return null;let k=m.slice(1),S=c?"":k[k.length-1]??"",g=c?k.length:Math.max(0,k.length-1),x={line:d,tokens:m,args:k,endsWithWhitespace:c,argIndex:g,prefix:S},v=b.complete(e(),x)||[];return{kind:`arg:${y}`,prefix:S,matches:v,buildValue:R=>[...c?m:m.slice(0,-1),Yt(R)].join(" ")}}function r(d){let a=l(d);if(!a)return[];let m=new Set,c=[];for(let y of a.matches){let b=a.buildValue(y);m.has(b)||(m.add(b),c.push(b))}return c}function s(d){if(i?.phase==="menu"){let c=i.values.indexOf(d);if(c!==-1){let y=(c+1)%i.values.length;return i.index=y,i.lastValue=i.values[y],i.lastValue}i=null}let a=N(d);if(a.tokens.length===0)return"";let m=l(d,a);return m?u(m.kind,d,m.prefix,m.matches,m.buildValue)??d:d}function u(d,a,m,c,y){if(c.length===0)return i=null,null;if(c.length===1)return i=null,y(c[0]);let b=Jt(c),k=Xt(c);if(k.length>m.length){let g=y(k);return i={phase:"armed",kind:d,baseInput:g,prefix:k,matchesKey:b,values:c.map(y),index:-1,lastValue:null},g}if(!(i&&i.kind===d&&i.baseInput===a&&i.prefix===m&&i.matchesKey===b))return i={phase:"armed",kind:d,baseInput:a,prefix:m,matchesKey:b,values:c.map(y),index:-1,lastValue:null},null;if(i?.phase==="armed")return n(c),i.phase="listed",null;if(i?.phase==="listed"){let g=i.values[0];return i.phase="menu",i.index=0,i.lastValue=g,g}return null}return{autocomplete:s,listCompletions:r}}function Yt(t){return/\s/.test(t)?`"${t.replace(/"/g,'\\"')}"`:t}function Xt(t){if(t.length===0)return"";let e=t[0];for(let n=1;n<t.length;n++){let o=t[n],i=0;for(;i<e.length&&i<o.length&&e[i]===o[i];)i++;if(e=e.slice(0,i),e==="")break}return e}function Jt(t){return t.join("\0")}var w=t=>({type:"text",text:t}),L=(t,e)=>({type:"span",className:t,text:e}),Zt=(t,e)=>({type:"link",href:t,text:e});function mt({renderer:t,profile:e,fs:n,commands:o,openUrl:i,theme:l,isMobile:r}){let s={history:[],historyIndex:-1,hasRunCommand:!1,hasBooted:!1};function u(){s.hasBooted=!0,d()}function d(){t.clear(),b(),g([w("Type "),L("accent","help"),w(` to see commands.
`),L("accent","Tips: "),w(r?'use the command buttons below, or tap "Custom" to type commands with autocomplete and history.':"use \u2191/\u2193 for history and Tab for autocomplete (Shift+Tab to move focus).")],"muted"),t.scrollToBottom()}function a(){!s.hasBooted||s.hasRunCommand||d()}function m(p){return p.reduce((f,T)=>Math.max(f,T.length),0)}function c(p,f){return p.length<=f?p:f<=1?"\u2026":`${p.slice(0,f-1)}\u2026`}function y(p,f){let T=c(p,f),E=Math.max(0,f-T.length),H=Math.floor(E/2),A=E-H;return{leftPad:" ".repeat(H),text:T,rightPad:" ".repeat(A)}}function b(){let p=e.nameAsciiArt??[],f=m(p),T=t.getColumns();if(p.length>0&&f<=T){x(p.join(`
`),"accent"),g(e.role,"muted");return}k()}function k(){let p=String(e.name).trim()||"Portfolio",f=String(e.role).trim()||"Software Engineer",T=t.getColumns(),E=S(T-6,10,54),H=Math.min(20,E),A=Math.max(p.length,f.length,H-4),$=S(A+4,H,E),z=`\u256D${"\u2500".repeat($+2)}\u256E`,$t=`\u251C${"\u2500".repeat($+2)}\u2524`,Bt=`\u2570${"\u2500".repeat($+2)}\u256F`,J=(Dt,jt=!0)=>{let V=y(Dt,$);return[L("banner-border","\u2502 "),L("banner-border",V.leftPad),L("banner-text",V.text),L("banner-border",V.rightPad),L("banner-border",jt?` \u2502
`:" \u2502")]},Ft=[L("banner-border",`${z}
`),...J(p),L("banner-border",`${$t}
`),...J(f),L("banner-border",Bt)];g(Ft,"banner",!1)}function S(p,f,T){return Math.max(f,Math.min(T,p))}function g(p,f="ok",T=!0){let E=Array.isArray(p)?p:[w(String(p))];t.printLine(E,f,T)}function x(p,f="ok"){t.printPre(String(p),f)}function v(p){g([L("cmd","$"),w(" "),L("cmd",p)],"cmd")}function R(){return st(n)}function P(p){return at(n,p)}function _(){return{profile:e,fs:n,theme:l,openUrl:i,printLine:g,printPre:x,seg:{t:w,s:L,l:Zt},listHome:R,resolveHomeItem:P,clear:t.clear}}let U=lt({commands:o,getContext:_,onListMatches:p=>{let f=[];p.forEach((T,E)=>{E&&f.push(w("   ")),f.push(L("accent",T))}),g(f,"muted"),t.scrollToBottom()}});async function h(p){let f=p.trim();if(!f)return;s.hasRunCommand=!0,v(f);let T=N(f),[E,...H]=T.tokens,A=o.get(E);if(!A){g([w("Command not found: "),L("error",E)],"error"),g([w("Try: "),L("accent","help")],"muted");return}try{await A.execute(_(),H)}catch($){let z=$ instanceof Error?$.message:String($);g([L("error","Error:"),w(" "),w(z)],"error")}}function C(p){s.history.push(p),s.historyIndex=s.history.length}function M(){return s.history.length===0?null:(s.historyIndex=Math.max(0,s.historyIndex-1),s.history[s.historyIndex]??"")}function I(){return s.history.length===0?null:(s.historyIndex=Math.min(s.history.length,s.historyIndex+1),s.history[s.historyIndex]??"")}function B(p=6){let f=Math.max(0,Math.floor(p));if(f===0)return[];let T=[],E=new Set;for(let H=s.history.length-1;H>=0;H--){let A=s.history[H]??"";if(!(A.length===0||E.has(A))&&(E.add(A),T.push(A),T.length>=f))break}return T}return{boot:u,run:h,addHistory:C,historyUp:M,historyDown:I,listRecentHistory:B,listCompletions:p=>U.listCompletions(p),autocomplete:p=>U.autocomplete(p),refreshIntroIfPristine:a}}var O={name:"Bradley Watson",nameAsciiArt:["____________  ___ ______   _    _  ___ _____ _____  _____ _   _","| ___ \\ ___ \\/ _ \\|  _  \\ | |  | |/ _ \\_   _/  ___||  _  | \\ | |","| |_/ / |_/ / /_\\ \\ | | | | |  | / /_\\ \\| | \\ `--. | | | |  \\| |","| ___ \\    /|  _  | | | | | |/\\| |  _  || |  `--. \\| | | | . ` |","| |_/ / |\\ \\| | | | |/ /  \\  /\\  / | | || | /\\__/ /\\ \\_/ / |\\  |","\\____/\\_| \\_\\_| |_/___/    \\/  \\/\\_| |_/\\_/ \\____/  \\___/\\_| \\_/"],role:"Software Engineer",location:"Leeds, UK",email:"br@dley.dev",links:{github:"https://github.com/br-watson",linkedin:"https://www.linkedin.com/in/bradleyrwatson"},filePaths:{cv:"./assets/cv.pdf",dissertation:"./assets/diss.pdf"},bio:["Software engineer specializing in backend systems, cloud platforms, CI/CD automation, and end-to-end data pipelines, building reliable, scalable production systems.","Current interests: distributed systems design, event-driven data pipelines, observability, CI/CD, and developer tooling for cloud-native backends.","This site is a small terminal-style portfolio because standard portfolio sites are kinda boring."],projects:[{name:"Terminal Portfolio",desc:"This project! An interactive terminal-style portfolio built with TypeScript, HTML, and CSS.",repoLink:"https://github.com/br-watson/br-watson.github.io",deployedLink:"https://bwatson.uk",tags:["TypeScript","HTML","CSS"]},{name:"Darts Score Tracker",desc:"All the darts trackers my friends and I could find were either too basic or couldn't handle more than 4 players, so I built this simple one to track our games and stats.",repoLink:"https://github.com/br-watson/darts-games",deployedLink:"https://bwatson.uk/darts-games",tags:["TypeScript","React","Next.js","Tailwind CSS"]},{name:"Planning Poker App",desc:"Built a free, no-login planning poker app for my team's sprint refinements after existing tools were paid or lacked custom decks. It supports multiple rooms, custom card sets, and real-time updates.",deployedLink:"https://poker.bwatson.uk/",tags:["TypeScript","React","Tailwind CSS","Firebase"]}],skills:["TypeScript","AWS","TODO..."],education:[{qualification:"Master of Mathematics (MMath)",institution:"Durham University",location:"Durham, UK",startDate:"2018",endDate:"2022",grade:"First Class Honours (1st)",description:"Specialised in mathematical analysis, geometry, and algebra. Dissertation on isometries of Riemannian manifolds.",tags:["Mathematical analysis","Geometry","Algebra","Calculus","Linear algebra","Partial differential equations"],dissertation:{title:"Isometries of Riemannian Manifolds",link:"./assets/diss.pdf"}},{qualification:"A-Levels",institution:"Notre Dame Sixth Form College",location:"Leeds, UK",startDate:"2016",endDate:"2018",grade:"A*AAA",tags:["Mathematics","Further Mathematics","Computer Science","Chemistry"]}],roles:[{title:"Software Engineer",company:"Sky UK",location:"Leeds, UK",startDate:"Sep 2024"},{title:"Associate Software Engineer",company:"Sky UK",location:"Leeds, UK",startDate:"Sep 2023",endDate:"Sep 2024"}],todo:["Finish writing profile (experience, projects, skills etc.)","Add more commands","Improve txt files output formatting","Make actual CV","Make sure accessibility is good","Make sure performance is good","Write tests (TDD kinda went out the window for this project)","Cap retained terminal output and command history","Optimize autocomplete: cache command/completion data and avoid full mobile suggestion list rerenders on each input."]};function ct(t){return function(n){let o=new Set(["https:","mailto:"]),i;try{if(i=new URL(n,window.location.href),!o.has(i.protocol)&&i.origin!==window.location.origin){t.show("Blocked unsafe URL");return}}catch{t.show("Invalid URL");return}if(i.protocol==="mailto:"){window.location.assign(i.toString());return}window.open(i.toString(),"_blank","noopener,noreferrer")}}function te(t){requestAnimationFrame(()=>{t.selectionStart=t.selectionEnd=t.value.length})}function G(t,e){t.value=e,te(t)}function dt({form:t,input:e,terminal:n,onRunCommand:o}){let i=!1;function l(){i||(i=!0,e.removeAttribute("placeholder"))}function r(){e.focus({preventScroll:!0})}async function s(){let a=e.value.trim();if(e.value="",a.length===0){r();return}await o(a),r()}function u(){t.addEventListener("submit",a=>{a.preventDefault(),s()})}function d(){e.addEventListener("keydown",a=>{if(!(a.altKey||a.ctrlKey||a.metaKey)){if(a.key==="ArrowUp"){a.preventDefault();let m=n.historyUp();if(m===null)return;G(e,m)}if(a.key==="ArrowDown"){a.preventDefault();let m=n.historyDown();if(m===null)return;G(e,m)}if(a.key==="Tab"){if(a.shiftKey)return;a.preventDefault(),G(e,n.autocomplete(e.value))}}})}return u(),d(),{focus:r,markFirstCommandSubmitted:l}}var ut="terminal-theme";function ee(t){return t==="light"||t==="dark"}function pt(t){return t.toLowerCase()==="light"?"light":"dark"}function ft(t){return t.toLowerCase()==="light"?"dark":"light"}function gt({themeToggle:t,toast:e,storage:n=window.localStorage,doc:o=document,matchMedia:i=window.matchMedia?.bind(window)}){function l(){let c=n.getItem(ut);return ee(c)?c:null}function r(){return i?.("(prefers-color-scheme: light)")?.matches?"light":"dark"}let s=l()??r(),u=pt(s);function d(c,y={}){let{persist:b=!0,announce:k=!0,force:S=!1}=y,g=pt(c),x=g!==u;if(u=g,(x||S)&&(o.documentElement.dataset.theme=g,t)){let v=ft(g);t.setAttribute("aria-pressed",String(g==="light")),t.setAttribute("aria-label",`Switch to ${v.toLowerCase()} theme`),t.textContent=v}b&&n.setItem(ut,g),k&&x&&e.show(`theme: ${g}`)}let a={get:()=>u,set:c=>d(c,{persist:!0,announce:!0}),toggle:()=>d(ft(u),{persist:!0,announce:!0})};t&&t.addEventListener("click",()=>a.toggle());function m(){d(s,{persist:!1,announce:!1,force:!0})}return{controller:a,applyInitialTheme:m}}function ht(t,e=1500){let n;function o(i){t&&(t.textContent=i,t.classList.add("show"),t.setAttribute("aria-hidden","false"),n&&window.clearTimeout(n),n=window.setTimeout(()=>{t.classList.remove("show"),t.setAttribute("aria-hidden","true")},e))}return{show:o}}function yt({screen:t}){function e(){let a=document.createElement("span");a.className="line ok",a.style.position="absolute",a.style.visibility="hidden",a.style.whiteSpace="pre",a.textContent="M",t.appendChild(a);let m=a.getBoundingClientRect().width;return t.removeChild(a),m||8}function n(){let a=e();return Math.max(1,Math.floor(t.clientWidth/a))}function o(a){let m=new Set(["https:","mailto:"]);try{let c=new URL(a,window.location.href);return m.has(c.protocol)||c.origin===window.location.origin?c:null}catch{return null}}function i(a){if(a.type==="text")return document.createTextNode(a.text);if(a.type==="span"){let m=document.createElement("span");return m.className=a.className,m.textContent=a.text,m}if(a.type==="link"){let m=o(a.href);if(!m)return document.createTextNode(a.text??a.href);let c=document.createElement("a");return c.href=m.toString(),m.protocol!=="mailto:"&&(c.target="_blank",c.rel="noopener noreferrer"),c.textContent=a.text??a.href,c}return document.createTextNode("")}function l(a){let m=document.createDocumentFragment();for(let c of a)m.appendChild(i(c));return m}function r(a,m="ok",c=!0){let y=document.createElement("div");y.className="block",c&&y.classList.add("wrap-text");let b=document.createElement("div");b.className=`line ${m}`,c&&b.classList.add("wrap-text"),b.appendChild(l(a)),y.appendChild(b),t.appendChild(y)}function s(a,m="ok"){let c=document.createElement("div");c.className="block";let y=document.createElement("div");y.className=`line ${m}`;let b=document.createElement("pre");b.className="pre",b.textContent=a,y.appendChild(b),c.appendChild(y),t.appendChild(c)}function u(){for(;t.firstChild;)t.removeChild(t.firstChild)}function d(){t.scrollTop=t.scrollHeight}return{printLine:r,printPre:s,clear:u,scrollToBottom:d,getColumns:n}}function ne(t){requestAnimationFrame(()=>{t.selectionStart=t.selectionEnd=t.value.length})}function bt(t,e){t.value=e,ne(t)}function Ct(t){t.scrollLeft=0,t.scrollTo({left:0,top:0,behavior:"auto"}),requestAnimationFrame(()=>{t.scrollLeft=0})}function oe(t){let e=[],n=new Set;for(let o of t){let i=o.command.trim();if(!i)continue;let l=o.kind??"simple",r=`${l}:${i}`;n.has(r)||(n.add(r),e.push({command:i,kind:l,label:o.label?.trim()||i}))}return e}function Tt(t,e,n){let o=document.createElement("button");return o.type="button",o.className=e==="arg"?"mobile-command mobile-command-arg":"mobile-command",o.textContent=t.label,o.setAttribute("aria-label",e==="arg"?`Run ${n??t.command}`:t.kind==="withArgs"?`Choose ${t.command} argument`:`Run ${t.command}`),e==="arg"&&n?(o.dataset.run=n,o):(o.dataset.command=t.command,o.dataset.kind=t.kind,o)}function ie(t){return t.length<2?t:t.startsWith('"')&&t.endsWith('"')?t.slice(1,-1).replace(/\\"/g,'"'):t}function re(t,e){let n=`${t} `;if(!e.startsWith(n))return e;let o=e.slice(n.length).trim();return ie(o)||e}function se(t,e){let n=`${t} `,o=e.listCompletions(n),i=[],l=new Set;for(let r of o){let s=r.trim();!s||!s.startsWith(n)||l.has(s)||(l.add(s),i.push(s))}return i}function ae(t,e){let n=document.createElement("button");return n.type="button",n.className="mobile-custom-suggestion",n.dataset.kind=e,n.dataset.value=t,n.textContent=t,n.title=t,n.setAttribute("aria-label",`Insert ${t}`),n}function le(t,e){let n=t.trim().length===0,o=n?"history":"completion",i=n?e.listRecentHistory(6):e.listCompletions(t);return{type:o,values:i.slice(0,6)}}function me(t,e,n){if(n==="completion"){let o=/\s$/.test(e)?e:`${e} `;bt(t,o);return}bt(t,e)}function kt({enabled:t,container:e,list:n,back:o,customTrigger:i,dialog:l,form:r,input:s,suggestions:u,suggestionsHint:d,cancel:a,terminal:m,commands:c,onRunCommand:y}){if(!t){e instanceof HTMLElement&&(e.hidden=!0),l instanceof HTMLElement&&(l.hidden=!0);return}if(!(e instanceof HTMLElement)||!(n instanceof HTMLElement)||!(o instanceof HTMLButtonElement)||!(i instanceof HTMLButtonElement)||!(l instanceof HTMLElement)||!(r instanceof HTMLFormElement)||!(s instanceof HTMLInputElement)||!(u instanceof HTMLElement)||!(d instanceof HTMLElement)||!(a instanceof HTMLButtonElement))return;let b=oe(c),k=!1,S=!1,g=h=>{l.hidden=!h,l.setAttribute("aria-hidden",h?"false":"true"),i.setAttribute("aria-expanded",h?"true":"false")},x=async h=>{let C=h.trim();if(!(C.length===0||k)){k=!0;try{await y(C)}finally{k=!1}}},v=()=>{S=!1,n.replaceChildren(...b.map(h=>Tt(h,"root"))),n.setAttribute("aria-label","Quick commands"),Ct(n),o.hidden=!0,i.hidden=!1},R=h=>{let C=se(h,m);if(C.length===0){(async()=>(await x(h),v()))();return}S=!0,n.setAttribute("aria-label",`Choose ${h} argument`);let M=C.map(I=>Tt({command:h,kind:"simple",label:re(h,I)},"arg",I));n.replaceChildren(...M),Ct(n),o.hidden=!1,i.hidden=!0},P=()=>{let{type:h,values:C}=le(s.value,m);u.replaceChildren(...C.map(M=>ae(M,h))),u.hidden=C.length===0,d.hidden=C.length>0},_=()=>{g(!1),s.value="",P(),s.blur(),i.hidden||i.focus({preventScroll:!0})},U=()=>{g(!0),P(),requestAnimationFrame(()=>{s.focus({preventScroll:!0})})};v(),e.hidden=!1,g(!1),P(),n.addEventListener("click",h=>{let C=h.target;if(!(C instanceof Element))return;let M=C.closest("button[data-run]");if(M instanceof HTMLButtonElement){let f=M.dataset.run?.trim();if(!f)return;(async()=>(await x(f),v()))();return}let I=C.closest("button[data-command]");if(!(I instanceof HTMLButtonElement))return;let B=I.dataset.command?.trim();if(!B)return;if(I.dataset.kind==="withArgs"){R(B);return}(async()=>(await x(B),v()))()}),o.addEventListener("click",()=>{v()}),i.addEventListener("click",U),a.addEventListener("click",_),s.addEventListener("input",()=>{P()}),u.addEventListener("click",h=>{let C=h.target;if(!(C instanceof Element))return;let M=C.closest("button[data-value]");if(!(M instanceof HTMLButtonElement))return;let I=M.dataset.value;if(!I)return;let B=M.dataset.kind;me(s,I,B),P()}),l.addEventListener("click",h=>{let C=h.target;C instanceof Element&&C.closest("[data-dialog-close]")&&_()}),document.addEventListener("keydown",h=>{if(h.key==="Escape"){if(!l.hidden){h.preventDefault(),_();return}S&&(h.preventDefault(),v())}}),r.addEventListener("submit",h=>{h.preventDefault();let C=s.value.trim();C&&(async()=>(await x(C),_(),v()))()})}function Lt({container:t,list:e,profile:n,onRunCommand:o,aliases:i}){if(!(t instanceof HTMLElement)||!(e instanceof HTMLElement))return;let l=F(n),r=i.filter(s=>l.has(s)).map(s=>`open ${s}`);if(e.replaceChildren(),r.length===0){t.hidden=!0;return}for(let s of r){let u=document.createElement("button");u.type="button",u.className="quick-link",u.dataset.command=s,u.setAttribute("aria-label",`Run ${s}`),u.title=s;let d=document.createElement("span");d.className="quick-link-sigil",d.textContent="$";let a=document.createElement("span");a.textContent=s,u.append(d,a),e.appendChild(u)}e.addEventListener("click",async s=>{let u=s.target;if(!(u instanceof Element))return;let d=u.closest("button[data-command]");if(!(d instanceof HTMLButtonElement))return;let a=d.dataset.command?.trim();a&&(s.detail>0&&d.blur(),await o(a))}),t.hidden=!1}function Y(t,e,n){if(!t||!e(t))throw new Error(n);return t}var ce=Y(document.getElementById("screen"),t=>t instanceof HTMLElement,"Screen element not found."),de=Y(document.getElementById("prompt"),t=>t instanceof HTMLFormElement,"Prompt form element not found."),ue=Y(document.getElementById("input"),t=>t instanceof HTMLInputElement,"Prompt input element not found."),pe=document.getElementById("themeToggle"),fe=document.getElementById("toast"),Et=document.querySelector(".title"),vt=document.querySelector(".ps1"),ge=document.getElementById("quickLinks"),he=document.getElementById("quickLinksList"),ye=document.getElementById("mobileCommandTray"),be=document.getElementById("mobileCommandList"),St=document.getElementById("mobileTrayBack"),xt=document.getElementById("mobileCustomTrigger"),Ce=document.getElementById("mobileCommandDialog"),Mt=document.getElementById("mobileCustomForm"),wt=document.getElementById("mobileCustomInput"),Te=document.getElementById("mobileCustomSuggestions"),ke=document.getElementById("mobileCustomSuggestionsHint"),_t=document.getElementById("mobileCustomCancel"),j=window.matchMedia("(pointer: coarse)").matches,Ht="brad@portfolio",It=["help","contact","bio","projects","roles","education","cv"];function Le(t){let e=Array.from(t.values()),n=new Set(It),o=[];for(let l of It){let r=t.get(l);r&&o.push(r)}return[...o,...e.filter(l=>!n.has(l.name))].map(l=>({command:l.name,kind:typeof l.complete=="function"?"withArgs":"simple"}))}Et&&(Et.textContent=`${Ht}: ~`);vt&&(vt.textContent=Ht);var At=ht(fe),{controller:Ee,applyInitialTheme:ve}=gt({themeToggle:pe,toast:At}),Se=ct(At),Pt=yt({screen:ce}),{commands:Rt}=ot({profile:O,isMobile:j}),D=mt({renderer:Pt,profile:O,fs:it(O),commands:Rt,theme:Ee,openUrl:Se,isMobile:j}),xe=Le(Rt),K=null,Q=!1;async function X(t){let e=t.trim();if(!(e.length===0||Q)){Q=!0;try{K?.markFirstCommandSubmitted(),D.addHistory(e),await D.run(e),Pt.scrollToBottom()}finally{Q=!1}j||K?.focus()}}K=dt({form:de,input:ue,terminal:D,onRunCommand:X});Lt({container:ge,list:he,profile:O,aliases:["cv","github","linkedin","email"],onRunCommand:X});kt({enabled:j,container:ye,list:be,back:St instanceof HTMLButtonElement?St:null,customTrigger:xt instanceof HTMLButtonElement?xt:null,dialog:Ce,form:Mt instanceof HTMLFormElement?Mt:null,input:wt instanceof HTMLInputElement?wt:null,suggestions:Te,suggestionsHint:ke,cancel:_t instanceof HTMLButtonElement?_t:null,terminal:D,commands:xe,onRunCommand:X});ve();D.boot();j||K?.focus();var W=0;window.addEventListener("resize",()=>{W&&cancelAnimationFrame(W),W=requestAnimationFrame(()=>{D.refreshIntroIfPristine(),W=0})});if(j){let t=0;document.addEventListener("touchend",e=>{if(!e.cancelable||e.touches.length>0)return;let n=performance.now();n-t<=300&&e.preventDefault(),t=n},{passive:!1})}
