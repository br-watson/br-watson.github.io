function Ut(t,e,n){for(let o of n)t(o.name,o.summary,o.usage,o.showInHelp,i=>e.get(o.targetCommand)?.execute(i,o.args))}function tt({profile:t,commands:e,registerCommand:n}){n("whoami","About me","whoami",!0,o=>{o.printLine(`${String(t.name)} \u2014 ${String(t.role)} (${String(t.location)})`)}),Ut(n,e,[{name:"bio",summary:"Alias: cat bio.txt",usage:"bio",targetCommand:"cat",args:["bio.txt"],showInHelp:!0},{name:"projects",summary:"Alias: cat projects.txt",usage:"projects",targetCommand:"cat",args:["projects.txt"],showInHelp:!0},{name:"contact",summary:"Alias: cat contact.txt",usage:"contact",targetCommand:"cat",args:["contact.txt"],showInHelp:!0},{name:"cv",summary:"Alias: open cv",usage:"cv",targetCommand:"open",args:["cv"],showInHelp:!0},{name:"skills",summary:"List my skills",usage:"skills",targetCommand:"cat",args:["skills.txt"],showInHelp:!0},{name:"education",summary:"List my education",usage:"education",targetCommand:"cat",args:["education.txt"],showInHelp:!0},{name:"roles",summary:"List my roles and experience",usage:"roles",targetCommand:"cat",args:["roles.txt"],showInHelp:!0}])}function D(t,e,n){return Math.max(e,Math.min(n,t))}function U(t){return t.reduce((e,n)=>Math.max(e,n.length),0)}var Wt="[penguin noises]",qt=["      .--.","     |o_o |","     |:_/ |","    //   \\\\","   (|     |)","  /'\\_   _/`\\","  \\___)=(___/"],Kt=["     _","   ('v')","  //-=-\\\\","  (\\_=_/)","   ^^ ^^"];function zt(t,e){let n=Math.max(1,e),o=[],i=t.split(/\r?\n/);for(let a of i){let s=a.trim().split(/\s+/).filter(Boolean);if(s.length===0){o.push("");continue}let r="";for(let d of s){if(d.length>n){r&&(o.push(r),r="");for(let m=0;m<d.length;m+=n)o.push(d.slice(m,m+n));continue}if(!r){r=d;continue}if(r.length+1+d.length<=n){r=`${r} ${d}`;continue}o.push(r),r=d}r&&o.push(r)}return o.length===0?[""]:o}function Gt(t,e){let n=zt(t,e),o=n.reduce((a,s)=>Math.max(a,s.length),1),i="-".repeat(o+2);return[`.${i}.`,...n.map(a=>`| ${a.padEnd(o," ")} |`),`'${i}'`]}function Vt(t,e,n){let o=n==="big-penguin"?48:n==="lil-penguin"?34:24,i=D(e-4,1,o),a=Gt(t,i);if(n==="no-penguin")return a;let s=["   \\","    \\"],r=n==="big-penguin"?qt:Kt;return[...a,...s,...r]}function Qt(t,e){let n=["big-penguin","lil-penguin","no-penguin"];for(let o of n){let i=Vt(t,e,o);if(U(i)<=e)return i}return null}function et({registerCommand:t}){t("pengsay","Penguin says something","pengsay [text]",!0,(e,n)=>{let o=n.join(" ").trim()||Wt,i=Math.max(1,e.getColumns()),a=i>=5?Qt(o,i):null;if(!a){e.printLine(`penguin: "${o}"`);return}e.printPre(a.join(`
`),"ok")})}function Yt(t,e){let n=e.toLowerCase();return Array.from(new Set(t)).filter(o=>o.toLowerCase().startsWith(n)).sort()}function W(t,e){return t.argIndex!==0?[]:Yt(e,t.prefix??"")}var Xt=new Set(["file","bio","link","links","projects","education"]);function Jt(t,e){let{t:n,s:o}=t.seg,i=e.lines.flatMap((a,s)=>[n(a),...s<e.lines.length-1?[n(`

`)]:[]]);t.printLine([o("accent",`About
`),...i],"muted")}function Zt(t,e){t.printPre(String(e.content),"ok")}function te(t,e,n){let{t:o,l:i,s:a}=t.seg;t.printLine([o(`${e} -> `),i(n.href),o(" (click me! or run "),a("accent",`open ${e}`),o(")")],"muted")}function ee(t,e){let{t:n,l:o,s:i}=t.seg,a=(r,d)=>" ".repeat(Math.max(0,d-r.length)),s=Object.entries(e.items).flatMap(([r,d])=>{let m=r==="email"?d.replace("mailto:",""):r;return[n(`${r}: `.padEnd(10," ")),o(d,m),n(a(m,11)),n(" (or run "),i("accent",`open ${r}`),n(`)
`)]});t.printLine(s,"muted")}function ne(t,e){let{t:n,l:o,s:i}=t.seg,a=e.projects.flatMap(s=>[i("accent",`${s.name}
`),n(`${s.desc}
`),...s.repoLink?[o(s.repoLink),n(`
`)]:[n("")],...s.deployedLink?[o(s.deployedLink),n(`
`)]:[n("")],s.tags&&s.tags.length>0?n(`Tech stack: ${s.tags.join(", ")}
`):n(""),n(`
`)]);t.printLine(a,"muted")}function oe(t,e){let{t:n,l:o,s:i}=t.seg,a=e.education.flatMap(s=>[i("accent",`${s.qualification} - ${s.institution}
`),n(`${s.location} | ${s.startDate} - ${s.endDate} | ${s.grade}
`),s.description?n(`${s.description}
`):n(""),...s.dissertation?[n("Dissertation: "),o(s.dissertation.link,s.dissertation.title),n(`
`)]:[n("")],s.tags&&s.tags.length>0?n(`Tags: ${s.tags.join(", ")}
`):n(""),n(`
`)]);t.printLine(a,"muted")}function ie(t,e,n){switch(n.type){case"bio":Jt(t,n);break;case"file":Zt(t,n);break;case"link":te(t,e,n);break;case"links":ee(t,n);break;case"projects":ne(t,n);break;case"education":oe(t,n);break;default:t.printLine(`cat: ${e}: Not a file`,"error");break}}function nt(t){t("cat","Print file contents","cat <file>",!0,(e,n)=>{let o=n[0];if(!o){e.printLine("cat: missing file operand","error");return}let i=e.resolveHomeItem(o);if(!i){e.printLine(`cat: ${o}: No such file`,"error");return}ie(e,o,i)},(e,n)=>{let o=e.listHome().filter(i=>{let a=e.resolveHomeItem(i);return a?Xt.has(a.type):!1});return W(n,o)})}function B(t){let e=new Map;return t.links.github&&e.set("github",t.links.github),t.links.linkedin&&e.set("linkedin",t.links.linkedin),t.filePaths.cv&&e.set("cv",t.filePaths.cv),t.filePaths.dissertation&&e.set("dissertation",t.filePaths.dissertation),t.email&&e.set("email",`mailto:${t.email}`),e}function ot({registerCommand:t,isMobile:e}){t("ls","List files (only ~ supported)","ls [path]",!0,(n,o)=>{if((o[0]??"~")!=="~"){n.printLine('ls: only "~" is supported in this tiny filesystem',"error");return}n.printPre(n.listHome().join(`
`),"ok")}),nt(t),t("open","Open link","open <alias>",!0,(n,o)=>{let{t:i,l:a}=n.seg,s=o[0],r=(s??"").toLowerCase();if(!r){n.printLine(e?"open: missing target (see the suggestions for valid options)":"open: missing target (press Tab to see valid options)","error");return}let d=B(n.profile);if(d.has(r)){let m=d.get(r);m&&(n.printLine([i("Opening: "),a(m)],"muted"),n.openUrl(m));return}n.printLine(`open: unknown target "${s}"`,"error")},(n,o)=>{let i=B(n.profile);return W(o,i.keys())})}function it({commands:t,registerCommand:e,isMobile:n}){e("help","Show this help","help",!0,o=>{let{s:i}=o.seg;o.printLine([i("accent","Available commands")],"ok");let a=Array.from(t.values()).filter(r=>r.showInHelp).sort((r,d)=>r.name.localeCompare(d.name)).map(r=>`${r.name.padEnd(12," ")} ${r.summary.padEnd(32," ")} ${r.usage}`),s=[`${"COMMAND".padEnd(12," ")} ${"SUMMARY".padEnd(32," ")} USAGE`,"",...a,"",n?'Tip: use the command buttons below, or tap "Custom" to type commands with autocomplete and history.':"Tips: use \u2191/\u2193 for history and Tab for autocomplete (Shift+Tab to move focus)."];o.printPre(s.join(`
`),"ok")}),e("clear","Clear the screen","clear",!0,o=>o.clear()),e("date","Print local date/time","date",!0,o=>{o.printLine(new Date().toString(),"muted")}),e("echo","Print args","echo <text>",!0,(o,i)=>{o.printLine(i.join(" "))}),e("theme","Switch theme","theme [dark|light|toggle]",!0,(o,i)=>{let a=(i[0]??"").toLowerCase(),s=o.theme.get();if(!a){o.printLine(`theme: current is "${s}"`,"muted"),o.printLine("Try: theme dark | theme light | theme toggle","muted");return}if(a==="toggle"){o.theme.toggle(),o.printLine(`theme: set to "${o.theme.get()}"`,"muted");return}if(a!=="dark"&&a!=="light"){o.printLine('theme: expected "dark" or "light"',"error");return}o.theme.set(a),o.printLine(`theme: set to "${a}"`,"muted")},(o,i)=>{if(i.argIndex!==0)return[];let a=i.prefix.toLowerCase();return["dark","light","toggle"].filter(s=>s.startsWith(a))})}function rt({profile:t,isMobile:e=!1}){let n=new Map,o=(i,a,s,r,d,m)=>{n.set(i,{name:i,summary:a,usage:s,showInHelp:r,execute:d,complete:m})};return it({commands:n,registerCommand:o,isMobile:e}),ot({registerCommand:o,isMobile:e}),tt({profile:t,commands:n,registerCommand:o}),et({registerCommand:o}),{commands:n}}function st(t){return{"~":{type:"dir",children:{"bio.txt":{type:"bio",lines:t.bio},"projects.txt":{type:"projects",projects:t.projects},"contact.txt":{type:"links",items:{...t.links,email:`mailto:${t.email}`}},"skills.txt":{type:"file",content:t.skills.join(", ")},"education.txt":{type:"education",education:t.education},"roles.txt":{type:"file",content:t.roles.map(e=>{let n=e.title??"Untitled Role",o=e.company?` at ${e.company}`:"",i=e.location?` in ${e.location}`:"",a=` (${e.startDate} - ${e.endDate??"Present"})`,s=e.description?`
  ${e.description}`:"";return`- ${n}${o}${i}${a}${s}`}).join(`

`)},"cv.pdf":{type:"link",href:t.filePaths.cv},"dissertation.pdf":{type:"link",href:t.filePaths.dissertation},"todo.md":{type:"file",content:t.todo.map(e=>`- [ ] ${e}`).join(`
`)}}}}}function at(t){let e=t["~"];if(!e||e.type!=="dir")throw new Error("Invalid filesystem: missing home dir");return e}function lt(t){return Object.keys(at(t).children).sort()}function mt(t,e){return at(t).children[e]}function N(t){let e=[],n="",o=null,i=!1;for(let a=0;a<t.length;a++){let s=t[a];if(i){n+=s,i=!1;continue}if(s==="\\"){i=!0;continue}if(o){if(s===o){o=null;continue}n+=s;continue}if(s==='"'||s==="'"){o=s;continue}if(/\s/.test(s)){n&&(e.push(n),n="");continue}n+=s}return i&&(n+="\\"),n&&e.push(n),{tokens:e,endsWithWhitespace:/\s$/.test(t)}}function ct({commands:t,getContext:e,onListMatches:n}){let o=Array.from(t.entries()).map(([m,l])=>({name:m,showInHelp:l.showInHelp})).sort((m,l)=>m.name.localeCompare(l.name)),i=null;function a(m,l=N(m)){let{tokens:c,endsWithWhitespace:u}=l;if(c.length===0)return null;if(c.length===1&&!u){let R=c[0],I=o.filter(w=>w.showInHelp&&w.name.startsWith(R)).map(w=>w.name);return{kind:"cmd",prefix:R,matches:I,buildValue:w=>w}}let f=c[0],y=t.get(f);if(!y?.complete)return null;let E=c.slice(1),T=u?"":E[E.length-1]??"",C=u?E.length:Math.max(0,E.length-1),_={line:m,tokens:c,args:E,endsWithWhitespace:u,argIndex:C,prefix:T},x=y.complete(e(),_)||[];return{kind:`arg:${f}`,prefix:T,matches:x,buildValue:R=>[...u?c:c.slice(0,-1),re(R)].join(" ")}}function s(m){let l=a(m);if(!l)return[];let c=new Set,u=[];for(let f of l.matches){let y=l.buildValue(f);c.has(y)||(c.add(y),u.push(y))}return u}function r(m){if(i?.phase==="menu"){let u=i.values.indexOf(m);if(u!==-1){let f=(u+1)%i.values.length;return i.index=f,i.lastValue=i.values[f],i.lastValue}i=null}let l=N(m);if(l.tokens.length===0)return"";let c=a(m,l);return c?d(c.kind,m,c.prefix,c.matches,c.buildValue)??m:m}function d(m,l,c,u,f){if(u.length===0)return i=null,null;if(u.length===1)return i=null,f(u[0]);let y=ae(u),E=se(u);if(E.length>c.length){let C=f(E);return i={phase:"armed",kind:m,baseInput:C,prefix:E,matchesKey:y,values:u.map(f),index:-1,lastValue:null},C}if(!(i&&i.kind===m&&i.baseInput===l&&i.prefix===c&&i.matchesKey===y))return i={phase:"armed",kind:m,baseInput:l,prefix:c,matchesKey:y,values:u.map(f),index:-1,lastValue:null},null;if(i?.phase==="armed")return n(u),i.phase="listed",null;if(i?.phase==="listed"){let C=i.values[0];return i.phase="menu",i.index=0,i.lastValue=C,C}return null}return{autocomplete:r,listCompletions:s}}function re(t){return/\s/.test(t)?`"${t.replace(/"/g,'\\"')}"`:t}function se(t){if(t.length===0)return"";let e=t[0];for(let n=1;n<t.length;n++){let o=t[n],i=0;for(;i<e.length&&i<o.length&&e[i]===o[i];)i++;if(e=e.slice(0,i),e==="")break}return e}function ae(t){return t.join("\0")}var M=t=>({type:"text",text:t}),k=(t,e)=>({type:"span",className:t,text:e}),le=(t,e)=>({type:"link",href:t,text:e});function ut({renderer:t,profile:e,fs:n,commands:o,openUrl:i,theme:a,isMobile:s}){let r={history:[],historyIndex:-1,hasRunCommand:!1,hasBooted:!1},d="status: work-in-progress";function m(){r.hasBooted=!0,l()}function l(){t.clear(),y(),T([M("Type "),k("accent","help"),M(` to see commands.
`),k("accent","Tips: "),M(s?'use the command buttons below, or tap "Custom" to type commands with autocomplete and history.':"use \u2191/\u2193 for history and Tab for autocomplete (Shift+Tab to move focus).")],"muted"),t.scrollToBottom()}function c(){!r.hasBooted||r.hasRunCommand||l()}function u(p,h){return p.length<=h?p:h<=1?"\u2026":`${p.slice(0,h-1)}\u2026`}function f(p,h){let L=u(p,h),v=Math.max(0,h-L.length),P=Math.floor(v/2),A=v-P;return{leftPad:" ".repeat(P),text:L,rightPad:" ".repeat(A)}}function y(){let p=e.nameAsciiArt??[],h=U(p),L=t.getColumns();if(p.length>0&&h<=L){C(p.join(`
`),"accent"),T(e.role,"muted"),T([k("accent",d)],"muted");return}E()}function E(){let p=String(e.name).trim()||"Portfolio",h=String(e.role).trim()||"Software Engineer",L=t.getColumns(),v=D(L-6,10,54),P=Math.min(20,v),A=Math.max(p.length,h.length,P-4),$=D(A+4,P,v),G=`\u256D${"\u2500".repeat($+2)}\u256E`,Ft=`\u251C${"\u2500".repeat($+2)}\u2524`,jt=`\u2570${"\u2500".repeat($+2)}\u256F`,Z=(Nt,Ot=!0)=>{let V=f(Nt,$);return[k("banner-border","\u2502 "),k("banner-border",V.leftPad),k("banner-text",V.text),k("banner-border",V.rightPad),k("banner-border",Ot?` \u2502
`:" \u2502")]},Dt=[k("banner-border",`${G}
`),...Z(p),k("banner-border",`${Ft}
`),...Z(h),k("banner-border",jt)];T(Dt,"banner",!1),T([k("accent",d)],"muted")}function T(p,h="ok",L=!0){let v=Array.isArray(p)?p:[M(String(p))];t.printLine(v,h,L)}function C(p,h="ok"){t.printPre(String(p),h)}function _(p){T([k("cmd","$"),M(" "),k("cmd",p)],"cmd")}function x(){return lt(n)}function R(p){return mt(n,p)}function I(){return{profile:e,fs:n,theme:a,openUrl:i,printLine:T,printPre:C,getColumns:t.getColumns,seg:{t:M,s:k,l:le},listHome:x,resolveHomeItem:R,clear:t.clear}}let w=ct({commands:o,getContext:I,onListMatches:p=>{let h=[];p.forEach((L,v)=>{v&&h.push(M("   ")),h.push(k("accent",L))}),T(h,"muted"),t.scrollToBottom()}});async function z(p){let h=p.trim();if(!h)return;r.hasRunCommand=!0,_(h);let L=N(h),[v,...P]=L.tokens,A=o.get(v);if(!A){T([M("Command not found: "),k("error",v)],"error"),T([M("Try: "),k("accent","help")],"muted");return}try{await A.execute(I(),P)}catch($){let G=$ instanceof Error?$.message:String($);T([k("error","Error:"),M(" "),M(G)],"error")}}function g(p){r.history.push(p),r.historyIndex=r.history.length}function b(){return r.history.length===0?null:(r.historyIndex=Math.max(0,r.historyIndex-1),r.history[r.historyIndex]??"")}function S(){return r.history.length===0?null:(r.historyIndex=Math.min(r.history.length,r.historyIndex+1),r.history[r.historyIndex]??"")}function H(p=6){let h=Math.max(0,Math.floor(p));if(h===0)return[];let L=[],v=new Set;for(let P=r.history.length-1;P>=0;P--){let A=r.history[P]??"";if(!(A.length===0||v.has(A))&&(v.add(A),L.push(A),L.length>=h))break}return L}return{boot:m,run:z,addHistory:g,historyUp:b,historyDown:S,listRecentHistory:H,listCompletions:p=>w.listCompletions(p),autocomplete:p=>w.autocomplete(p),refreshIntroIfPristine:c}}var O={name:"Bradley Watson",nameAsciiArt:["____________  ___ ______   _    _  ___ _____ _____  _____ _   _","| ___ \\ ___ \\/ _ \\|  _  \\ | |  | |/ _ \\_   _/  ___||  _  | \\ | |","| |_/ / |_/ / /_\\ \\ | | | | |  | / /_\\ \\| | \\ `--. | | | |  \\| |","| ___ \\    /|  _  | | | | | |/\\| |  _  || |  `--. \\| | | | . ` |","| |_/ / |\\ \\| | | | |/ /  \\  /\\  / | | || | /\\__/ /\\ \\_/ / |\\  |","\\____/\\_| \\_\\_| |_/___/    \\/  \\/\\_| |_/\\_/ \\____/  \\___/\\_| \\_/"],role:"Software Engineer",location:"Leeds, UK",email:"br@dley.dev",links:{github:"https://github.com/br-watson",linkedin:"https://www.linkedin.com/in/bradleyrwatson"},filePaths:{cv:"./assets/cv.pdf",dissertation:"./assets/diss.pdf"},bio:["Software engineer specializing in backend systems, cloud platforms, CI/CD automation, and end-to-end data pipelines, building reliable, scalable production systems.","Current interests: distributed systems design, event-driven data pipelines, observability, CI/CD, and developer tooling for cloud-native backends.","This site is a small terminal-style portfolio because standard portfolio sites are kinda boring."],projects:[{name:"Terminal Portfolio",desc:"This project! An interactive terminal-style portfolio built with TypeScript, HTML, and CSS.",repoLink:"https://github.com/br-watson/br-watson.github.io",deployedLink:"https://bwatson.uk",tags:["TypeScript","HTML","CSS"]},{name:"Darts Score Tracker",desc:"All the darts trackers my friends and I could find were either too basic or couldn't handle more than 4 players, so I built this simple one to track our games and stats.",repoLink:"https://github.com/br-watson/darts-games",deployedLink:"https://bwatson.uk/darts-games",tags:["TypeScript","React","Next.js","Tailwind CSS"]},{name:"Planning Poker App",desc:"Built a free, no-login planning poker app for my team's sprint refinements after existing tools were paid or lacked custom decks. It supports multiple rooms, custom card sets, and real-time updates.",deployedLink:"https://poker.bwatson.uk/",tags:["TypeScript","React","Tailwind CSS","Firebase"]}],skills:["TypeScript","AWS","TODO..."],education:[{qualification:"Master of Mathematics (MMath)",institution:"Durham University",location:"Durham, UK",startDate:"2018",endDate:"2022",grade:"First Class Honours (1st)",description:"Specialised in mathematical analysis, geometry, and algebra. Dissertation on isometries of Riemannian manifolds.",tags:["Mathematical analysis","Geometry","Algebra","Calculus","Linear algebra","Partial differential equations"],dissertation:{title:"Isometries of Riemannian Manifolds",link:"./assets/diss.pdf"}},{qualification:"A-Levels",institution:"Notre Dame Sixth Form College",location:"Leeds, UK",startDate:"2016",endDate:"2018",grade:"A*AAA",tags:["Mathematics","Further Mathematics","Computer Science","Chemistry"]}],roles:[{title:"Software Engineer",company:"Sky UK",location:"Leeds, UK",startDate:"Sep 2024"},{title:"Associate Software Engineer",company:"Sky UK",location:"Leeds, UK",startDate:"Sep 2023",endDate:"Sep 2024"}],todo:["Finish writing profile (experience, projects, skills etc.)","Change skills to have multiple sections and include levels and experience details","Add more commands","Improve txt files output formatting","Make actual CV","Make sure accessibility is good","Make sure performance is good","Write tests (TDD kinda went out the window for this project)","Cap retained terminal output and command history","Optimize autocomplete: cache command/completion data and avoid full mobile suggestion list rerenders on each input."]};function dt(t){return function(n){let o=new Set(["https:","mailto:"]),i;try{if(i=new URL(n,window.location.href),!o.has(i.protocol)&&i.origin!==window.location.origin){t.show("Blocked unsafe URL");return}}catch{t.show("Invalid URL");return}if(i.protocol==="mailto:"){window.location.assign(i.toString());return}window.open(i.toString(),"_blank","noopener,noreferrer")}}function me(t){requestAnimationFrame(()=>{t.selectionStart=t.selectionEnd=t.value.length})}function Q(t,e){t.value=e,me(t)}function pt({form:t,input:e,terminal:n,onRunCommand:o}){let i=!1;function a(){i||(i=!0,e.removeAttribute("placeholder"))}function s(){e.focus({preventScroll:!0})}async function r(){let l=e.value.trim();if(e.value="",l.length===0){s();return}await o(l),s()}function d(){t.addEventListener("submit",l=>{l.preventDefault(),r()})}function m(){e.addEventListener("keydown",l=>{if(!(l.altKey||l.ctrlKey||l.metaKey)){if(l.key==="ArrowUp"){l.preventDefault();let c=n.historyUp();if(c===null)return;Q(e,c)}if(l.key==="ArrowDown"){l.preventDefault();let c=n.historyDown();if(c===null)return;Q(e,c)}if(l.key==="Tab"){if(l.shiftKey)return;l.preventDefault(),Q(e,n.autocomplete(e.value))}}})}return d(),m(),{focus:s,markFirstCommandSubmitted:a}}var gt="terminal-theme";function ce(t){return t==="light"||t==="dark"}function ft(t){return t.toLowerCase()==="light"?"light":"dark"}function ht(t){return t.toLowerCase()==="light"?"dark":"light"}function yt({themeToggle:t,toast:e,storage:n=window.localStorage,doc:o=document,matchMedia:i=window.matchMedia?.bind(window)}){function a(){let u=n.getItem(gt);return ce(u)?u:null}function s(){return i?.("(prefers-color-scheme: light)")?.matches?"light":"dark"}let r=a()??s(),d=ft(r);function m(u,f={}){let{persist:y=!0,announce:E=!0,force:T=!1}=f,C=ft(u),_=C!==d;if(d=C,(_||T)&&(o.documentElement.dataset.theme=C,t)){let x=ht(C);t.setAttribute("aria-pressed",String(C==="light")),t.setAttribute("aria-label",`Switch to ${x.toLowerCase()} theme`),t.textContent=x}y&&n.setItem(gt,C),E&&_&&e.show(`theme: ${C}`)}let l={get:()=>d,set:u=>m(u,{persist:!0,announce:!0}),toggle:()=>m(ht(d),{persist:!0,announce:!0})};t&&t.addEventListener("click",()=>l.toggle());function c(){m(r,{persist:!1,announce:!1,force:!0})}return{controller:l,applyInitialTheme:c}}function bt(t,e=1500){let n;function o(i){t&&(t.textContent=i,t.classList.add("show"),t.setAttribute("aria-hidden","false"),n&&window.clearTimeout(n),n=window.setTimeout(()=>{t.classList.remove("show"),t.setAttribute("aria-hidden","true")},e))}return{show:o}}function Ct({screen:t}){function e(){let l=document.createElement("span");l.className="line ok",l.style.position="absolute",l.style.visibility="hidden",l.style.whiteSpace="pre",l.textContent="M",t.appendChild(l);let c=l.getBoundingClientRect().width;return t.removeChild(l),c||8}function n(){let l=e();return Math.max(1,Math.floor(t.clientWidth/l))}function o(l){let c=new Set(["https:","mailto:"]);try{let u=new URL(l,window.location.href);return c.has(u.protocol)||u.origin===window.location.origin?u:null}catch{return null}}function i(l){if(l.type==="text")return document.createTextNode(l.text);if(l.type==="span"){let c=document.createElement("span");return c.className=l.className,c.textContent=l.text,c}if(l.type==="link"){let c=o(l.href);if(!c)return document.createTextNode(l.text??l.href);let u=document.createElement("a");return u.href=c.toString(),c.protocol!=="mailto:"&&(u.target="_blank",u.rel="noopener noreferrer"),u.textContent=l.text??l.href,u}return document.createTextNode("")}function a(l){let c=document.createDocumentFragment();for(let u of l)c.appendChild(i(u));return c}function s(l,c="ok",u=!0){let f=document.createElement("div");f.className="block",u&&f.classList.add("wrap-text");let y=document.createElement("div");y.className=`line ${c}`,u&&y.classList.add("wrap-text"),y.appendChild(a(l)),f.appendChild(y),t.appendChild(f)}function r(l,c="ok"){let u=document.createElement("div");u.className="block";let f=document.createElement("div");f.className=`line ${c}`;let y=document.createElement("pre");y.className="pre",y.textContent=l,f.appendChild(y),u.appendChild(f),t.appendChild(u)}function d(){for(;t.firstChild;)t.removeChild(t.firstChild)}function m(){t.scrollTop=t.scrollHeight}return{printLine:s,printPre:r,clear:d,scrollToBottom:m,getColumns:n}}function ue(t){requestAnimationFrame(()=>{t.selectionStart=t.selectionEnd=t.value.length})}function Tt(t,e){t.value=e,ue(t)}function Lt(t){t.scrollLeft=0,t.scrollTo({left:0,top:0,behavior:"auto"}),requestAnimationFrame(()=>{t.scrollLeft=0})}function de(t){let e=[],n=new Set;for(let o of t){let i=o.command.trim();if(!i)continue;let a=o.kind??"simple",s=`${a}:${i}`;n.has(s)||(n.add(s),e.push({command:i,kind:a,label:o.label?.trim()||i}))}return e}function kt(t,e,n){let o=document.createElement("button");return o.type="button",o.className=e==="arg"?"mobile-command mobile-command-arg":"mobile-command",o.textContent=t.label,o.setAttribute("aria-label",e==="arg"?`Run ${n??t.command}`:t.kind==="withArgs"?`Choose ${t.command} argument`:`Run ${t.command}`),e==="arg"&&n?(o.dataset.run=n,o):(o.dataset.command=t.command,o.dataset.kind=t.kind,o)}function pe(t){return t.length<2?t:t.startsWith('"')&&t.endsWith('"')?t.slice(1,-1).replace(/\\"/g,'"'):t}function ge(t,e){let n=`${t} `;if(!e.startsWith(n))return e;let o=e.slice(n.length).trim();return pe(o)||e}function fe(t,e){let n=`${t} `,o=e.listCompletions(n),i=[],a=new Set;for(let s of o){let r=s.trim();!r||!r.startsWith(n)||a.has(r)||(a.add(r),i.push(r))}return i}function he(t,e){let n=document.createElement("button");return n.type="button",n.className="mobile-custom-suggestion",n.dataset.kind=e,n.dataset.value=t,n.textContent=t,n.title=t,n.setAttribute("aria-label",`Insert ${t}`),n}function ye(t,e){let n=t.trim().length===0,o=n?"history":"completion",i=n?e.listRecentHistory(6):e.listCompletions(t);return{type:o,values:i.slice(0,6)}}function be(t,e,n){if(n==="completion"){let o=/\s$/.test(e)?e:`${e} `;Tt(t,o);return}Tt(t,e)}function Et({enabled:t,container:e,list:n,back:o,customTrigger:i,dialog:a,form:s,input:r,suggestions:d,suggestionsHint:m,cancel:l,terminal:c,commands:u,onRunCommand:f}){if(!t){e instanceof HTMLElement&&(e.hidden=!0),a instanceof HTMLElement&&(a.hidden=!0);return}if(!(e instanceof HTMLElement)||!(n instanceof HTMLElement)||!(o instanceof HTMLButtonElement)||!(i instanceof HTMLButtonElement)||!(a instanceof HTMLElement)||!(s instanceof HTMLFormElement)||!(r instanceof HTMLInputElement)||!(d instanceof HTMLElement)||!(m instanceof HTMLElement)||!(l instanceof HTMLButtonElement))return;let y=de(u),E=!1,T=!1,C=g=>{a.hidden=!g,a.setAttribute("aria-hidden",g?"false":"true"),i.setAttribute("aria-expanded",g?"true":"false")},_=async g=>{let b=g.trim();if(!(b.length===0||E)){E=!0;try{await f(b)}finally{E=!1}}},x=()=>{T=!1,n.replaceChildren(...y.map(g=>kt(g,"root"))),n.setAttribute("aria-label","Quick commands"),Lt(n),o.hidden=!0,i.hidden=!1},R=g=>{let b=fe(g,c);if(b.length===0){(async()=>(await _(g),x()))();return}T=!0,n.setAttribute("aria-label",`Choose ${g} argument`);let S=b.map(H=>kt({command:g,kind:"simple",label:ge(g,H)},"arg",H));n.replaceChildren(...S),Lt(n),o.hidden=!1,i.hidden=!0},I=()=>{let{type:g,values:b}=ye(r.value,c);d.replaceChildren(...b.map(S=>he(S,g))),d.hidden=b.length===0,m.hidden=b.length>0},w=()=>{C(!1),r.value="",I(),r.blur(),i.hidden||i.focus({preventScroll:!0})},z=()=>{C(!0),I(),requestAnimationFrame(()=>{r.focus({preventScroll:!0})})};x(),e.hidden=!1,C(!1),I(),n.addEventListener("click",g=>{let b=g.target;if(!(b instanceof Element))return;let S=b.closest("button[data-run]");if(S instanceof HTMLButtonElement){let L=S.dataset.run?.trim();if(!L)return;(async()=>(await _(L),x()))();return}let H=b.closest("button[data-command]");if(!(H instanceof HTMLButtonElement))return;let p=H.dataset.command?.trim();if(!p)return;if(H.dataset.kind==="withArgs"){R(p);return}(async()=>(await _(p),x()))()}),o.addEventListener("click",()=>{x()}),i.addEventListener("click",z),l.addEventListener("click",w),r.addEventListener("input",()=>{I()}),d.addEventListener("click",g=>{let b=g.target;if(!(b instanceof Element))return;let S=b.closest("button[data-value]");if(!(S instanceof HTMLButtonElement))return;let H=S.dataset.value;if(!H)return;let p=S.dataset.kind;be(r,H,p),I()}),a.addEventListener("click",g=>{let b=g.target;b instanceof Element&&b.closest("[data-dialog-close]")&&w()}),document.addEventListener("keydown",g=>{if(g.key==="Escape"){if(!a.hidden){g.preventDefault(),w();return}T&&(g.preventDefault(),x())}}),s.addEventListener("submit",g=>{g.preventDefault();let b=r.value.trim();b&&(async()=>(await _(b),w(),x()))()})}function vt({container:t,list:e,profile:n,onRunCommand:o,aliases:i}){if(!(t instanceof HTMLElement)||!(e instanceof HTMLElement))return;let a=B(n),s=i.filter(r=>a.has(r)).map(r=>`open ${r}`);if(e.replaceChildren(),s.length===0){t.hidden=!0;return}for(let r of s){let d=document.createElement("button");d.type="button",d.className="quick-link",d.dataset.command=r,d.setAttribute("aria-label",`Run ${r}`),d.title=r;let m=document.createElement("span");m.className="quick-link-sigil",m.textContent="$";let l=document.createElement("span");l.textContent=r,d.append(m,l),e.appendChild(d)}e.addEventListener("click",async r=>{let d=r.target;if(!(d instanceof Element))return;let m=d.closest("button[data-command]");if(!(m instanceof HTMLButtonElement))return;let l=m.dataset.command?.trim();l&&(r.detail>0&&m.blur(),await o(l))}),t.hidden=!1}function X(t,e,n){if(!t||!e(t))throw new Error(n);return t}var Ce=X(document.getElementById("screen"),t=>t instanceof HTMLElement,"Screen element not found."),Te=X(document.getElementById("prompt"),t=>t instanceof HTMLFormElement,"Prompt form element not found."),Le=X(document.getElementById("input"),t=>t instanceof HTMLInputElement,"Prompt input element not found."),ke=document.getElementById("themeToggle"),Ee=document.getElementById("toast"),xt=document.querySelector(".title"),wt=document.querySelector(".ps1"),ve=document.getElementById("quickLinks"),xe=document.getElementById("quickLinksList"),we=document.getElementById("mobileCommandTray"),Se=document.getElementById("mobileCommandList"),St=document.getElementById("mobileTrayBack"),Mt=document.getElementById("mobileCustomTrigger"),Me=document.getElementById("mobileCommandDialog"),_t=document.getElementById("mobileCustomForm"),It=document.getElementById("mobileCustomInput"),_e=document.getElementById("mobileCustomSuggestions"),Ie=document.getElementById("mobileCustomSuggestionsHint"),Ht=document.getElementById("mobileCustomCancel"),j=window.matchMedia("(pointer: coarse)").matches,At="brad@portfolio",Pt=["help","contact","bio","projects","roles","education","cv"];function He(t){let e=Array.from(t.values()),n=new Set(Pt),o=[];for(let a of Pt){let s=t.get(a);s&&o.push(s)}return[...o,...e.filter(a=>!n.has(a.name))].map(a=>({command:a.name,kind:typeof a.complete=="function"?"withArgs":"simple"}))}xt&&(xt.textContent=`${At}: ~`);wt&&(wt.textContent=At);var Rt=bt(Ee),{controller:Pe,applyInitialTheme:Ae}=yt({themeToggle:ke,toast:Rt}),Re=dt(Rt),$t=Ct({screen:Ce}),{commands:Bt}=rt({profile:O,isMobile:j}),F=ut({renderer:$t,profile:O,fs:st(O),commands:Bt,theme:Pe,openUrl:Re,isMobile:j}),$e=He(Bt),K=null,Y=!1;async function J(t){let e=t.trim();if(!(e.length===0||Y)){Y=!0;try{K?.markFirstCommandSubmitted(),F.addHistory(e),await F.run(e),$t.scrollToBottom()}finally{Y=!1}j||K?.focus()}}K=pt({form:Te,input:Le,terminal:F,onRunCommand:J});vt({container:ve,list:xe,profile:O,aliases:["cv","github","linkedin","email"],onRunCommand:J});Et({enabled:j,container:we,list:Se,back:St instanceof HTMLButtonElement?St:null,customTrigger:Mt instanceof HTMLButtonElement?Mt:null,dialog:Me,form:_t instanceof HTMLFormElement?_t:null,input:It instanceof HTMLInputElement?It:null,suggestions:_e,suggestionsHint:Ie,cancel:Ht instanceof HTMLButtonElement?Ht:null,terminal:F,commands:$e,onRunCommand:J});Ae();F.boot();j||K?.focus();var q=0;window.addEventListener("resize",()=>{q&&cancelAnimationFrame(q),q=requestAnimationFrame(()=>{F.refreshIntroIfPristine(),q=0})});if(j){let t=0;document.addEventListener("touchend",e=>{if(!e.cancelable||e.touches.length>0)return;let n=performance.now();n-t<=300&&e.preventDefault(),t=n},{passive:!1})}
